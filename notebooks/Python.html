
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Biological Computing in Python &#8212; TheMulQuaBio</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=3943d584" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=01a0bdc2" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/togglebutton.js?v=3e7854f7"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/Python';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Biological Computing in R" href="R.html" />
    <link rel="prev" title="Scientific documents with \(\LaTeX\)" href="LaTeX.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="TheMulQuaBio - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="TheMulQuaBio - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Welcome to The Multilingual Quantitative Biologist!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Computing</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Unix.html">UNIX and Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="ShellScripting.html">Shell scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="Git.html">Version control with Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="LaTeX.html">Scientific documents with <span class="math notranslate nohighlight">\(\LaTeX\)</span></a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Biological Computing in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="R.html">Biological Computing in R</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Maths for Biologists</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../mathscourse/lecture01/01_Making_mathematical_statements.html">01 - Making mathematical statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mathscourse/lecture02/02_Describing_shapes_and_patterns.html">02   - Describing shapes and patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mathscourse/lecture03/03_Analysing_change%2C_one_step_at_a_time.html">03   - Analysing change, one step at a time</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mathscourse/lecture04/04_From_table_arrangements_to_powerful_tools.html">04 - From table arrangements to powerful tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mathscourse/lecture05/05_From_table_arrangements_to_powerful_tools_part2.html">05 - From table arrangements to powerful tools - part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mathscourse/lecture06/06_Analysing_change_continuously.html">06 - Analysing change, continuously</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mathscourse/lecture07/07_Analysing_change_continuously_part2.html">07 - Analysing change, continuously (Part 2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mathscourse/lecture08/08_Calculating_accumulated_change.html">08 - Calculating accumulated change</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mathscourse/tutorials/lecture01/Tutorial_01.html">Tutorial 01</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mathscourse/tutorials/lecture05/Tutorial_05.html">Tutorial 05</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mathscourse/tutorials/lecture06/Tutorial_06.html">Tutorial 06</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Basic Data Analyses and Statistics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Stats-Intro.html">Basic Data Science and Statistics: Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Data_R.html">Data Management and Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="ExpDesign.html">Experimental design and Data exploration</a></li>
<li class="toctree-l1"><a class="reference internal" href="t_F_tests.html">Basic hypothesis testing: <span class="math notranslate nohighlight">\(t\)</span> and <span class="math notranslate nohighlight">\(F\)</span> tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="regress.html">Linear Models: Regression</a></li>
<li class="toctree-l1"><a class="reference internal" href="anova.html">Linear Models: Analysis of variance</a></li>
<li class="toctree-l1"><a class="reference internal" href="MulExpl.html">Linear Models: Multiple explanatory variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="MulExplInter.html">Linear Models: Multiple variables with interactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="ModelSimp.html">Model simplification</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Advanced Data Analyses and Statistics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="glm.html">Generalised Linear Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="NLLS.html">Model Fitting using Non-linear Least-squares</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Appendix-JupyIntro.html">Introduction to Jupyter</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix-Data-Python.html">Data analyses  with Python &amp; Jupyter</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix-Maths.html">Mathematical models in Jupyter</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix-Databases.html">Databases <span class="tocSkip"></span></a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix-NLLS-Python.html">Model fitting in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix-MiniProj.html">The Computing Miniproject</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix-Assessment.html">TMQB Coursework Assessment</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix-HighPerformanceComputing.html">Introduction to High-Performance Computing (HPC)</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/mhasoba/TheMulQuaBio" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/mhasoba/TheMulQuaBio/issues/new?title=Issue%20on%20page%20%2Fnotebooks/Python.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/notebooks/Python.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Biological Computing in Python</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-python">Why Python?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python-versions">Python versions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#some-terminology">Some terminology</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-started-with-python">Getting started with Python</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#baby-steps">Baby steps</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-zen-of-python-and-good-programming-practices">The Zen of Python and good programming practices</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ipython">ipython</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#magic-commands">Magic commands</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#determining-an-object-s-type">Determining an object’s type</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#python-variables">Python variables</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python-operators">Python operators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#assigning-and-manipulating-variables">Assigning and manipulating variables</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#python-data-structures">Python data structures</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lists">Lists</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tuples">Tuples</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sets">Sets</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dictionaries">Dictionaries</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#copying-mutable-objects">Copying mutable objects</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python-with-strings">Python with strings</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-help">Getting help</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#writing-python-code">Writing Python code</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-running-blocks-of-code">Testing/Running blocks of code</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loops">Loops</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#iterator-vs-iterable">Iterator vs Iterable</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#some-loops-examples">Some loops examples</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#functions">Functions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-python-scripts">Running Python scripts</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-the-unix-shell">Using the UNIX shell</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#from-the-unix-shell-using-ipython">From the UNIX shell, using ipython</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#from-within-the-ipython-shell">From within the ipython shell</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#control-flow-tools">Control flow tools</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conditionals">Conditionals</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#more-examples-of-loops-and-conditionals-combined">More examples of loops and conditionals combined</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#comprehensions">Comprehensions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#variable-scope">Variable scope</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#global-variables">Global variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#importance-of-the-return-directive">Importance of the <code class="docutils literal notranslate"><span class="pre">return</span></code> directive</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#python-input-output">Python Input/Output</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#safely-opening-files-using-with-open">Safely opening files using <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">open()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#handling-csv-s">Handling <code class="docutils literal notranslate"><span class="pre">csv</span></code>’s</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#writing-python-programs">Writing Python programs</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#components-of-the-python-program">Components of the Python program</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#the-shebang">The shebang</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#the-docstring">The Docstring</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#internal-variables">Internal Variables</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#function-definitions-and-modules">Function <code class="docutils literal notranslate"><span class="pre">def</span></code>initions and “modules”</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#why-include-name-main-and-all-that-jazz">Why include <code class="docutils literal notranslate"><span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">"__main__"</span></code> and all that jazz</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-sys-argv">What is <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code>?</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-main-argv">What is <code class="docutils literal notranslate"><span class="pre">main(argv)</span></code> ?</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#finally-sys-exit">Finally, sys.exit()</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-program-with-control-flows-example">A program-with-control-flows example</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#practicals">Practicals</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#loops-and-list-comprehensions">Loops and List Comprehensions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#writing-a-program-with-control-flows">Writing a Program with Control flows</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#errors-in-your-python-code">Errors in your Python code</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-testing">Unit testing</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-testing-with-doctest">Unit testing with <code class="docutils literal notranslate"><span class="pre">doctest</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#other-unit-testing-approaches">Other unit testing approaches</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#debugging">Debugging</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#paranoid-programming-debugging-with-breakpoints">Paranoid programming: debugging with breakpoints</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#debugging-using-your-ide">Debugging using your IDE</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#errors-that-cannot-be-debugged">Errors that cannot be debugged</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#modules-and-code-compartmentalization">Modules and code compartmentalization</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#importing-modules">Importing Modules</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python-packages">Python packages</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Practicals</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#align-dna-sequences">Align DNA sequences</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#groupwork-practical-on-align-dna-sequences">Groupwork Practical on Align DNA sequences</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#groupwork-practical-on-align-dna-sequences-2">Groupwork Practical on Align DNA sequences 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#missing-oaks-problem">Missing oaks problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#groupwork-practical-on-missing-oaks-problem">Groupwork Practical on Missing oaks problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#practicals-wrap-up">Practicals wrap-up</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#numerical-computing-in-python">Numerical computing in Python</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy">Numpy</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#indexing-and-accessing-arrays">Indexing and accessing arrays</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulating-arrays">Manipulating arrays</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#replacing-adding-or-deleting-elements">Replacing, adding or deleting elements</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#flattening-or-reshaping-arrays">Flattening or reshaping arrays</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pre-allocating-arrays">Pre-allocating arrays</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy-matrices"><code class="docutils literal notranslate"><span class="pre">numpy</span></code> matrices</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#matrix-vector-operations">Matrix-vector operations</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-scipy-package">The <code class="docutils literal notranslate"><span class="pre">scipy</span></code> package</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scipy-stats">Scipy stats</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#numerical-integration-using-scipy">Numerical integration using  <code class="docutils literal notranslate"><span class="pre">scipy</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#area-under-a-curve">Area under a curve</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#the-lotka-volterra-model">The Lotka-Volterra model</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Practicals</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-need-for-speed-profiling-code">The need for speed: profiling code</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#profiling">Profiling</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#profiling-without-ipython">Profiling without ipython</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#quick-profiling-with-timeit">Quick profiling with <code class="docutils literal notranslate"><span class="pre">timeit</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vectorization-revisited">Vectorization revisited</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#an-example">An example</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#when-to-vectorize">When to vectorize?</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#no-free-lunch">“No free lunch!”</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Practicals</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-lotka-volterra-model-revisited">The Lotka-Volterra model revisited</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#groupwork-practical-compare-r-and-python-vectorization">Groupwork practical: Compare R and Python Vectorization</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#groupwork-practical-discrete-time-lv-model">Groupwork practical: Discrete time LV Model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#groupwork-practical-discrete-time-lv-model-with-stochasticity">Groupwork practical: Discrete time LV model with stochasticity</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#regular-expressions-in-python">Regular expressions in Python</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#metacharacters-vs-regular-characters">Metacharacters vs. regular characters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regex-special-sequences">Regex special sequences</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#some-regex-examples">Some regex examples</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regex-in-python">Regex in Python</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#practicals-some-regexercises">Practicals: Some RegExercises</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#grouping-regex-patterns">Grouping regex patterns</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#useful-re-commands">Useful <code class="docutils literal notranslate"><span class="pre">re</span></code> commands</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-all-matches">Finding all matches</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-in-files">Finding in files</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#groups-within-multiple-matches">Groups within multiple matches</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#extracting-text-from-webpages">Extracting text from webpages</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#replacing-text">Replacing text</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Practicals</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#blackbirds-problem">Blackbirds problem</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-python-to-build-workflows">Using Python to build workflows</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-subprocess">Using <code class="docutils literal notranslate"><span class="pre">subprocess</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#running-processes">Running processes</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#running-r">Running <code class="docutils literal notranslate"><span class="pre">R</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#handling-directory-and-file-paths">Handling directory and file paths</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Practicals</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#using-subprocess-to-run-a-r-script">Using <code class="docutils literal notranslate"><span class="pre">subprocess</span></code> to run a R script</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#using-os-to-crawl-directories">Using <code class="docutils literal notranslate"><span class="pre">os</span></code> to crawl directories</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#readings-and-resources">Readings and Resources</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#general">General</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">IPython</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">Python data structures</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#elements-of-the-python-program">Elements of the Python program</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#errors-and-debugging">Errors and Debugging</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#functions-modules-and-classes">Functions, Modules, and Classes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Python Packages</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scientific-computing">Scientific computing</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regular-expressions">Regular expressions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#other-stuff">Other stuff</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="biological-computing-in-python">
<h1>Biological Computing in Python<a class="headerlink" href="#biological-computing-in-python" title="Link to this heading">#</a></h1>
<blockquote class="epigraph">
<div><p>…some things in life are bad. They can really make you mad. Other things just make you swear and curse. When you’re chewing on life’s gristle, don’t grumble; give a whistle, and this’ll help things turn out for the best. And… always look on the bright side of life…</p>
<p class="attribution">—Monty Python
</p>
</div></blockquote>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">#</a></h2>
<p>Python is a modern, easy-to-write, interpreted (semi-compiled) programming language that was conceived with readability of code in mind. It has a numerous of feature-rich packages that can be used for a wide variety of biological applications and analyses.</p>
<p>This chapter is intended to teach you scientific programming in biology using Python. Specifically, you will learn:</p>
<ul class="simple">
<li><p>Basics of Python syntax and data structures</p></li>
<li><p>Python’s object-oriented features</p></li>
<li><p>Learning to use the <code class="docutils literal notranslate"><span class="pre">ipython</span></code> environment</p></li>
<li><p>How to write and run python code</p></li>
<li><p>Understand and implement Python control flow tools</p></li>
<li><p>Writing, debugging, using, and testing Python functions</p></li>
<li><p>Learning efficient numerical programming in Python</p></li>
<li><p>Using regular expressions in Python</p></li>
<li><p>Introduction to particularly useful Python packages</p></li>
<li><p>Using Python to run other, non-python tasks and code</p></li>
<li><p>Using Python to patch together data analysis and/or numerical simulation work flows</p></li>
</ul>
<section id="why-python">
<span id="python-why-python"></span><h3>Why Python?<a class="headerlink" href="#why-python" title="Link to this heading">#</a></h3>
<p>Python was designed with readability and re-usability in mind. Time taken by programming + debugging + running is likely to be relatively lower in python than less intuitive or cluttered languages (e.g., FORTRAN, Perl).</p>
<p>Python is a pretty good solution if you want to easily write readable code that is also reasonably efficient computationally (see the figure below).</p>
<hr class="docutils" />
<figure class="align-default" id="id9">
<a class="reference internal image-reference" href="../_images/benchmarks.svg"><img alt="Language speeds" src="../_images/benchmarks.svg" style="width: 700px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 12 </span><span class="caption-text"><strong>Python’s numerical computing performance compared to some others</strong>. Smaller numbers are better. Note that the y-axis is in <span class="math notranslate nohighlight">\(\log_{10}\)</span> scale. <br>
(Source: <a class="reference external" href="http://julialang.org/">http://julialang.org/</a>)</span><a class="headerlink" href="#id9" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<hr class="docutils" />
<section id="python-versions">
<h3>Python versions<a class="headerlink" href="#python-versions" title="Link to this heading">#</a></h3>
<p>We will use python 3; For python 2 vs 3 history, <a class="reference external" href="https://wiki.python.org/moin/Python2orPython3">read this</a>.</p>
</section>
<section id="some-terminology">
<span id="python-some-terminology"></span><h3>Some terminology<a class="headerlink" href="#some-terminology" title="Link to this heading">#</a></h3>
<p><em>What does “float” mean?</em> You will inevitably run into some such jargon in this chapter. The main ones you need to know are (you will learn more about these along the way):</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Term</p></th>
<th class="head text-left"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>Workspace</p></td>
<td class="text-left"><p>The “environment” of your current python <em>session</em>, including all variables, functions, objects, etc.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>Variable</p></td>
<td class="text-left"><p>A named number, text string, boolean (<code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>), or data structure that can change (more on variable and data types later)</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>Function</p></td>
<td class="text-left"><p>A computer procedure or routine that performs operations and returns some value(s), and which can be used again and again</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>Module</p></td>
<td class="text-left"><p><em>Variables</em> and <em>functions</em> packaged into a single set of programs that can be invoked as a re-useable command (potentially with sub-commands)</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>Class</p></td>
<td class="text-left"><p>A way of grouping <em>Variables</em> and <em>functions</em> into a single object with specific properties that are inherited when you create its copy. Unlike <em>modules</em>, you can create (“spawn”) many copies of a <em>class</em> within a python session or program</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>Object</p></td>
<td class="text-left"><p>A particular instance of a class (every object belongs to a class) that is created in a session and eventually destroyed; everything in your workspace is an object in python!</p></td>
</tr>
</tbody>
</table>
</div>
<p>This Module vs. Class vs. Object business is confusing. These constructs are created to make an (object-oriented) programming language like Python more flexible and user friendly (though it might not seem so to you currently!). In practice, at least for your current purposes, you will not build you own python classes much (but will use the inbuilt Python classes).You will however write your own modules. More on all this later (in the second Python Chapter).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Data “structures” vs. “objects”</strong>: You will often see the terms “object” and “data structure” used in this and other chapters. These two have a very distinct meaning in object-oriented programming (OOP) languages like Python and R. A data structure is just a “dumb” container for data (e.g., a vector). An object, on the other hand can be a data structure, but also any other variable or a function. Python, being an OOP language, converts everything in the current environment to an object so that it knows what to do with each such entity — each object type has its own set of rules for operations and manipulations that Python uses when interpreting your commands.</p>
</div>
</section>
</section>
<section id="getting-started-with-python">
<h2>Getting started with Python<a class="headerlink" href="#getting-started-with-python" title="Link to this heading">#</a></h2>
<p>OK, so let’s get started with Python.</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> In your bash terminal (or by opening a new one with <code class="docutils literal notranslate"><span class="pre">ctrl+alt+t</span></code>), type:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3
</pre></div>
</div>
<p>You will get a new command prompt that looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span>
</pre></div>
</div>
<section id="baby-steps">
<h3>Baby steps<a class="headerlink" href="#baby-steps" title="Link to this heading">#</a></h3>
<p>Now, try some simple operations:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span> <span class="c1"># Summation; note that comments still start with #</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span> <span class="c1"># Multiplication</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">/</span> <span class="mi">2</span> <span class="c1"># division</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.0
</pre></div>
</div>
</div>
</div>
<p>To specify an integer division, use <code class="docutils literal notranslate"><span class="pre">//</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span><span class="o">//</span><span class="mi">2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="c1"># logical operation</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="c1"># another one</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="the-zen-of-python-and-good-programming-practices">
<h2>The Zen of Python and good programming practices<a class="headerlink" href="#the-zen-of-python-and-good-programming-practices" title="Link to this heading">#</a></h2>
<p>Type this in your Python terminal:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">this</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Flat is better than nested.
Sparse is better than dense.
Readability counts.
Special cases aren&#39;t special enough to break the rules.
Although practicality beats purity.
Errors should never pass silently.
Unless explicitly silenced.
In the face of ambiguity, refuse the temptation to guess.
There should be one-- and preferably only one --obvious way to do it.
Although that way may not be obvious at first unless you&#39;re Dutch.
Now is better than never.
Although never is often better than *right* now.
If the implementation is hard to explain, it&#39;s a bad idea.
If the implementation is easy to explain, it may be a good idea.
Namespaces are one honking great idea -- let&#39;s do more of those!
</pre></div>
</div>
</div>
</div>
<p>They are Python’s programming principles.</p>
<p><em>Think about and discuss with your class/coursemates what each of these programming principles mean.</em></p>
<p>The “Dutch” in one of them refers to  Guido van Rossum, inventor of the python language.</p>
<p><a class="reference external" href="https://inventwithpython.com/blog/2018/08/17/the-zen-of-python-explained/">Here</a>’s one set of interpretations of these.</p>
<p>In the rest of this chapter you are going to learn the following key elements of good programming practices, which you will then build upon in subsequent chapters:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Adhering to these practices will result in more maintainable, efficient, and scalable code, enhancing collaboration and reducing future technical load, <strong>irrespective of programming language</strong>.</p>
</div>
<ol class="arabic simple">
<li><p><strong>Write Clear, Readable Code</strong></p>
<ul class="simple">
<li><p>Use names that clearly describe their purpose (meaningful variable / function / object names).</p></li>
<li><p>Stick to a single naming convention/style (e.g., <a class="reference external" href="https://simple.wikipedia.org/wiki/CamelCase">camelCase</a>, <a class="reference external" href="https://en.wikipedia.org/wiki/Snake_case">snake_case</a>).</p></li>
<li><p>Provide concise comments and document code sections to explain their logic, especially for complex parts.</p></li>
</ul>
</li>
<li><p><strong>Make it Modular to the Max!</strong></p>
<ul class="simple">
<li><p>Functions (or “methods” - coming up later below) should perform one task (the <a class="reference external" href="https://en.wikipedia.org/wiki/Single-responsibility_principle">“Single Responsibility Principle (SRP)”</a>).</p></li>
<li><p>Break down large tasks into smaller, reusable functions.</p></li>
<li><p>Avoid duplicating code; encapsulate repetitive logic in functions (<a class="reference external" href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself">the “Don’t Repeat Yourself (DRY)” principle</a>).</p></li>
</ul>
</li>
<li><p><strong>Handle Errors Gracefully</strong></p>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">try-except</span></code> blocks or other error-handling mechanisms to anticipate failures and handle them without crashing the program (coming up later in this Chapter).</p></li>
<li><p>Provide meaningful error messages that help others (and yourself in the future!) understand what went wrong and how to fix it.</p></li>
</ul>
</li>
<li><p><strong>Test, Test, Test!</strong></p>
<ul class="simple">
<li><p>Write automated tests for individual units of code to ensure they behave as expected.</p></li>
<li><p>Test code during development to catch bugs before they become difficult to track.</p></li>
</ul>
</li>
<li><p><strong><a class="reference internal" href="Git.html"><span class="std std-doc">Version Control</span></a></strong></p>
<ul class="simple">
<li><p>Commit frequently, with clear commit messages describing the purpose of the changes.</p></li>
<li><p>Develop new features, solutions, or bug fixes in separate branches to avoid conflicts in the main branch.</p></li>
</ul>
</li>
<li><p><strong>Optimization</strong></p>
<ul class="simple">
<li><p>Write code that minimizes time (make it faster) and space (make its RAM usage smaller) complexity where possible.</p></li>
<li><p>But focus first on functionality, then optimize only where performance is actually a bottleneck. Remember Donald Knuth’s quote: “<em>Premature optimizaton is the root of all evil</em>”!</p></li>
</ul>
</li>
<li><p><strong>Use Consistent Code Style</strong></p>
<ul class="simple">
<li><p>Adhere to style guides (e.g., PEP 8 for Python - coming up below) to keep code consistent.</p></li>
<li><p>Use automated tools to enforce coding standards and detect errors (use code formatting and linting tools).</p></li>
</ul>
</li>
<li><p><strong>Review Code</strong></p>
<ul class="simple">
<li><p>Have others review your code to catch issues and get feedback on design and implementation.</p></li>
<li><p>Collaborative - use feedback from opthers to refine code and learn better practices.</p></li>
</ul>
</li>
<li><p><strong>Avoid Hardcoding!</strong></p>
<ul class="simple">
<li><p>Avoid hardcoding parameter values (e.g., absolute file paths, values of certain constants, settings) directly into the program. Use external inputs, global constants and external configuration files instead.</p></li>
</ul>
</li>
<li><p><strong>Refactor Regularly</strong></p></li>
</ol>
<ul class="simple">
<li><p>Continuously improve code by removing redundancies, simplifying logic, or improving structure without changing functionality (aka “Refactoring code”).</p></li>
<li><p>Watch for and address patterns that indicate poor design (software nerds call it “Code smell detection”!):</p>
<ul>
<li><p>Duplicated code lines/blocks</p></li>
<li><p>Overly complex functions (too long, performing multiple tasks, difficult to understand)</p></li>
<li><p>Tightly coupled code (different components/functions/modules are so dependent on each other that changes in one requires changes in the other(s)).</p></li>
</ul>
</li>
</ul>
</section>
<section id="ipython">
<h2>ipython<a class="headerlink" href="#ipython" title="Link to this heading">#</a></h2>
<p>Let’s switch to the <code class="docutils literal notranslate"><span class="pre">i</span></code>nteractive python shell, <code class="docutils literal notranslate"><span class="pre">ipython</span></code> that you installed above.</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Type <code class="docutils literal notranslate"><span class="pre">ctrl+D</span></code> in the terminal at the python prompt: this will exit you from the python shell and you will see the bash prompt again.</p>
<p>Now type</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ipython3
</pre></div>
</div>
<p>After some text, you should now see the ipython prompt:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>In<span class="w"> </span><span class="o">[</span><span class="m">1</span><span class="o">]</span>:
</pre></div>
</div>
<p>The ipython shell has many advantages over the bare-bones, non-interactive python shell (with the <code class="docutils literal notranslate"><span class="pre">&gt;&gt;&gt;</span></code> prompt). For example, as in the bash shell, <code class="docutils literal notranslate"><span class="pre">TAB</span></code> leads to auto-completion of a command or file name (try it).</p>
<section id="magic-commands">
<h3>Magic commands<a class="headerlink" href="#magic-commands" title="Link to this heading">#</a></h3>
<p>IPython has “magic commands” (which start with % ; e.g., <code class="docutils literal notranslate"><span class="pre">%run</span></code>). Here are some useful magic commands:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Command</p></th>
<th class="head text-left"><p>What it does</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">%who</span></code></p></td>
<td class="text-left"><p>Shows current namespace (all variables, modules and functions)</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">%whos</span></code></p></td>
<td class="text-left"><p>Also display the type of each variable; typing <code class="docutils literal notranslate"> <span class="pre">%whos</span> <span class="pre">function</span></code> only displays functions etc.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">%pwd</span></code></p></td>
<td class="text-left"><p>Print working directory</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">%history</span></code></p></td>
<td class="text-left"><p>Print recent commands</p></td>
</tr>
</tbody>
</table>
</div>
<p>You can try any or all of these now. For example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">who</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>this	 x	 y	 
</pre></div>
</div>
</div>
</div>
<p>That is, there are no objects in your workspace yet. Let’s create one:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">who</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>a	 this	 x	 y	 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">whos</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Variable   Type      Data/Info
------------------------------
a          int       1
this       module    &lt;module &#39;this&#39; from &#39;/usr&lt;...&gt;/lib/python3.10/this.py&#39;&gt;
x          int       0
y          int       2
</pre></div>
</div>
</div>
</div>
</section>
<section id="determining-an-object-s-type">
<h3>Determining an object’s type<a class="headerlink" href="#determining-an-object-s-type" title="Link to this heading">#</a></h3>
<p>Another useful IPython feature is the question mark, which can be used to find what a particular Python object is, including variables you created. For example, try: <code class="docutils literal notranslate"><span class="pre">?a</span></code></p>
<p>This will give you detailed information about this variable (which is an object, belonging to a particular class, because this is python!).</p>
<p>You can also check a variable’s type:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>int
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can configure ipython’s environment and behavior by editing the <code class="docutils literal notranslate"><span class="pre">ipython_config.py</span></code> file, which is located in the <code class="docutils literal notranslate"><span class="pre">.ipython</span></code> directory of your <code class="docutils literal notranslate"><span class="pre">home</span></code> (on Linux/Ubuntu). This file does not initially exist, but you can create it by running <code class="docutils literal notranslate"><span class="pre">ipython</span> <span class="pre">profile</span> <span class="pre">create</span> <span class="pre">[profilename]</span></code> in a bash terminal. Then, edit it. For example, on Ubuntu you can</p>
<p><code class="docutils literal notranslate"><span class="pre">nano</span> <span class="pre">~/.ipython/profile_default/ipython_config.py</span> <span class="pre">&amp;</span></code></p>
<p>And then make the changes you want to the default ipython configuration. For example, If you don’t like the blue
<code class="docutils literal notranslate"><span class="pre">ipython</span></code> prompt, you can type <code class="docutils literal notranslate"><span class="pre">%colors</span> <span class="pre">linux</span></code> (once inside the shell). If you want to make this color the default, then edit the <code class="docutils literal notranslate"><span class="pre">ipython_config.py</span></code> — search for “Set the color scheme” option in the file.</p>
</div>
</section>
</section>
<section id="python-variables">
<span id="python-python-variables"></span><h2>Python variables<a class="headerlink" href="#python-variables" title="Link to this heading">#</a></h2>
<p>Now, let’s continue our python intro. We will first learn about the python variable types that were mentioned above. The types are:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mi">2</span> <span class="c1">#integer</span>
<span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>int
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mf">2.</span> <span class="c1">#Float</span>
<span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>float
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;Two&quot;</span> <span class="c1">#String</span>
<span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>str
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="kc">True</span> <span class="c1">#Boolean</span>
<span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>bool
</pre></div>
</div>
</div>
</div>
<p><em>Thus, python has integer, float (real numbers, with different precision levels) string and boolean variables.</em></p>
<p>Also, try <code class="docutils literal notranslate"><span class="pre">?a</span></code> after defining <code class="docutils literal notranslate"><span class="pre">a</span></code> to be a boolean variable, and note this output in particular:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">The</span> <span class="n">builtins</span> <span class="kc">True</span> <span class="ow">and</span> <span class="kc">False</span> <span class="n">are</span> <span class="n">the</span> <span class="n">only</span> <span class="n">two</span> <span class="n">instances</span> <span class="n">of</span> <span class="n">the</span> <span class="k">class</span> <span class="nc">bool</span><span class="o">.</span> <span class="n">The</span> <span class="k">class</span> <span class="nc">bool</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">subclass</span> <span class="n">of</span> <span class="n">the</span> <span class="k">class</span> <span class="nc">int</span><span class="p">,</span> <span class="n">but</span> <span class="k">with</span> <span class="n">only</span> <span class="n">two</span> <span class="n">possible</span> <span class="n">values</span><span class="o">.</span> 
</pre></div>
</div>
<p>The idea of what a class is hopefully be a little bit clearer to you now.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In Python, the type of a variable is determined when the program or command is running (dynamic typing) (like <code class="docutils literal notranslate"><span class="pre">R</span></code>, unlike <code class="docutils literal notranslate"><span class="pre">C</span></code> or <code class="docutils literal notranslate"><span class="pre">FORTRAN</span></code>). This is convenient, but can make programs slow. More on efficient computing <a class="reference internal" href="#"><span class="std std-doc">later</span></a>.</p>
</div>
<section id="python-operators">
<h3>Python operators<a class="headerlink" href="#python-operators" title="Link to this heading">#</a></h3>
<p>Here are the operators that you can use on variables in python:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Operator</p></th>
<th class="head text-left"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">+</span></code></p></td>
<td class="text-left"><p>Addition</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">-</span></code></p></td>
<td class="text-left"><p>Subtraction</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">*</span></code></p></td>
<td class="text-left"><p>Multiplication</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">/</span></code></p></td>
<td class="text-left"><p>Division</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">**</span></code></p></td>
<td class="text-left"><p>Power</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">%</span></code></p></td>
<td class="text-left"><p>Modulo</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">//</span></code></p></td>
<td class="text-left"><p>Integer division</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">==</span></code></p></td>
<td class="text-left"><p>Equals</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">!=</span></code></p></td>
<td class="text-left"><p>Differs</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">&gt;</span></code></p></td>
<td class="text-left"><p>Greater</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">&gt;=</span></code></p></td>
<td class="text-left"><p>Greater or equal</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">&amp;,</span> <span class="pre">and</span></code></p></td>
<td class="text-left"><p>Logical AND</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><span class="math notranslate nohighlight">\(\vert\)</span> , <code class="docutils literal notranslate"><span class="pre">or</span></code></p></td>
<td class="text-left"><p>Logical OR</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">!,</span> <span class="pre">not</span></code></p></td>
<td class="text-left"><p>Logical NOT</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="assigning-and-manipulating-variables">
<h3>Assigning and manipulating variables<a class="headerlink" href="#assigning-and-manipulating-variables" title="Link to this heading">#</a></h3>
<p>Try the following:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">==</span> <span class="mi">2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">!=</span> <span class="mi">2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="o">/</span> <span class="mi">2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.5
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="o">//</span> <span class="mi">2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
<p><em>What happened here</em>? This is an integer division, so the decimal part is lost.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;hola, &#39;</span> <span class="o">+</span> <span class="s1">&#39;me llamo Samraat&#39;</span> <span class="c1">#why not learn two human languages at the same time?! </span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;hola, me llamo Samraat&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">5</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">+</span> <span class="mi">3</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>8
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="o">=</span> <span class="mi">2</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>7
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;My string&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">+</span> <span class="s1">&#39; now has more stuff&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;My string now has more stuff&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">34</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>

<span class="ne">TypeError</span>: can only concatenate str (not &quot;int&quot;) to str
</pre></div>
</div>
</div>
</div>
<p>Doesn’t work. No problem, we can convert from one type to another:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;My string2&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="s1">&#39;88&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">+</span> <span class="n">z</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;My string88&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>90
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="python-data-structures">
<h2>Python data structures<a class="headerlink" href="#python-data-structures" title="Link to this heading">#</a></h2>
<p>Python variables can be stored and manipulated in:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p></p></th>
<th class="head text-left"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><em>List</em>:</p></td>
<td class="text-left"><p>most versatile, can contain mixed data, are “mutable” (elements can can be modified), and can contain duplicates; created by enclosing in square brackets, <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">]</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><em>Tuple</em>:</p></td>
<td class="text-left"><p>like a list, but “immutable” — like a read only list; created by enclosing in round brackets, <code class="docutils literal notranslate"><span class="pre">(</span> <span class="pre">)</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><em>Dictionary</em>:</p></td>
<td class="text-left"><p>a kind of “hash table” of key-value pairs where the key can be number or string and values can be any python object, but there can be only unique key-value pairs; created by enclosing in curly brackets, <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">}</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><em>numpy arrays</em>:</p></td>
<td class="text-left"><p>Fast, compact, convenient for numerical computing — more on this later!</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>What about <a class="reference external" href="https://pandas.pydata.org/">Pandas</a> <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.array.html">arrays</a> as a data structure? We will learn about them later. These are inherently slower (less computationally efficient) than <code class="docutils literal notranslate"><span class="pre">numpy</span></code> arrays, and are best used in the right context (e.g., they make data exploration or visualizations more convenient, or apply functions designed to run optiomally on them).</p>
</div>
<section id="lists">
<h3>Lists<a class="headerlink" href="#lists" title="Link to this heading">#</a></h3>
<p>These are the most versatile, and can contain compound data. They are “mutable”, as will be illustrated below. Try this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyList</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mf">2.44</span><span class="p">,</span><span class="s1">&#39;green&#39;</span><span class="p">,</span><span class="kc">True</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyList</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.44
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3
</pre></div>
</div>
</div>
</div>
<p><em>Note that python “indexing” starts at 0, not 1!</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyList</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">IndexError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">43</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">MyList</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>

<span class="ne">IndexError</span>: list index out of range
</pre></div>
</div>
</div>
</div>
<p>As expected!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyList</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyList</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[3, 2.44, &#39;blue&#39;, True]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;a new item&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Note <code class="docutils literal notranslate"><span class="pre">.append</span></code>. This is an operation (a “method”) that can be applied to any “object” with the “class” list. You can check the type of any object:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">whos</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Variable   Type      Data/Info
------------------------------
MyList     list      n=5
a          bool      True
this       module    &lt;module &#39;this&#39; from &#39;/usr&lt;...&gt;/lib/python3.10/this.py&#39;&gt;
x          str       My string
y          int       2
z          str       88
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">MyList</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>list
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">MyList</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;list&#39;&gt;
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In Python3 there is no difference between “class” and “type”. They are in most cases used as synonyms.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyList</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[3, 2.44, &#39;blue&#39;, True, &#39;a new item&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">MyList</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyList</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[3, 2.44, True, &#39;a new item&#39;]
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Note that in ipython you can suffix an <code class="docutils literal notranslate"><span class="pre">.</span></code> to a particular object (e.g., <code class="docutils literal notranslate"><span class="pre">MyList.</span></code>), and then hit tab to see the methods that can be applied to that object.</p>
</div>
</section>
<section id="tuples">
<h3>Tuples<a class="headerlink" href="#tuples" title="Link to this heading">#</a></h3>
<p>Tuples are like a list, but “immutable”, that is, a <em>particular pair</em> or sequence of strings or numbers cannot be modified after it is created. So a tuple is like a read-only list.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyTuple</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">MyTuple</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">MyTuple</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>tuple
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyTuple</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;a&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">MyTuple</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3
</pre></div>
</div>
</div>
</div>
<p>Tuples are particularly useful when you have sets (pairs, triplets, etc) of items associated with each other that you want to store such that those associations cannot be modified.</p>
<p>Try this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">FoodWeb</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">),(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">),(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">),(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">)]</span>
<span class="n">FoodWeb</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(&#39;a&#39;, &#39;b&#39;), (&#39;a&#39;, &#39;c&#39;), (&#39;b&#39;, &#39;c&#39;), (&#39;c&#39;, &#39;c&#39;)]
</pre></div>
</div>
</div>
</div>
<p>So we created a list of tuples (note the use of square brackets <code class="docutils literal notranslate"><span class="pre">[]</span></code>)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">FoodWeb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&#39;a&#39;, &#39;b&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">FoodWeb</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;a&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">FoodWeb</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;bbb&quot;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">62</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">FoodWeb</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;bbb&quot;</span>

<span class="ne">TypeError</span>: &#39;tuple&#39; object does not support item assignment
</pre></div>
</div>
</div>
</div>
<p>Thus, tuples are “immutable”!</p>
<p>However, you can change a whole pairing:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">FoodWeb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;bbb&quot;</span><span class="p">,</span><span class="s2">&quot;ccc&quot;</span><span class="p">)</span> 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">FoodWeb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&#39;bbb&#39;, &#39;ccc&#39;)
</pre></div>
</div>
</div>
</div>
<p><em>In the above example, why assign these food web data to a list of tuples and not a list of lists?</em> — because we want to maintain the species associations, no matter what — they are sacrosanct.</p>
<p>Thus, you cannot:</p>
<ul class="simple">
<li><p>add elements to a tuple. Tuples have no <em>inbuilt</em> append or extend method (but you can append to them with a bit of extra work - see below).</p></li>
<li><p>remove elements from a tuple. Tuples have no remove method.</p></li>
</ul>
<p>But you can:</p>
<ul class="simple">
<li><p>find elements in a tuple, since this doesn’t change the tuple.</p></li>
<li><p>use the <code class="docutils literal notranslate"><span class="pre">in</span></code> operator to check if an element exists in the tuple or iterate over them (explained in the control flow tools sections below).</p></li>
</ul>
<p>The key point is that tuples are faster than lists, as you might expect for an immutable object (it has a fixed memory space, which makes it more efficient to retrieve). using tuples also makes your code safer as it effectively write-protects data (as long as you don’t plan to modify those particular data).</p>
<p>Tuples may be immutable, but you <em>can</em> append to them by first creating an “empty space” for the new item:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[])</span> 
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(1, 2, [])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(1, 2, [1000])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(1, 2, [1000, 1000])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">100</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(1, 2, [1000, 1000, (100, 10)])
</pre></div>
</div>
</div>
</div>
<p>You can also concatenate, slice and dice them as long as they contain a single sequence or set of items:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(1, 2, 3, 4, 5, 6)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="n">c</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2, 3, 4, 5, 6)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2, 3, 4, 5, 6)
</pre></div>
</div>
</div>
</div>
<p>They can be a heterogeneous set as well.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&#39;1&#39;, 2, True)
</pre></div>
</div>
</div>
</div>
</section>
<section id="sets">
<h3>Sets<a class="headerlink" href="#sets" title="Link to this heading">#</a></h3>
<p>You can convert a list to an mutable “set” — an unordered collection with no duplicate elements. Once you create a set you can perform set operations on it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{5, 6, 7, 8, 9}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">&amp;</span> <span class="n">c</span> <span class="c1"># intersection</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{5, 6}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">|</span> <span class="n">c</span> <span class="c1"># union</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{3, 4, 5, 6, 7, 8, 9}
</pre></div>
</div>
</div>
</div>
<p>The key set operations in python are:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Operation</p></th>
<th class="head text-left"><p>Command</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">-</span> <span class="pre">b</span> </code></p></td>
<td class="text-left"><p>a.difference(b)</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&lt;=</span> <span class="pre">b</span></code></p></td>
<td class="text-left"><p>a.issubset(b)</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&gt;=</span> <span class="pre">b</span></code></p></td>
<td class="text-left"><p>b.issubset(a)</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&amp;</span> <span class="pre">b</span></code></p></td>
<td class="text-left"><p>a.intersection(b)</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">a</span></code> <span class="math notranslate nohighlight">\(\vert\)</span> <code class="docutils literal notranslate"><span class="pre">b</span></code></p></td>
<td class="text-left"><p>a.union(b)</p></td>
</tr>
</tbody>
</table>
</div>
<p>You can also convert tuples to sets:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define a tuple</span>
<span class="n">my_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="c1"># Convert tuple to set</span>
<span class="n">my_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">my_tuple</span><span class="p">)</span>

<span class="c1"># Print the set</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_set</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{1, 2, 3, 4, 5}
</pre></div>
</div>
</div>
</div>
</section>
<section id="dictionaries">
<h3>Dictionaries<a class="headerlink" href="#dictionaries" title="Link to this heading">#</a></h3>
<p>A dictionary is a set of values (any python object) indexed by keys (string or number). So they are a bit like <code class="docutils literal notranslate"><span class="pre">R</span></code> lists.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">GenomeSize</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Homo sapiens&#39;</span><span class="p">:</span> <span class="mf">3200.0</span><span class="p">,</span> <span class="s1">&#39;Escherichia coli&#39;</span><span class="p">:</span> <span class="mf">4.6</span><span class="p">,</span> <span class="s1">&#39;Arabidopsis thaliana&#39;</span><span class="p">:</span> <span class="mf">157.0</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span> <span class="n">GenomeSize</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;Homo sapiens&#39;: 3200.0,
 &#39;Escherichia coli&#39;: 4.6,
 &#39;Arabidopsis thaliana&#39;: 157.0}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">GenomeSize</span><span class="p">[</span><span class="s1">&#39;Arabidopsis thaliana&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>157.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">GenomeSize</span><span class="p">[</span><span class="s1">&#39;Saccharomyces cerevisiae&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">12.1</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">GenomeSize</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;Homo sapiens&#39;: 3200.0,
 &#39;Escherichia coli&#39;: 4.6,
 &#39;Arabidopsis thaliana&#39;: 157.0,
 &#39;Saccharomyces cerevisiae&#39;: 12.1}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">GenomeSize</span><span class="p">[</span><span class="s1">&#39;Escherichia coli&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">4.6</span> 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">GenomeSize</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;Homo sapiens&#39;: 3200.0,
 &#39;Escherichia coli&#39;: 4.6,
 &#39;Arabidopsis thaliana&#39;: 157.0,
 &#39;Saccharomyces cerevisiae&#39;: 12.1}
</pre></div>
</div>
</div>
</div>
<p>Because ‘Escherichia coli’ is already in the dictionary, it is not repeated.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">GenomeSize</span><span class="p">[</span><span class="s1">&#39;Homo sapiens&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3201.1</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">GenomeSize</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;Homo sapiens&#39;: 3201.1,
 &#39;Escherichia coli&#39;: 4.6,
 &#39;Arabidopsis thaliana&#39;: 157.0,
 &#39;Saccharomyces cerevisiae&#39;: 12.1}
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Tuples that contain immutable values like strings, numbers, and other tuples  can be used as dictionary keys. Lists can never be used as dictionary keys, because they are mutable.</p>
</div>
<p>Also, every dictionary key must be unique.  If you try to add a new key-value pair to a dictionary using a key that already exists, the new value will overwrite the previous value associated with that key.</p>
<p>Try this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define a dictionary with duplicate keys</span>
<span class="n">my_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>

<span class="c1"># Print the dictionary</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_dict</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;a&#39;: 3, &#39;b&#39;: 2}
</pre></div>
</div>
</div>
</div>
<p>In summary, the guidelines for choosing a Python data structure are:</p>
<ul class="simple">
<li><p>If your elements/data are unordered and indexed by numbers use a <em>list</em></p></li>
<li><p>If you’re defining a constant set of values (or ordered sequences) and all you’re ever going to do with them is iterate through them, use a <em>tuple</em>.</p></li>
<li><p>If you want to perform set operations on data, use a <em>set</em></p></li>
<li><p>If they are unordered and indexed by keys (e.g., names), use a  <em>dictionary</em></p></li>
</ul>
<p><em>But why not use dictionaries for everything?</em> – because it can slow down your code!</p>
</section>
<section id="copying-mutable-objects">
<h3>Copying mutable objects<a class="headerlink" href="#copying-mutable-objects" title="Link to this heading">#</a></h3>
<p>Copying mutable objects can be tricky because by default, when you create a new variable based on an existing one, Python only creates a reference to the original (that is it does not create a new, duplicate variable in memory as such). To understand this, let’s see an example.</p>
<p>First, try this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span>
</pre></div>
</div>
</div>
</div>
<p>Here, you have not really copied, but merely created a new “tag” (like a label) for <code class="docutils literal notranslate"><span class="pre">a</span></code>, called <code class="docutils literal notranslate"><span class="pre">b</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 2, 3, 4]
[1, 2, 3, 4]
</pre></div>
</div>
</div>
</div>
<p>So <code class="docutils literal notranslate"><span class="pre">b</span></code> changed as well! This is because <code class="docutils literal notranslate"><span class="pre">b</span></code> is just a “pointer” or “reference” to <code class="docutils literal notranslate"><span class="pre">a</span></code>, not an actual copy in memory.</p>
<p>Now, try:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">[:]</span>  <span class="c1"># This is a &quot;shallow&quot; copy; one level deep</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 2, 3, 4]
[1, 2, 3]
</pre></div>
</div>
</div>
</div>
<p>That worked! But what about more complex lists? Try this nested list:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">[:]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[1, 2], [3, 4]]
[[1, 2], [3, 4]]
</pre></div>
</div>
</div>
</div>
<p>Now, modify <code class="docutils literal notranslate"><span class="pre">a</span></code>, and then inspect both <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">22</span> <span class="c1"># Note how I accessed this 2D list</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[1, 22], [3, 4]]
[[1, 22], [3, 4]]
</pre></div>
</div>
</div>
</div>
<p>So <code class="docutils literal notranslate"><span class="pre">b</span></code> still got modified!</p>
<p>This is because shallow copy is not recursive, that is, it does not copy beyond the first level of the list, leaving the values in the nested list still linked in memory to the  original object <code class="docutils literal notranslate"><span class="pre">a</span></code>.</p>
<p>The solution is to do a “deep” copy:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">copy</span>

<span class="n">a</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">22</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[1, 22], [3, 4]]
[[1, 2], [3, 4]]
</pre></div>
</div>
</div>
</div>
<p>So, you need to employ <code class="docutils literal notranslate"><span class="pre">deepcopy</span></code> to really copy an existing object or variable and assign a new name to the copy. So, in summary, shallow copying an object won’t create objects that are independent clones, i.e., the copy is not fully independent of the original. A deep copy of an object will recursively clone “child” objects (like nested parts of a list). The clone is fully independent of the original, but creating a deep copy is slower, as it involves assigning new memory space. Keep in mind that this shallow vs. deep copy business does  not just apply to lists. You can copy arbitrary objects (including custom classes) with the copy module.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Why Python “shallow” copies objects:</strong> This is a bit of a technical detail, but important to keep in mind: Python does shallow copying of mutable objects for (computing) performance considerations. By not copying the underlying object when you re-assign a mutable object to a new (“variable”) name, Python avoids unnecessary memory usage. This is known as “passing by reference” (in contrast to passing by “value”, where a new variable would be actually created in memory). That does not change the fact that shallow vs. deep copying can be confusing, of course!</p>
</div>
</section>
<section id="python-with-strings">
<h3>Python with strings<a class="headerlink" href="#python-with-strings" title="Link to this heading">#</a></h3>
<p>One of the things that makes python so useful and versatile, is that it has a powerful set of inbuilt commands to perform string manipulations. For example, try these:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot; this is a string &quot;</span>
<span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="c1"># length of s -&gt; 18</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>18
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;-&quot;</span><span class="p">)</span> <span class="c1"># Substitute spaces &quot; &quot; with dashes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;-this-is-a-string-&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">)</span> <span class="c1"># First occurrence of s (remember, indexing starts at 0)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">)</span><span class="c1"># Count the number of &quot;s&quot;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">()</span> <span class="c1"># Split the string using spaces and make a list </span>
<span class="n">t</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;this&#39;, &#39;is&#39;, &#39;a&#39;, &#39;string&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; is &quot;</span><span class="p">)</span> <span class="c1"># Split the string using &quot; is &quot; and make a list out of it</span>
<span class="n">t</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39; this&#39;, &#39;a string &#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="c1"># remove trailing spaces</span>
<span class="n">t</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;this is a string&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39; THIS IS A STRING &#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="c1"># can perform sequential operations</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;THIS IS A STRING&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;WORD&#39;</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="c1"># can perform operations directy on a literal string </span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;word&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="getting-help">
<h3>Getting help<a class="headerlink" href="#getting-help" title="Link to this heading">#</a></h3>
<p>You can do this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="err">?</span><span class="n">s</span><span class="o">.</span><span class="n">upper</span>
</pre></div>
</div>
<p>Also try <code class="docutils literal notranslate"><span class="pre">help()</span></code> at the python/ipython prompt.</p>
</section>
</section>
<section id="writing-python-code">
<h2>Writing Python code<a class="headerlink" href="#writing-python-code" title="Link to this heading">#</a></h2>
<p>Now let’s learn to write and run python code from a <code class="docutils literal notranslate"><span class="pre">.py</span></code> file. But first, some guidelines for good code-writing practices (also see the official <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/?">python style guide</a>):</p>
<ul class="simple">
<li><p>Wrap lines to be &lt;80 characters long. You can use parentheses <code class="docutils literal notranslate"><span class="pre">()</span></code> or signal that the line continues using a backslash <code class="docutils literal notranslate"><span class="pre">\</span></code></p></li>
<li><p>Use either 4 spaces for indentation or tabs, but not both. (Spaces are the preferred indentation method according to <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/#indentation">pep8</a>)</p></li>
<li><p>Separate functions using a blank line</p></li>
<li><p>When possible, write comments on separate lines</p></li>
</ul>
<p>Make sure you have chosen a particular indent type (space or tab) in whatever code IDE/editor you are using — indentation is all-important in python.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>IDEs / code editors, by default, will typically impose consistency of which indentation (tab or 4 spaces) is used in and across Python scripts. For example, 4 spaces is usually the default, and if you use a tab (easier, quicker) to indent code while writing, the editor will automatically convert it to 4 spaces. If your code editor does not do this automatically, you should be able to configure it to do so.</p>
</div>
<p>Furthermore,</p>
<ul class="simple">
<li><p>Use “docstrings” to document how to use the code, and <em>comments</em> to explain why and how the code works (we will learn about docstrings soon, below)</p></li>
<li><p>Follow naming conventions, especially:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">a_variable</span></code> (this is “snake case”; use underscores, not spaces in variable names)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_internal_variable</span></code> (allowed, but use as a module-specific variable only)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SOME_CONSTANT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a_function</span></code> (and don’t use capital letters in function names)</p></li>
</ul>
</li>
<li><p>Never call a variable <code class="docutils literal notranslate"><span class="pre">l</span></code> or <code class="docutils literal notranslate"><span class="pre">O</span></code> or <code class="docutils literal notranslate"><span class="pre">o</span></code> (<em>why not?</em> – you are likely to confuse it with <code class="docutils literal notranslate"><span class="pre">1</span></code> or <code class="docutils literal notranslate"><span class="pre">0</span></code>!)</p></li>
<li><p>Use spaces around operators and after commas:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">+</span> <span class="n">other</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<section id="testing-running-blocks-of-code">
<h3>Testing/Running blocks of code<a class="headerlink" href="#testing-running-blocks-of-code" title="Link to this heading">#</a></h3>
<p>Now that you have seen how all-important indentation of python code is. You can test a block of code, indentation and all, by pasting it directly into the ipython terminal. Let’s try it.</p>
<p>Type the following code in a temporary text file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span> <span class="c1">#4 spaces or 2 tabs in this case</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, assign some integer value to a variable <code class="docutils literal notranslate"><span class="pre">x</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">11</span>
</pre></div>
</div>
</div>
</div>
<p>Then, paste this code at the ipython prompt (<code class="docutils literal notranslate"><span class="pre">ctrl+shift+v</span></code>), and hit enter:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span> <span class="c1">#4 spaces or 2 tabs in this case</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
5
6
7
8
9
10
</pre></div>
</div>
</div>
</div>
<p>Of course, this code is simple, so directly pasting works. For more complex code, you may need to use the ipython <code class="docutils literal notranslate"><span class="pre">%cpaste</span></code> magic function.</p>
</section>
</section>
<section id="loops">
<span id="python-loops"></span><h2>Loops<a class="headerlink" href="#loops" title="Link to this heading">#</a></h2>
<p>What exactly is going on in the piece of code above? What is <code class="docutils literal notranslate"><span class="pre">i</span></code>? What does <code class="docutils literal notranslate"><span class="pre">range(x)</span></code> do?</p>
<p>Basically, this piece of code runs a <a class="reference external" href="https://en.wikipedia.org/wiki/Control_flow#Loops">loop</a> (“loops”) over the full range of <code class="docutils literal notranslate"><span class="pre">x</span></code> numbers, printing each one of them.</p>
<p>First, let’s understand the <code class="docutils literal notranslate"><span class="pre">range()</span></code> function. This function generates, as the name suggests, a range of integers depending on the input to it. So, for example, range(10) generates 10 numbers, starting at 0:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
1
2
3
4
5
6
7
8
9
</pre></div>
</div>
</div>
</div>
<p>The start point is 0 because this is Python (it will start at 1 in R, for example). Note that if you try to run<code class="docutils literal notranslate"><span class="pre">range()</span></code> by itself, it will not actually produce a range of numbers. For example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>range(0, 10)
</pre></div>
</div>
</div>
</div>
<p>So all you get is the start and end point of the range, stored as <code class="docutils literal notranslate"><span class="pre">a</span></code>, whereas you might have expected to see the actual range of numbers.</p>
<p>But as you saw above, this is a range of integers starting at 0, so 10 will actually not be in the set of numbers that are generated.</p>
<p>The reason why <code class="docutils literal notranslate"><span class="pre">range(10)</span></code> does not give you the actual range of numbers when you call it, is that it is a “generator”. It doesn’t actually produce all numbers at once, but generates them only when needed (in the loop). This is (memory-)efficient, as it does not require a bunch of numbers to be stored in the RAM memory.</p>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">range()</span></code> to generate numbers (and loop over) from a specific range of integers. For example, to generate a range from 1 to 5, do:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
2
3
4
5
</pre></div>
</div>
</div>
</div>
<p>Yes, it is slightly counter-intuitive that you have to use <code class="docutils literal notranslate"><span class="pre">range(1,</span> <span class="pre">6)</span></code> to generate numbers from 1 to 5, but that’s inevitable (and something to get used to) because of the fact that Python’s indexing starts at 0!</p>
<p>You can also generate a set of indices that skips values using <code class="docutils literal notranslate"><span class="pre">range()</span></code> like so:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span> <span class="c1"># skip odd numbers</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
4
6
8
</pre></div>
</div>
</div>
</div>
<p>Play around with range a bit, and also check out its documentation. This is a very important function that you will use again and again!</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">range()</span></code> function in  Python 2 vs Python 3 are entirely different. The Python 3 range() function is actually what is called <code class="docutils literal notranslate"><span class="pre">xrange</span></code> in Python 2. There are in fact both <code class="docutils literal notranslate"><span class="pre">range</span></code> and <code class="docutils literal notranslate"><span class="pre">xrange</span></code> functions in Python 2. <code class="docutils literal notranslate"><span class="pre">xrange</span></code>, renamed as <code class="docutils literal notranslate"><span class="pre">range</span></code>, is now the default in Python 3 because it is more memory efficient.</p>
</div>
<p>OK, on to the variable <code class="docutils literal notranslate"><span class="pre">i</span></code> in our loop. This is a temporary placeholder for the value of <code class="docutils literal notranslate"><span class="pre">x</span></code> at each iteration of the loop (AKA the “iterator” variable). So, in the first iteration of the loop, i = 0, which is also the “index” value of the loop at that point. We have used <code class="docutils literal notranslate"><span class="pre">i</span></code>, but you can use any valid variable name, such as <code class="docutils literal notranslate"><span class="pre">j</span></code>, <code class="docutils literal notranslate"><span class="pre">k</span></code>, or even <code class="docutils literal notranslate"><span class="pre">num</span></code> (try it).</p>
<section id="iterator-vs-iterable">
<h3>Iterator vs Iterable<a class="headerlink" href="#iterator-vs-iterable" title="Link to this heading">#</a></h3>
<p>Loops in Python work by generating and then “iterating” over an “iterator”.</p>
<p>In Python an “iterable” is an object that be can iterated over (e.g., a list or a tuple). In contrast, an “iterator”, also an object, can iterate over an iterable (go element by element through it). An object is called iterable if we can obtain an iterator from it. Built-in Python data structures - lists, tuples, dictionaries - as well as data types like strings are iterables.</p>
<p>Thus, a list is iterable but not an iterator.</p>
<p>Technically, in Python an iterator is generated by passing an iterable to an <code class="docutils literal notranslate"><span class="pre">iter()</span></code> method. Iterators themselves have a <code class="docutils literal notranslate"><span class="pre">__next__()</span></code> method, which returns the next item of the object.</p>
<p>To see how what an iterator vs an iterable is, try out the following:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_iterable</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>

<span class="nb">type</span><span class="p">(</span><span class="n">my_iterable</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>list
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_iterator</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">my_iterable</span><span class="p">)</span>

<span class="nb">type</span><span class="p">(</span><span class="n">my_iterator</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>list_iterator
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">next</span><span class="p">(</span><span class="n">my_iterator</span><span class="p">)</span> <span class="c1"># same as my_iterator.__next__()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">next</span><span class="p">(</span><span class="n">my_iterator</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">next</span><span class="p">(</span><span class="n">my_iterator</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">next</span><span class="p">(</span><span class="n">my_iterator</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">StopIteration</span><span class="g g-Whitespace">                             </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">122</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="nb">next</span><span class="p">(</span><span class="n">my_iterator</span><span class="p">)</span>

<span class="ne">StopIteration</span>: 
</pre></div>
</div>
</div>
</div>
<p>Once, when you iterated all items in an iterator, and no more data are available, and a <code class="docutils literal notranslate"><span class="pre">StopIteration</span></code> exception is raised.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Generator vs Iterator</strong>: By now you might be wondering what the difference between a <em>generator</em> and an <em>iterator</em> is. The simple answer is “Every iterator is not a generator, but every generator is an iterator”. Its of course not as simple as that because if you try to use the output of <code class="docutils literal notranslate"><span class="pre">range()</span></code> like a normal iterator (e.g., by applying the <code class="docutils literal notranslate"><span class="pre">next()</span></code> method to it), it will not work.  The proper answer is a bit technical, and we do not need to go into it; what matters is that <code class="docutils literal notranslate"><span class="pre">range()</span></code> works for you when looping! You can read more about the difference between generators and iterators <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#iterator-types">here</a> and <a class="reference external" href="https://www.geeksforgeeks.org/difference-between-iterator-vs-generator/">here</a>.</p>
</div>
</section>
<section id="some-loops-examples">
<h3>Some loops examples<a class="headerlink" href="#some-loops-examples" title="Link to this heading">#</a></h3>
<p>Write the following, and save them to <code class="docutils literal notranslate"><span class="pre">loops.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># FOR loops</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;geronimo!&quot;</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">my_list</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

<span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">summands</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">1111</span><span class="p">]</span>
<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">summands</span><span class="p">:</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">total</span> <span class="o">+</span> <span class="n">s</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">total</span><span class="p">)</span>

<span class="c1"># WHILE loop</span>
<span class="n">z</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">z</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">z</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Link to this heading">#</a></h2>
<p>In python, you delineate a function (recall what a function means from the <a class="reference internal" href="#Some-terminology"><span class="xref myst">table above</span></a>) by using indentation. For example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">*=</span> <span class="n">x</span> <span class="c1"># same as x = x*x</span>
    <span class="nb">print</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
</div>
</div>
<p>Now you will have a function object called <code class="docutils literal notranslate"><span class="pre">foo</span></code> in your workspace. You can check this using the <code class="docutils literal notranslate"><span class="pre">%whos</span></code> magic command, which lists and describes all the objects in your workspace:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">whos</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Variable      Type             Data/Info
----------------------------------------
FoodWeb       list             n=4
GenomeSize    dict             n=4
MyList        list             n=4
MyTuple       tuple            n=3
a             range            range(0, 10)
b             list             n=2
c             set              {3, 4, 5, 6}
copy          module           &lt;module &#39;copy&#39; from &#39;/usr&lt;...&gt;/lib/python3.10/copy.py&#39;&gt;
foo           function         &lt;function foo at 0x799cf02c3910&gt;
i             int              8
my_dict       dict             n=2
my_iterable   list             n=3
my_iterator   list_iterator    &lt;list_iterator object at 0x799cf0129000&gt;
my_set        set              {1, 2, 3, 4, 5}
my_tuple      tuple            n=5
s             str               this is a string 
t             str              this is a string
this          module           &lt;module &#39;this&#39; from &#39;/usr&lt;...&gt;/lib/python3.10/this.py&#39;&gt;
x             int              11
y             int              2
z             str              88
</pre></div>
</div>
</div>
</div>
<p>So, <code class="docutils literal notranslate"><span class="pre">foo</span></code> is a function stored in memory (at address given by the value <code class="docutils literal notranslate"><span class="pre">0x...</span></code> in the <code class="docutils literal notranslate"><span class="pre">Data/Info</span></code> column), and ready to serve you!</p>
<p>Now “call it”:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">foo</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
</pre></div>
</div>
</div>
</div>
<p>Note that the first,  <code class="docutils literal notranslate"><span class="pre">print</span></code> command only outputs the value of <code class="docutils literal notranslate"><span class="pre">x</span></code> to the terminal, whereas, the second <code class="docutils literal notranslate"><span class="pre">return</span></code> command actually outputs it so that you can “capture” and store it.</p>
<p>To see this distinction, let’s try the following.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">*=</span> <span class="n">x</span> <span class="c1"># same as x = x*x</span>
    <span class="nb">print</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="n">y</span> <span class="o">=</span> <span class="n">foo</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">y</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>int
</pre></div>
</div>
</div>
</div>
<p>Thus, the output of <code class="docutils literal notranslate"><span class="pre">foo</span></code> was stored as a new variable <code class="docutils literal notranslate"><span class="pre">y</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">*=</span> <span class="n">x</span> <span class="c1"># same as x = x*x</span>
    <span class="nb">print</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="c1"># return x</span>

<span class="n">y</span> <span class="o">=</span> <span class="n">foo</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">y</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>NoneType
</pre></div>
</div>
</div>
</div>
<p>So, if we don’t explicitly <code class="docutils literal notranslate"><span class="pre">return</span></code> the value of <code class="docutils literal notranslate"><span class="pre">x</span></code>, the output of <code class="docutils literal notranslate"><span class="pre">foo</span></code> cannot be stored.</p>
</section>
<section id="running-python-scripts">
<h2>Running Python scripts<a class="headerlink" href="#running-python-scripts" title="Link to this heading">#</a></h2>
<p>Instead of pasting or sending code to the Python command prompt like you did above, let’s learn how to write it into a script and run it.</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Write the following code into a file called <code class="docutils literal notranslate"><span class="pre">MyExampleScript.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">*=</span> <span class="n">x</span> <span class="c1"># same as x = x*x</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">foo</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<section id="using-the-unix-shell">
<h3>Using the UNIX shell<a class="headerlink" href="#using-the-unix-shell" title="Link to this heading">#</a></h3>
<p>Open another bash terminal, and <code class="docutils literal notranslate"><span class="pre">cd</span> </code> to directory where you have saved this script file. Then, run it using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>MyExampleScript.py
</pre></div>
</div>
</section>
<section id="from-the-unix-shell-using-ipython">
<h3>From the UNIX shell, using ipython<a class="headerlink" href="#from-the-unix-shell-using-ipython" title="Link to this heading">#</a></h3>
<p>Alternatively, you can use ipython:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ipython3<span class="w"> </span>MyExampleScript.py
</pre></div>
</div>
<p>With the same result.</p>
</section>
<section id="from-within-the-ipython-shell">
<h3>From within the ipython shell<a class="headerlink" href="#from-within-the-ipython-shell" title="Link to this heading">#</a></h3>
<p>You can also execute python scripts from within the <code class="docutils literal notranslate"><span class="pre">ipython</span></code> shell with</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">run</span> <span class="n">MyExampleScript</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>That is, enter <code class="docutils literal notranslate"><span class="pre">ipython</span></code> from bash (or switch to a terminal where you are already in the ipython shell), and then use the <code class="docutils literal notranslate"><span class="pre">run</span></code> command with the name of the script file.</p>
<p>To run the script from the native Python shell, you would use <code class="docutils literal notranslate"><span class="pre">exec(open(&quot;./filename&quot;).read())</span></code>, but we won’t bother doing that (though you can/should try it out for fun!).</p>
</section>
</section>
<section id="control-flow-tools">
<h2>Control flow tools<a class="headerlink" href="#control-flow-tools" title="Link to this heading">#</a></h2>
<p>OK, let’s get deeper into python code. A computer script or program’s control flow is the order in which the code executes. Upto now, you have written scripts with simple control flows, with the code executing statements from the top to bottom. But very often, you want more flexible flows of commands and statements, for example, where you can switch between alternative commands depending on some condition. This is possible using <em>control flow tools</em>. Let’s learn python’s control flow tools hands-on.</p>
<section id="conditionals">
<span id="python-conditionals"></span><h3>Conditionals<a class="headerlink" href="#conditionals" title="Link to this heading">#</a></h3>
<p>Now that we know how to define functions in Python, let’s look at <em>conditionals</em> that allow you fine-grained control over the function’s operations.</p>
<p>Let’s start with the <code class="docutils literal notranslate"><span class="pre">if</span></code> statement, which allows you to control when to execute a statement. This is the basic syntax:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="o">&lt;</span><span class="n">expr</span><span class="o">&gt;</span><span class="p">:</span>
    <span class="o">&lt;</span><span class="n">statement</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">&lt;expr&gt;</span></code> is the (boolean) condition (True / False) that needs to be met for the <code class="docutils literal notranslate"><span class="pre">&lt;statement&gt;</span></code> to be executed.</p>
<p>Let’s look at a basic example.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">2</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">:</span> <span class="c1"># &quot;Truthy&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;yes&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>yes
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">x</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;yes&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>No output here because x is NOT an integer</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">x</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;yes&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>yes
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">y</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;yes&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>yes
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;yes&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>yes
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="kc">True</span> <span class="c1"># make x boolean</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">x</span><span class="p">:</span> <span class="c1"># now it works</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;yes&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>yes
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;yes&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>yes
</pre></div>
</div>
</div>
</div>
<p>We can now try combining functions and the <code class="docutils literal notranslate"><span class="pre">if</span></code> conditional.</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Run the following functions <em>one by one</em>, by pasting the block in the ipython command line. First, type all them all in a script and save it as <code class="docutils literal notranslate"><span class="pre">cfexercises1.py</span></code>. Then you can send them block by block easily to the command line assuming you have set your code editor to allow selections of code to be sent to terminal directly using a key binding (typically , <code class="docutils literal notranslate"><span class="pre">ctrl+enter</span></code>).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="k">def</span> <span class="nf">foo_1</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">**</span> <span class="mf">0.5</span>

<span class="k">def</span> <span class="nf">foo_2</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">y</span>

<span class="k">def</span> <span class="nf">foo_3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">:</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">z</span><span class="p">:</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">z</span><span class="p">,</span> <span class="n">x</span>
    <span class="k">if</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="n">z</span><span class="p">:</span>
        <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">z</span><span class="p">,</span> <span class="n">y</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">foo_4</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">*</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">result</span>

<span class="k">def</span> <span class="nf">foo_5</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="c1"># a recursive function that calculates the factorial of x</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">foo_5</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
     
<span class="k">def</span> <span class="nf">foo_6</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="c1"># Calculate the factorial of x in a different way; no if statement involved</span>
    <span class="n">facto</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">facto</span> <span class="o">=</span> <span class="n">facto</span> <span class="o">*</span> <span class="n">x</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">facto</span>
</pre></div>
</div>
<p><em>Think about what each of the foo_x function does before running it.</em> Note that <code class="docutils literal notranslate"><span class="pre">foo_5</span></code> is a recursive function, meaning that the function <a class="reference external" href="https://en.wikipedia.org/wiki/Recursion_(computer_science)">calls itself</a>. Note that the factorial of 0 is also 1, i.e., <span class="math notranslate nohighlight">\(0! = 1\)</span>, but <code class="docutils literal notranslate"><span class="pre">foo_5</span></code> and <code class="docutils literal notranslate"><span class="pre">foo_6</span></code> cannot handle this. You may wish to modify the functions to fix this!</p>
</section>
<section id="more-examples-of-loops-and-conditionals-combined">
<h3>More examples of loops and conditionals combined<a class="headerlink" href="#more-examples-of-loops-and-conditionals-combined" title="Link to this heading">#</a></h3>
<p><span class="math notranslate nohighlight">\(\star\)</span> Write the following functions and save them to <code class="docutils literal notranslate"><span class="pre">cfexercises2.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="c1">########################</span>
<span class="k">def</span> <span class="nf">hello_1</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">j</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>

<span class="n">hello_1</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>

<span class="c1">########################</span>
<span class="k">def</span> <span class="nf">hello_2</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">j</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">j</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>

<span class="n">hello_2</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>

<span class="c1">########################</span>
<span class="k">def</span> <span class="nf">hello_3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>

<span class="n">hello_3</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>

<span class="c1">########################</span>
<span class="k">def</span> <span class="nf">hello_4</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">while</span> <span class="n">x</span> <span class="o">!=</span> <span class="mi">15</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">3</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>

<span class="n">hello_4</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1">########################</span>
<span class="k">def</span> <span class="nf">hello_5</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">while</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">31</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">18</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>

<span class="n">hello_5</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>

<span class="c1"># WHILE loop with BREAK</span>
<span class="k">def</span> <span class="nf">hello_6</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">while</span> <span class="n">x</span><span class="p">:</span> <span class="c1"># while x is True</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello! &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
        <span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># increment y by 1 </span>
        <span class="k">if</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
            <span class="k">break</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>

<span class="n">hello_6</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Try to predict how many times “hello” will be printed before testing each of these functions</em>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note how, in the last function above, the <code class="docutils literal notranslate"><span class="pre">break</span></code> directive exits <em>the loop</em> when the condition is met. If you did not have this, you would get an infinite loop! (and would need to use <code class="docutils literal notranslate"><span class="pre">Ctrl+c</span></code> to stop it). Note also that <code class="docutils literal notranslate"><span class="pre">break</span></code> only breaks out of the current loop. It does not stop the execution of the rest of the code that may be in that program or script.</p>
</div>
</section>
</section>
<section id="comprehensions">
<span id="python-comprehensions"></span><h2>Comprehensions<a class="headerlink" href="#comprehensions" title="Link to this heading">#</a></h2>
<p>Python offers a way to combine loops and logical tests / conditionals in a single line of code to transform any <em>iterable</em> object (list, set, or dictionary, over which you can iterate) into another object, after performing some operations on the elements in the original object. That is, they are a compact way to create a new list, dictionary or object from an existing one. As you might expect, there are three types of comprehensions, each corresponding to what the target object is (list, set, dictionary).</p>
<p>Let’s look at how list comprehensions work:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
</pre></div>
</div>
</div>
</div>
<p>This is the same as writing the following loop:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
</pre></div>
</div>
</div>
</div>
<p>Here’s another example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;LIST&quot;</span><span class="p">,</span><span class="s2">&quot;COMPREHENSIONS&quot;</span><span class="p">,</span><span class="s2">&quot;ARE&quot;</span><span class="p">,</span><span class="s2">&quot;COOL&quot;</span><span class="p">]]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;list&#39;, &#39;comprehensions&#39;, &#39;are&#39;, &#39;cool&#39;]
</pre></div>
</div>
</div>
</div>
<p>Which is same as the loop:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;LIST&quot;</span><span class="p">,</span><span class="s2">&quot;COMPREHENSIONS&quot;</span><span class="p">,</span><span class="s2">&quot;ARE&quot;</span><span class="p">,</span><span class="s2">&quot;COOL&quot;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)):</span> <span class="c1"># explicit loop</span>
    <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;list&#39;, &#39;comprehensions&#39;, &#39;are&#39;, &#39;cool&#39;]
</pre></div>
</div>
</div>
</div>
<p>Or this loop:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;LIST&quot;</span><span class="p">,</span><span class="s2">&quot;COMPREHENSIONS&quot;</span><span class="p">,</span><span class="s2">&quot;ARE&quot;</span><span class="p">,</span><span class="s2">&quot;COOL&quot;</span><span class="p">]</span>
<span class="n">x_new</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span> <span class="c1"># implicit loop</span>
    <span class="n">x_new</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x_new</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;list&#39;, &#39;comprehensions&#39;, &#39;are&#39;, &#39;cool&#39;]
</pre></div>
</div>
</div>
</div>
<p>How about a nested loop? Let’s try an example where we “flatten” a 2D (1 row x 1 column) matrix into 1D (all numbers across rows in a single sequence) :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">matrix</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],[</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]]</span>
<span class="n">flattened_matrix</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">matrix</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
        <span class="n">flattened_matrix</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">flattened_matrix</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 2, 3, 4, 5, 6, 7, 8, 9]
</pre></div>
</div>
</div>
</div>
<p>A list comprehension to do the same:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">matrix</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],[</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]]</span>
<span class="n">flattened_matrix</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">matrix</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">row</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">flattened_matrix</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 2, 3, 4, 5, 6, 7, 8, 9]
</pre></div>
</div>
</div>
</div>
<p>This list comprehension uses a nested loop, so its syntax is a bit harder to understand than the list comprehension using a single loop. So let’s dissect it:</p>
<ul class="simple">
<li><p>We need to loop over each row in the given 2D list and append it to the previous row in the new <code class="docutils literal notranslate"><span class="pre">flattened_matrix</span></code> object (list). To understand how the list comprehension achieves this, let’s divide it into its three parts:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">flatten_matrix</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span>
                  <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">matrix</span>
                  <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">row</span><span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>The first line <code class="docutils literal notranslate"><span class="pre">n</span></code> states what we want to append in the new flattened list.</p></li>
<li><p>The second line is the outer loop (same as <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">row</span> <span class="pre">in</span> <span class="pre">matrix:</span></code> in the nested loop above); it returns the rows (sub-lists) inside the matrix one by one (<code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code>, <code class="docutils literal notranslate"><span class="pre">[4,</span> <span class="pre">5,</span> <span class="pre">6]</span></code>, <code class="docutils literal notranslate"><span class="pre">[7,</span> <span class="pre">8,</span> <span class="pre">9]</span></code></p></li>
<li><p>The third line is the inner loop (same as <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">n</span> <span class="pre">in</span> <span class="pre">row:</span></code> in the nested loop above); it returns all the values inside the row (the sub-list) and appends them to the growing flattened list <code class="docutils literal notranslate"><span class="pre">flattened_matrix</span></code>. That is, if row = [1, 2, 3], <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">n</span> <span class="pre">in</span> <span class="pre">row</span></code> returns <code class="docutils literal notranslate"><span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">2</span></code>, <code class="docutils literal notranslate"><span class="pre">3</span></code> one by one, and appends it to <code class="docutils literal notranslate"><span class="pre">flattened_matrix</span></code> in their original sequence.</p></li>
</ul>
<p>Set and Dictionary comprehensions work in an analogous way. For example, create a set of all the first letters in a sequence of words using a loop:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;These&quot;</span><span class="p">,</span> <span class="s2">&quot;are&quot;</span><span class="p">,</span> <span class="s2">&quot;some&quot;</span><span class="p">,</span> <span class="s2">&quot;words&quot;</span><span class="p">]</span>

<span class="n">first_letters</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
    <span class="n">first_letters</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">w</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="n">first_letters</span><span class="p">)</span>

<span class="nb">type</span><span class="p">(</span><span class="n">first_letters</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;a&#39;, &#39;w&#39;, &#39;T&#39;, &#39;s&#39;}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>set
</pre></div>
</div>
</div>
</div>
<p>Note that sets are unordered (the first letters don’t appear in the order you might expect).</p>
<p>Now, the same as a set comprehension:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;These&quot;</span><span class="p">,</span> <span class="s2">&quot;are&quot;</span><span class="p">,</span> <span class="s2">&quot;some&quot;</span><span class="p">,</span> <span class="s2">&quot;words&quot;</span><span class="p">]</span>

<span class="n">first_letters</span> <span class="o">=</span> <span class="p">{</span><span class="n">w</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span><span class="p">}</span> <span class="c1"># note the curly brackets</span>

<span class="nb">print</span><span class="p">(</span><span class="n">first_letters</span><span class="p">)</span>

<span class="nb">type</span><span class="p">(</span><span class="n">first_letters</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;a&#39;, &#39;w&#39;, &#39;T&#39;, &#39;s&#39;}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>set
</pre></div>
</div>
</div>
</div>
<p>Now, type the following in a script file called <code class="docutils literal notranslate"><span class="pre">oaks.py</span></code> and test it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## Finds just those taxa that are oak trees from a list of species</span>

<span class="n">taxa</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;Quercus robur&#39;</span><span class="p">,</span>
         <span class="s1">&#39;Fraxinus excelsior&#39;</span><span class="p">,</span>
         <span class="s1">&#39;Pinus sylvestris&#39;</span><span class="p">,</span>
         <span class="s1">&#39;Quercus cerris&#39;</span><span class="p">,</span>
         <span class="s1">&#39;Quercus petraea&#39;</span><span class="p">,</span>
       <span class="p">]</span>

<span class="k">def</span> <span class="nf">is_an_oak</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;quercus &#39;</span><span class="p">)</span>

<span class="c1">##Using for loops</span>
<span class="n">oaks_loops</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="k">for</span> <span class="n">species</span> <span class="ow">in</span> <span class="n">taxa</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">is_an_oak</span><span class="p">(</span><span class="n">species</span><span class="p">):</span>
        <span class="n">oaks_loops</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">species</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">oaks_loops</span><span class="p">)</span>

<span class="c1">##Using list comprehensions   </span>
<span class="n">oaks_lc</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">species</span> <span class="k">for</span> <span class="n">species</span> <span class="ow">in</span> <span class="n">taxa</span> <span class="k">if</span> <span class="n">is_an_oak</span><span class="p">(</span><span class="n">species</span><span class="p">)])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">oaks_lc</span><span class="p">)</span>

<span class="c1">##Get names in UPPER CASE using for loops</span>
<span class="n">oaks_loops</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="k">for</span> <span class="n">species</span> <span class="ow">in</span> <span class="n">taxa</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">is_an_oak</span><span class="p">(</span><span class="n">species</span><span class="p">):</span>
        <span class="n">oaks_loops</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">species</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">oaks_loops</span><span class="p">)</span>

<span class="c1">##Get names in UPPER CASE using list comprehensions</span>
<span class="n">oaks_lc</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">species</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">species</span> <span class="ow">in</span> <span class="n">taxa</span> <span class="k">if</span> <span class="n">is_an_oak</span><span class="p">(</span><span class="n">species</span><span class="p">)])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">oaks_lc</span><span class="p">)</span>
</pre></div>
</div>
<p>Carefully compare the looping vs list comprehension way for the two  tasks (find oak tree species names and get names in upper case) to make sure you understand what’s going on.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Don’t go mad with list comprehensions — code readability is more important than squeezing lots into a single line! They can also make your code run more slowly or use more memory in some cases (we will learn about this more in the <a class="reference internal" href="#"><span class="std std-doc">second Python Chapter</span></a>).</p>
</div>
</section>
<section id="variable-scope">
<h2>Variable scope<a class="headerlink" href="#variable-scope" title="Link to this heading">#</a></h2>
<p>One important thing to note about functions, in any programming language, is that variables created inside functions are invisible outside of it, nor do they persist once the function has run unless they are explicitly returned. These are called “local” variables, and are only accessible inside their function.</p>
<p>Here is an example. First, type and run this block of code:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>9
10
</pre></div>
</div>
</div>
</div>
<p>Let’s break this down to understand the outputs and what’s going on in terms of variable scope:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">i</span><span class="p">,</span> <span class="n">x</span> <span class="c1"># or print(i, x)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(1, 0)
</pre></div>
</div>
</div>
</div>
<p>So we created two new variables, which are now in memory (your current “workspace”).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">i</span><span class="p">,</span> <span class="n">x</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(9, 10)
</pre></div>
</div>
</div>
</div>
<p>So <code class="docutils literal notranslate"><span class="pre">i</span></code>, which was originally stored with a value of <code class="docutils literal notranslate"><span class="pre">1</span></code> in your workspace has now been updated to <code class="docutils literal notranslate"><span class="pre">9</span></code> (because the loop ran over all the numbers from 0 to 9), and <code class="docutils literal notranslate"><span class="pre">x</span></code> is has been updated to 10 due to the successive summation that the loop performs.</p>
<p>That is, the operations on <code class="docutils literal notranslate"><span class="pre">i</span></code> and <code class="docutils literal notranslate"><span class="pre">x</span></code> inside the loop were in fact on the variables in the main workspace (they were changed everywhere).</p>
<p>Now, let’s encapsulate the above code in a function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">def</span> <span class="nf">a_function</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">x</span>
<span class="n">a_function</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
0
</pre></div>
</div>
</div>
</div>
<p>So <code class="docutils literal notranslate"><span class="pre">i</span></code> and <code class="docutils literal notranslate"><span class="pre">x</span></code> did not get updated in your workspace despite the fact that they were within the function! This is because the <em>scope</em> of the variables inside a function is retricted to within that function. That is, within the function,<code class="docutils literal notranslate"><span class="pre">i</span></code> and <code class="docutils literal notranslate"><span class="pre">x</span></code> were created and modified in a <em>separate</em> location in your compiter’s memory, leaving the original variables with the same names unchanged.</p>
<p>Again, let’s break this code down to understand whats’s going on.</p>
<p>First run this in your ipython commandline:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">def</span> <span class="nf">a_function</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
</div>
</div>
<p>Now try <code class="docutils literal notranslate"><span class="pre">whos</span></code> in your ipython3 commandline, which will show you that <code class="docutils literal notranslate"><span class="pre">a_function</span></code> has indeed been saved as a python function object (and so is raring to go!).</p>
<p>Now,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a_function</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>10
</pre></div>
</div>
</div>
</div>
<p>This returns 10 because you asked the function to, resturn the final value of <code class="docutils literal notranslate"><span class="pre">x</span></code> with <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">x</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
</div>
</div>
<p>But <code class="docutils literal notranslate"><span class="pre">x</span></code> in your main workspace is still <code class="docutils literal notranslate"><span class="pre">0</span></code> because even if you asked the function to <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">x</span></code>, that made it pront <code class="docutils literal notranslate"><span class="pre">x</span></code> that was modified within the function to the screen, but this new, modified <code class="docutils literal notranslate"><span class="pre">x</span></code> is not actually saved to oyur main workspace (i.e., the original <code class="docutils literal notranslate"><span class="pre">x</span></code> in your main workspace remains untouched).</p>
<p>To replace the old <code class="docutils literal notranslate"><span class="pre">x</span></code> with the new one resulting from running our function, you have to explicitly “catch” it by reassigning the variable name <code class="docutils literal notranslate"><span class="pre">x</span></code> to the output of the function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">a_function</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>10
</pre></div>
</div>
</div>
</div>
<p>Thus, the things to note from this second example:</p>
<ul class="simple">
<li><p>Both <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">i</span></code> are variables localised to the function (their scope is limited to within it)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">x</span></code> was only updated in the main workspace, outside the function, when it was explicitly <code class="docutils literal notranslate"><span class="pre">return</span></code>ed from the function <em>and</em> you explicitly reassigned the variable name <code class="docutils literal notranslate"><span class="pre">x</span></code> to the function’s output.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">i</span></code> remained unchanged outside the function because it was not <code class="docutils literal notranslate"><span class="pre">return</span></code>ed.</p></li>
</ul>
<p><em>Try returning both <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">i</span></code> (with a <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">x,y</span></code> instead of <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">x</span></code> in the function).</em></p>
<section id="global-variables">
<h3>Global variables<a class="headerlink" href="#global-variables" title="Link to this heading">#</a></h3>
<p>In contrast, you can designate certain variables to be “global” so that they visible both inside and outside of functions in Python, like any other programming language.</p>
<p>To understand this, let’s look at an example.</p>
<p>First try this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">_a_global</span> <span class="o">=</span> <span class="mi">10</span> <span class="c1"># a global variable</span>

<span class="k">if</span> <span class="n">_a_global</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">:</span>
    <span class="n">_b_global</span> <span class="o">=</span> <span class="n">_a_global</span> <span class="o">+</span> <span class="mi">5</span> <span class="c1"># also a global variable</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before calling a_function, outside the function, the value of _a_global is&quot;</span><span class="p">,</span> <span class="n">_a_global</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before calling a_function, outside the function, the value of _b_global is&quot;</span><span class="p">,</span> <span class="n">_b_global</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">a_function</span><span class="p">():</span>
    <span class="n">_a_global</span> <span class="o">=</span> <span class="mi">4</span> <span class="c1"># a local variable</span>
    
    <span class="k">if</span> <span class="n">_a_global</span> <span class="o">&gt;=</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">_b_global</span> <span class="o">=</span> <span class="n">_a_global</span> <span class="o">+</span> <span class="mi">5</span> <span class="c1"># also a local variable</span>
    
    <span class="n">_a_local</span> <span class="o">=</span> <span class="mi">3</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Inside the function, the value of _a_global is&quot;</span><span class="p">,</span> <span class="n">_a_global</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Inside the function, the value of _b_global is&quot;</span><span class="p">,</span> <span class="n">_b_global</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Inside the function, the value of _a_local is&quot;</span><span class="p">,</span> <span class="n">_a_local</span><span class="p">)</span>
    
<span class="n">a_function</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After calling a_function, outside the function, the value of _a_global is (still)&quot;</span><span class="p">,</span> <span class="n">_a_global</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After calling a_function, outside the function, the value of _b_global is (still)&quot;</span><span class="p">,</span> <span class="n">_b_global</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After calling a_function, outside the function, the value of _a_local is &quot;</span><span class="p">,</span> <span class="n">_a_local</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Before calling a_function, outside the function, the value of _a_global is 10
Before calling a_function, outside the function, the value of _b_global is 15
Inside the function, the value of _a_global is 4
Inside the function, the value of _b_global is 9
Inside the function, the value of _a_local is 3
After calling a_function, outside the function, the value of _a_global is (still) 10
After calling a_function, outside the function, the value of _b_global is (still) 15
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">163</span><span class="p">],</span> <span class="n">line</span> <span class="mi">25</span>
<span class="g g-Whitespace">     </span><span class="mi">23</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After calling a_function, outside the function, the value of _a_global is (still)&quot;</span><span class="p">,</span> <span class="n">_a_global</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">24</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After calling a_function, outside the function, the value of _b_global is (still)&quot;</span><span class="p">,</span> <span class="n">_b_global</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">25</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After calling a_function, outside the function, the value of _a_local is &quot;</span><span class="p">,</span> <span class="n">_a_local</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;_a_local&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>The things to note from this example:</p>
<ul class="simple">
<li><p>Although <code class="docutils literal notranslate"><span class="pre">_a_global</span></code> was overwritten inside the function, what happened inside the function remained inside the function (<em>What happens in Vegas…</em>)</p></li>
<li><p>The variable <code class="docutils literal notranslate"><span class="pre">_a_local</span></code> does not persist outside the function (therefore you get the <code class="docutils literal notranslate"><span class="pre">NameError</span></code> at the end)</p></li>
<li><p>Also note that <code class="docutils literal notranslate"><span class="pre">_a_global</span></code> is just a naming convention – nothing special about this variable as such.</p></li>
</ul>
<p>Of course, if you assign a variable outside a function, it will be available inside it even if you don’t assign it inside that function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">_a_global</span> <span class="o">=</span> <span class="mi">10</span>

<span class="k">def</span> <span class="nf">a_function</span><span class="p">():</span>
    <span class="n">_a_local</span> <span class="o">=</span> <span class="mi">4</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Inside the function, the value _a_local is&quot;</span><span class="p">,</span> <span class="n">_a_local</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Inside the function, the value of _a_global is&quot;</span><span class="p">,</span> <span class="n">_a_global</span><span class="p">)</span>
    
<span class="n">a_function</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Outside the function, the value of _a_global is&quot;</span><span class="p">,</span> <span class="n">_a_global</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Inside the function, the value _a_local is 4
Inside the function, the value of _a_global is 10
Outside the function, the value of _a_global is 10
</pre></div>
</div>
</div>
</div>
<p>So <code class="docutils literal notranslate"><span class="pre">_a_global</span></code> was available to the function, and you were able to use it in the <code class="docutils literal notranslate"><span class="pre">print</span></code> command.</p>
<p>If you really want to modify or assign a global variable from inside a function (that is, and make it available outside the function), you can use the <code class="docutils literal notranslate"><span class="pre">global</span></code> keyword:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">_a_global</span> <span class="o">=</span> <span class="mi">10</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before calling a_function, outside the function, the value of _a_global is&quot;</span><span class="p">,</span> <span class="n">_a_global</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">a_function</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">_a_global</span>
    <span class="n">_a_global</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">_a_local</span> <span class="o">=</span> <span class="mi">4</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Inside the function, the value of _a_global is&quot;</span><span class="p">,</span> <span class="n">_a_global</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Inside the function, the value _a_local is&quot;</span><span class="p">,</span> <span class="n">_a_local</span><span class="p">)</span>
    
<span class="n">a_function</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After calling a_function, outside the function, the value of _a_global now is&quot;</span><span class="p">,</span> <span class="n">_a_global</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Before calling a_function, outside the function, the value of _a_global is 10
Inside the function, the value of _a_global is 5
Inside the function, the value _a_local is 4
After calling a_function, outside the function, the value of _a_global now is 5
</pre></div>
</div>
</div>
</div>
<p>So, using the <code class="docutils literal notranslate"><span class="pre">global</span></code> specification converted <code class="docutils literal notranslate"><span class="pre">_a_global</span></code> to a truly global variable that became available outside that function (overwriting the original <code class="docutils literal notranslate"><span class="pre">_a_global</span></code>).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">global</span></code> keyword also works from inside nested functions, but it can be slightly confusing:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">a_function</span><span class="p">():</span>
    <span class="n">_a_global</span> <span class="o">=</span> <span class="mi">10</span>

    <span class="k">def</span> <span class="nf">_a_function2</span><span class="p">():</span>
        <span class="k">global</span> <span class="n">_a_global</span>
        <span class="n">_a_global</span> <span class="o">=</span> <span class="mi">20</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before calling a_function2, value of _a_global is&quot;</span><span class="p">,</span> <span class="n">_a_global</span><span class="p">)</span>

    <span class="n">_a_function2</span><span class="p">()</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After calling a_function2, value of _a_global is&quot;</span><span class="p">,</span> <span class="n">_a_global</span><span class="p">)</span>
    
<span class="n">a_function</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The value of a_global in main workspace / namespace now is&quot;</span><span class="p">,</span> <span class="n">_a_global</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Before calling a_function2, value of _a_global is 10
After calling a_function2, value of _a_global is 10
The value of a_global in main workspace / namespace now is 20
</pre></div>
</div>
</div>
</div>
<p>That is, using the <code class="docutils literal notranslate"><span class="pre">global</span></code> keyword inside the inner function <code class="docutils literal notranslate"><span class="pre">_a_function2</span></code> resulted in changing the value of <code class="docutils literal notranslate"><span class="pre">_a_global</span></code> in the main workspace / namespace to 20, but within the scope of <code class="docutils literal notranslate"><span class="pre">_a_function</span></code>, its value remained 10!</p>
<p>Compare the above with this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">_a_global</span> <span class="o">=</span> <span class="mi">10</span>

<span class="k">def</span> <span class="nf">a_function</span><span class="p">():</span>

    <span class="k">def</span> <span class="nf">_a_function2</span><span class="p">():</span>
        <span class="k">global</span> <span class="n">_a_global</span>
        <span class="n">_a_global</span> <span class="o">=</span> <span class="mi">20</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before calling a_function2, value of _a_global is&quot;</span><span class="p">,</span> <span class="n">_a_global</span><span class="p">)</span>

    <span class="n">_a_function2</span><span class="p">()</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After calling a_function2, value of _a_global is&quot;</span><span class="p">,</span> <span class="n">_a_global</span><span class="p">)</span>

<span class="n">a_function</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The value of a_global in main workspace / namespace is&quot;</span><span class="p">,</span> <span class="n">_a_global</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Before calling a_function2, value of _a_global is 10
After calling a_function2, value of _a_global is 20
The value of a_global in main workspace / namespace is 20
</pre></div>
</div>
</div>
</div>
<p>Now, because <code class="docutils literal notranslate"><span class="pre">_a_global</span></code> was defined in advance (outside the first function), when <code class="docutils literal notranslate"><span class="pre">a_function</span></code> was run,</p>
<ol class="arabic simple">
<li><p>This value was “inherited” within <code class="docutils literal notranslate"><span class="pre">a_function</span></code> from the main workspace / namespace,</p></li>
<li><p>It was then given a <strong><code class="docutils literal notranslate"><span class="pre">global</span></code></strong> designation in the inner function <code class="docutils literal notranslate"><span class="pre">_a_function2</span></code>,</p></li>
<li><p>And then, in the inner function <code class="docutils literal notranslate"><span class="pre">_a_function2</span></code>, when it was changed to a different value, it was modified everywhere (both within the <code class="docutils literal notranslate"><span class="pre">a_function</span></code>’s scope/namespace and main workspace / namespace) .</p></li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In general, avoid assigning globals because you run the risk of “exposing” unwanted variables to all functions within your workspace / namespace. Furthermore, avoid assigning globals within functions or sub-functions, as we did in the last two examples above!</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>But in some cases you may find it useful to assign one or more global variables that are shared across multiple modules/functions. You can do this by assigning those variables as global at the start of the script/program, but a better, safer option is to create a separate module (say, called <code class="docutils literal notranslate"><span class="pre">config.py</span></code>) to hold the global variables and then <code class="docutils literal notranslate"><span class="pre">import</span></code> it where needed.</p>
</div>
<p><span class="math notranslate nohighlight">\(\star\)</span> Collect all blocks of code above illustrating variable scope into one script called <code class="docutils literal notranslate"><span class="pre">scope.py</span></code> and test it (run and check for errors).</p>
</section>
<section id="importance-of-the-return-directive">
<h3>Importance of the <code class="docutils literal notranslate"><span class="pre">return</span></code> directive<a class="headerlink" href="#importance-of-the-return-directive" title="Link to this heading">#</a></h3>
<p>In the context of scope of variables, it is also important to keep in mind that in Python, arguments are passed to a function <a class="reference external" href="https://docs.python.org/3/faq/programming.html#how-do-i-write-a-function-with-output-parameters-call-by-reference">by assignment</a>. This is a bit of a technical detail that we don’t need to go into here, but basically, in practice, this means that for mutable objects such as lists, unless you do something special, if a function modifies the (mutable) variable inside it, the original variable outside the function remains unchanged.</p>
<p>Let’s look at an example to understand this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">modify_list_1</span><span class="p">(</span><span class="n">some_list</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;got&#39;</span><span class="p">,</span> <span class="n">some_list</span><span class="p">)</span>
    <span class="n">some_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;set to&#39;</span><span class="p">,</span> <span class="n">some_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;before, my_list =&#39;</span><span class="p">,</span> <span class="n">my_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>before, my_list = [1, 2, 3]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">modify_list_1</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>got [1, 2, 3]
set to [1, 2, 3, 4]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;after, my_list =&#39;</span><span class="p">,</span> <span class="n">my_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>after, my_list = [1, 2, 3]
</pre></div>
</div>
</div>
</div>
<p>The original list remains the same even though it is changed inside the function, as you would expect (what happens in Vegas…)</p>
<p>This is where the <code class="docutils literal notranslate"><span class="pre">return</span></code> directive becomes important. Now modify the function to <code class="docutils literal notranslate"><span class="pre">return</span></code> the value of the input list:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">modify_list_2</span><span class="p">(</span><span class="n">some_list</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;got&#39;</span><span class="p">,</span> <span class="n">some_list</span><span class="p">)</span>
    <span class="n">some_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;set to&#39;</span><span class="p">,</span> <span class="n">some_list</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">some_list</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_list</span> <span class="o">=</span> <span class="n">modify_list_2</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>got [1, 2, 3]
set to [1, 2, 3, 4]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;after, my_list =&#39;</span><span class="p">,</span> <span class="n">my_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>after, my_list = [1, 2, 3, 4]
</pre></div>
</div>
</div>
</div>
<p>So now the original <code class="docutils literal notranslate"><span class="pre">my_list</span></code> is changed because <em>you explicitly replaced it</em>. This reinforces the fact that explicit <code class="docutils literal notranslate"><span class="pre">return</span></code> statements are important.</p>
<p>And if we do want to modify the original list <em>in place</em>, use <code class="docutils literal notranslate"><span class="pre">append</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">modify_list_3</span><span class="p">(</span><span class="n">some_list</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;got&#39;</span><span class="p">,</span> <span class="n">some_list</span><span class="p">)</span>
    <span class="n">some_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="c1"># an actual modification of the list</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;changed to&#39;</span><span class="p">,</span> <span class="n">some_list</span><span class="p">)</span>

<span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;before, my_list =&#39;</span><span class="p">,</span> <span class="n">my_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>before, my_list = [1, 2, 3]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">modify_list_3</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>got [1, 2, 3]
changed to [1, 2, 3, 4]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;after, my_list =&#39;</span><span class="p">,</span> <span class="n">my_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>after, my_list = [1, 2, 3, 4]
</pre></div>
</div>
</div>
</div>
<p>That did it. So <code class="docutils literal notranslate"><span class="pre">append</span></code> will actually change the original list object. However, the fact still remains that you should use a <code class="docutils literal notranslate"><span class="pre">return</span></code> statement at the end of the function to be safe and be able to capture the output (and use it to replace an existing variable if needed).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">return</span></code>ing a <code class="docutils literal notranslate"><span class="pre">None</span></code>:</strong> Even if you do not add a <code class="docutils literal notranslate"><span class="pre">return</span></code> directive at the end of a function, Python does in fact return something: a <code class="docutils literal notranslate"><span class="pre">None</span></code> value, which stands for a NULL value (no value at all;  so that something is a nothing!). You can use an <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">None</span></code> in a Python function if you want to be explicit, or use just <code class="docutils literal notranslate"><span class="pre">return</span></code> to <em>completely</em> end the execution of the code (like <code class="docutils literal notranslate"><span class="pre">exit</span></code> in a shell script). This is different from using the <code class="docutils literal notranslate"><span class="pre">break</span></code> directive, which you were introduced above under control flow tools.</p>
</div>
</section>
</section>
<section id="python-input-output">
<h2>Python Input/Output<a class="headerlink" href="#python-input-output" title="Link to this heading">#</a></h2>
<p>Let’s learn to import and export data in python (and write code to do it) .</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Make a text file called <code class="docutils literal notranslate"><span class="pre">test.txt</span></code> in <code class="docutils literal notranslate"><span class="pre">week2/sandbox/</span></code> with the following content (including the empty lines):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">First</span> <span class="n">Line</span>
<span class="n">Second</span> <span class="n">Line</span>

<span class="n">Third</span> <span class="n">Line</span>

<span class="n">Fourth</span> <span class="n">Line</span>
</pre></div>
</div>
<p>Then, type the following in <code class="docutils literal notranslate"><span class="pre">week2/code/basic_io1.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#############################</span>
<span class="c1"># FILE INPUT</span>
<span class="c1">#############################</span>
<span class="c1"># Open a file for reading</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;../sandbox/test.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="c1"># use &quot;implicit&quot; for loop:</span>
<span class="c1"># if the object is a file, python will cycle over lines</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="c1"># close the file</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># Same example, skip blank lines</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;../sandbox/test.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

</pre></div>
</div>
<p>Run the two code blocks (that end in <code class="docutils literal notranslate"><span class="pre">f.close()</span></code>) separately in ipython (you will learn about running whole scripts below) and examine the outputs (changes in <code class="docutils literal notranslate"><span class="pre">test.txt</span></code>). Then run the whole code (both blocks) at one go in ipython.  Then also run the whole script file al well.</p>
<p>Note the following:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">line</span> <span class="pre">in</span> <span class="pre">f</span></code> is an implicit loop — implicit because stating the range of things in <code class="docutils literal notranslate"><span class="pre">f</span></code> to loop over in this way allows python to handle any kind of objects to loop through.</p>
<ul>
<li><p>For example, if <code class="docutils literal notranslate"><span class="pre">f</span></code> was an array of numbers 1 to 10, it would loop through them</p></li>
<li><p>Another example: if <code class="docutils literal notranslate"><span class="pre">f</span></code> is a file, as in the case of the script above, it will loop through the lines in the file.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">len(line.strip())</span> <span class="pre">&gt;</span> <span class="pre">0</span></code> checks if the line is empty. Try <code class="docutils literal notranslate"><span class="pre">?</span></code> to see what <code class="docutils literal notranslate"><span class="pre">.strip()</span></code> does.</p></li>
<li><p>There are indentations in the code that determine what is and is not in side the <code class="docutils literal notranslate"><span class="pre">for</span></code> and <code class="docutils literal notranslate"><span class="pre">if</span></code> statements. If you get errors or unexpected outputs, it will very likely be because of wrong or missing indentations.</p></li>
</ul>
<p>Next, type the following code in a file called <code class="docutils literal notranslate"><span class="pre">basic_io2.py</span></code> and run it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#############################</span>
<span class="c1"># FILE OUTPUT</span>
<span class="c1">#############################</span>
<span class="c1"># Save the elements of a list to a file</span>
<span class="n">list_to_save</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>

<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;../sandbox/testout.txt&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">list_to_save</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> <span class="c1">## Add a new line at the end</span>

<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>Finally, type the following code in <code class="docutils literal notranslate"><span class="pre">basic_io3.py</span></code> and run it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#############################</span>
<span class="c1"># STORING OBJECTS</span>
<span class="c1">#############################</span>
<span class="c1"># To save an object (even complex) for later use</span>
<span class="n">my_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a key&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;another key&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">}</span>

<span class="kn">import</span> <span class="nn">pickle</span>

<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;../sandbox/testp.p&#39;</span><span class="p">,</span><span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="c1">## note the b: accept binary files</span>
<span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">my_dictionary</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1">## Load the data again</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;../sandbox/testp.p&#39;</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span>
<span class="n">another_dictionary</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">another_dictionary</span><span class="p">)</span>

</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">b</span></code> flag for reading the file above stands for “binary”. Basically, binary files are machine readable, but not human readable. For example, try opening <code class="docutils literal notranslate"><span class="pre">testp.p</span></code> in a text reader (e.g., your code editor)  and reading it - you will see considerable gibberish (compare with <code class="docutils literal notranslate"><span class="pre">testout.txt</span></code>)!</p>
</div>
<section id="safely-opening-files-using-with-open">
<h3>Safely opening files using <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">open()</span></code><a class="headerlink" href="#safely-opening-files-using-with-open" title="Link to this heading">#</a></h3>
<p>Whilst <code class="docutils literal notranslate"><span class="pre">open()</span></code> and <code class="docutils literal notranslate"><span class="pre">close()</span></code> are useful to remember, it can be <em>very</em> problematic if <code class="docutils literal notranslate"><span class="pre">f.close()</span></code> is missed.</p>
<p>Luckily python has your back here. By using the <code class="docutils literal notranslate"><span class="pre">with</span></code> command, you can make sure that no matter what, the file is closed after you have finished working with it.</p>
<p><code class="docutils literal notranslate"><span class="pre">with</span></code> is typically used in the following manner:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;../path/to/file.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">myfile</span><span class="p">:</span>
    <span class="c1"># do things to myfile</span>
    <span class="o">...</span>
    
</pre></div>
</div>
<p>Note that running <code class="docutils literal notranslate"><span class="pre">myfile.close()</span></code> here is not necessary as the file is closed once you drop out of the with block.</p>
<p>Here’s an example of <code class="docutils literal notranslate"><span class="pre">basic_io1.py</span></code> rewritten using the <code class="docutils literal notranslate"><span class="pre">with</span></code> statement.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#############################</span>
<span class="c1"># FILE INPUT</span>
<span class="c1">#############################</span>
<span class="c1"># Open a file for reading</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;../sandbox/test.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="c1"># use &quot;implicit&quot; for loop:</span>
    <span class="c1"># if the object is a file, python will cycle over lines</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="c1"># Once you drop out of the with, the file is automatically closed</span>

<span class="c1"># Same example, skip blank lines</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;../sandbox/test.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The rest of this session will use the <code class="docutils literal notranslate"><span class="pre">with</span></code> method of opening files</p>
</div>
</section>
<section id="handling-csv-s">
<h3>Handling <code class="docutils literal notranslate"><span class="pre">csv</span></code>’s<a class="headerlink" href="#handling-csv-s" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">csv</span></code> package makes it easy to manipulate CSV files. Let’s try it.</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Get <code class="docutils literal notranslate"> <span class="pre">testcsv.csv</span></code> from TheMulQuaBio’s <code class="docutils literal notranslate"><span class="pre">data</span></code> directory. Then type the following script in a script file called <code class="docutils literal notranslate"><span class="pre">basic_csv.py</span></code> and run it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>

<span class="c1"># Read a file containing:</span>
<span class="c1"># &#39;Species&#39;,&#39;Infraorder&#39;,&#39;Family&#39;,&#39;Distribution&#39;,&#39;Body mass male (Kg)&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;../data/testcsv.csv&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>

    <span class="n">csvread</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">csvread</span><span class="p">:</span>
        <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">row</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The species is&quot;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># write a file containing only species name and Body mass</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;../data/testcsv.csv&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;../data/bodymass.csv&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">g</span><span class="p">:</span>

        <span class="n">csvread</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">csvwrite</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">csvread</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
            <span class="n">csvwrite</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]])</span>

</pre></div>
</div>
<p><span class="math notranslate nohighlight">\(\star\)</span> Run this script from bash, bash with ipython, and from within ipython, like you did above for the <code class="docutils literal notranslate"><span class="pre">basic_io*.py</span></code> scripts.</p>
</section>
</section>
<section id="writing-python-programs">
<h2>Writing Python programs<a class="headerlink" href="#writing-python-programs" title="Link to this heading">#</a></h2>
<p>Now let’s start with proper python programs.</p>
<p>The difference between scripts (which you have been writing till now) and programs is that the latter can be “compiled” into a self standing application or utility. This distinction will not mean much to you currently, but eventually will, once you have converted a script to a program below!</p>
<p>We will start with a “boilerplate” (template) program, just as we did in the <a class="reference internal" href="#./02-ShellScripting.ipynb#Your-first-shell-script"><span class="xref myst">shell scripting chapter</span></a>.</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Type the code below and save as <code class="docutils literal notranslate"><span class="pre">boilerplate.py</span></code> in <code class="docutils literal notranslate"><span class="pre">week2/code</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>

<span class="sd">&quot;&quot;&quot;Description of this program or application.</span>
<span class="sd">You can use several lines&quot;&quot;&quot;</span>

<span class="n">__appname__</span> <span class="o">=</span> <span class="s1">&#39;[application name here]&#39;</span>
<span class="n">__author__</span> <span class="o">=</span> <span class="s1">&#39;Your Name (your@email.address)&#39;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s1">&#39;0.0.1&#39;</span>
<span class="n">__license__</span> <span class="o">=</span> <span class="s2">&quot;License for this code/program&quot;</span>

<span class="c1">## imports ##</span>
<span class="kn">import</span> <span class="nn">sys</span> <span class="c1"># module to interface our program with the operating system</span>

<span class="c1">## constants ##</span>


<span class="c1">## functions ##</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">argv</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Main entry point of the program &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;This is a boilerplate&#39;</span><span class="p">)</span> <span class="c1"># NOTE: indented using two tabs or 4 spaces</span>
    <span class="k">return</span> <span class="mi">0</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span> 
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Makes sure the &quot;main&quot; function is called from command line&quot;&quot;&quot;</span>  
    <span class="n">status</span> <span class="o">=</span> <span class="n">main</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
</pre></div>
</div>
<p>Now open another bash terminal, and <code class="docutils literal notranslate"><span class="pre">cd</span> </code> to the code directory and run the code. Then, run the code (NOT in the python or ipython shell, but the bash shell! ):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>boilerplate.py
</pre></div>
</div>
<p>You should get:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>This<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span>boilerplate
</pre></div>
</div>
<p>Alternatively, you can use ipython like you did above:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ipython3<span class="w"> </span>boilerplate.py
</pre></div>
</div>
<p>With the same result.</p>
<p>And again, like before, you can also execute this program file from within the <code class="docutils literal notranslate"><span class="pre">ipython</span></code> shell with <code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">MyScript.py</span></code>. Enter <code class="docutils literal notranslate"><span class="pre">ipython</span></code> from bash (or switch to a terminal where you are already in the ipython shell), and do:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">run</span> boilerplate.py
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>This is a boilerplate
</pre></div>
</div>
</div>
</div>
<section id="components-of-the-python-program">
<h3>Components of the Python program<a class="headerlink" href="#components-of-the-python-program" title="Link to this heading">#</a></h3>
<p>Now let’s examine the elements of your first, boilerplate code:</p>
<section id="the-shebang">
<h4>The shebang<a class="headerlink" href="#the-shebang" title="Link to this heading">#</a></h4>
<p>Just like UNIX shell scripts, the first “shebang” line tells the computer where to look for python. It determines the script’s ability to be executed when compiled as part of a standalone program. It isn’t absolutely necessary, but it is good practice to use it, and it is also also useful because when someone examines the file in an editor, they immediately know what they’re looking at.</p>
<p>However, which shebang line you use is important. Here by using <code class="docutils literal notranslate"><span class="pre">#!/usr/bin/env</span> <span class="pre">python3</span></code> we are specifying the location to the python executable in your machine that the rest of the script needs to be interpreted with. You may use <code class="docutils literal notranslate"><span class="pre">#!/usr/bin/python</span></code> instead, but this might not work on somebody else’s machine if the Python executable isn’t actually located at <code class="docutils literal notranslate"><span class="pre">/usr/bin/</span></code>.</p>
</section>
<section id="the-docstring">
<h4>The Docstring<a class="headerlink" href="#the-docstring" title="Link to this heading">#</a></h4>
<p>Triple quotes start a “docstring” comment, which is meant to describe the operation of the script or a function/module within it. Docstrings are considered part of the running code, while normal comments are
stripped. Hence, you can access your docstrings at run time. It is a good idea to have doctrings at the start of every python script and module as it can provide useful information to the user and you as well, down the line.</p>
<p>You can access the docstring(s) in a script (both for the overall script and the ones in each of its functions), by importing the function (say, <code class="docutils literal notranslate"><span class="pre">my_func</span></code>), and then typing <code class="docutils literal notranslate"><span class="pre">help(my_func)</span></code> or <code class="docutils literal notranslate"><span class="pre">?my_func</span></code> in the python or ipython shell. For example, try <code class="docutils literal notranslate"> <span class="pre">import</span> <span class="pre">boilerplate</span></code> and then <code class="docutils literal notranslate"><span class="pre">help(boilerplate)</span></code> (but you have to be in the python or ipython shell).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">boilerplate</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">boilerplate</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on module boilerplate:

NAME
    boilerplate

DESCRIPTION
    Description of this program or application.
    You can use several lines

FUNCTIONS
    main(argv)
        Main entry point of the program

DATA
    __appname__ = &#39;[application name here]&#39;
    __license__ = &#39;License for this code/program&#39;

VERSION
    0.0.1

AUTHOR
    Your Name (your@email.address)

FILE
    /home/mhasoba/Documents/Teaching/TheMulQuaBio/TMQB/content/code/boilerplate.py
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Docstrings vs. Comments</strong>: In short, Docstrings tell the user how to use some Python code, while and Comments explain why and how certain parts of the code work. Thus Docstrings are are enhanced comments that serve as documentation for Python code, including for any functions/modules and classes in it. Comments explain non-obvious portions of the code.</p>
</div>
</section>
<section id="internal-variables">
<h4>Internal Variables<a class="headerlink" href="#internal-variables" title="Link to this heading">#</a></h4>
<p>“<code class="docutils literal notranslate"><span class="pre">__</span></code>” signal “internal” variables (never name your variables so!). These are special variables names reserved by python for its own purposes. For more on the usage of underscores in python, <a class="reference external" href="https://www.datacamp.com/community/tutorials/role-underscore-python">see this</a>.</p>
</section>
<section id="function-definitions-and-modules">
<h4>Function <code class="docutils literal notranslate"><span class="pre">def</span></code>initions and “modules”<a class="headerlink" href="#function-definitions-and-modules" title="Link to this heading">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">def</span></code> indicates the start of a python function (aka “module”); all subsequent lines must be indented.</p>
<p>It’s important to know that somewhat confusingly, Pythonistas call a file containing function <code class="docutils literal notranslate"><span class="pre">def</span></code>itions) and statements (e.g., assignments of constant variables) a “module”. There is a practical reason (there’s always one!) for this. You might want to use a particular set of python <code class="docutils literal notranslate"><span class="pre">def</span></code>’s (functions) and statements either as a standalone function, or use it or subsets of it from other scripts. So in theory, every function you <code class="docutils literal notranslate"><span class="pre">def</span></code>ine can be a sub-module usable by other scripts.</p>
<p><em>In other words, <code class="docutils literal notranslate"><span class="pre">def</span></code>initions from a module can be imported into other modules and scripts, or into the main program itself.</em></p>
<p>The last few lines, including the <code class="docutils literal notranslate"><span class="pre">main</span></code> function/module are somewhat esoteric but important; more on this below.</p>
</section>
<section id="why-include-name-main-and-all-that-jazz">
<h4>Why include <code class="docutils literal notranslate"><span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">&quot;__main__&quot;</span></code> and all that jazz<a class="headerlink" href="#why-include-name-main-and-all-that-jazz" title="Link to this heading">#</a></h4>
<p>When you run a Python module with or without arguments, the code in the called module will be executed just as if you imported it, but with the <code class="docutils literal notranslate"><span class="pre">__name__</span></code> set to <code class="docutils literal notranslate"><span class="pre">&quot;__main__&quot;</span></code> (analogous to the special <code class="docutils literal notranslate"><span class="pre">$0</span></code> variable in shell scripts).</p>
<p>So adding this code at the end of your module:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">):</span>
</pre></div>
</div>
<p>directs the python interpreter to set the special <code class="docutils literal notranslate"><span class="pre">__name__</span></code> variable to have a value <code class="docutils literal notranslate"><span class="pre">&quot;__main__&quot;</span></code>, so that the file is usable as a script <em>as well as</em> an importable module (important for packaging and re-usability).</p>
<p>How do you import? Simply as (in python or ipython shell):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">boilerplate</span>
</pre></div>
</div>
</div>
</div>
<p>Then type</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">boilerplate</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;module &#39;boilerplate&#39; from &#39;/home/mhasoba/Documents/Teaching/TheMulQuaBio/TMQB/content/code/boilerplate.py&#39;&gt;
</pre></div>
</div>
</div>
</div>
<p>So when you ran your module by itself using <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">boilerplate.py</span></code> (as you did above by opening a separate bash shell), having <code class="docutils literal notranslate"><span class="pre">__name__</span> <span class="pre">=</span> <span class="pre">&quot;__main__&quot;</span></code> made the Python interpreter assign the string <code class="docutils literal notranslate"><span class="pre">&quot;__main__&quot;</span></code> to the <code class="docutils literal notranslate"><span class="pre">__name__</span></code> variable inside the module, so that the your module execution was forced to start with the control flow <em>first</em> passing through the <code class="docutils literal notranslate"><span class="pre">main</span></code> function.</p>
<p>On the other hand, if <em>some other module</em> (not <code class="docutils literal notranslate"><span class="pre">boilerplate</span></code>) is the main program, and you want to import the boilerplate module into it (with <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">boilerplate</span></code>), the interpreter looks at the filename of your module (<code class="docutils literal notranslate"><span class="pre">boilerplate.py</span></code>), strips off the <code class="docutils literal notranslate"><span class="pre">.py</span></code>, and assigns that string (<code class="docutils literal notranslate"><span class="pre">boilerplate</span></code>) to the imported module’s <code class="docutils literal notranslate"><span class="pre">__name__</span></code> variable instead, skipping the command(s) under the <code class="docutils literal notranslate"><span class="pre">if</span></code> statement of <code class="docutils literal notranslate"><span class="pre">boilerplate.py</span></code>.</p>
<p>Let’s write a script to illustrate this.</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Type and save the following in a script file called <code class="docutils literal notranslate"><span class="pre">using_name.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="c1"># Filename: using_name.py</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;This program is being run by itself!&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;I am being imported from another script/program/module!&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This module&#39;s name is: &quot;</span> <span class="o">+</span> <span class="vm">__name__</span><span class="p">)</span>
</pre></div>
</div>
<p>Now run it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">run</span> using_name.py
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>This program is being run by itself!
This module&#39;s name is: __main__
</pre></div>
</div>
</div>
</div>
<p>Now, try:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">using_name</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>I am being imported from another script/program/module!
This module&#39;s name is: using_name
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Also please look up the <a class="reference external" href="https://docs.python.org/3/tutorial/modules.html">official python doc for modules</a>.</p>
</div>
</section>
<section id="what-is-sys-argv">
<h4>What is <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code>?<a class="headerlink" href="#what-is-sys-argv" title="Link to this heading">#</a></h4>
<p>In your boilerplate code, as any other Python code, <code class="docutils literal notranslate"><span class="pre">argv</span></code> is the “argument variable”. Such variables are necessarily very common across programming languages, and play an important role — <code class="docutils literal notranslate"><span class="pre">argv</span></code> is a variable that holds the arguments you pass to your Python script when you run it (like <code class="docutils literal notranslate"><span class="pre">$var</span></code> in shell scripts). <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code> is simply an object created by python using the <code class="docutils literal notranslate"><span class="pre">sys</span></code> module (which you imported at the beginning of the script) that contains the names of the argument variables in the current script.</p>
<p>To understand this in a practical way, write and save a script called <code class="docutils literal notranslate"><span class="pre">sysargv.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This is the name of the script: &quot;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of arguments: &quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The arguments are: &quot;</span> <span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">))</span>
</pre></div>
</div>
<p>Now run <code class="docutils literal notranslate"><span class="pre">sysargv.py</span></code> with different numbers of arguments:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">run</span> sysargv.py
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>This is the name of the script:  sysargv.py
Number of arguments:  1
The arguments are:  [&#39;sysargv.py&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">run</span> <span class="n">sysargv</span><span class="o">.</span><span class="n">py</span> <span class="n">var1</span> <span class="n">var2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>This is the name of the script:  sysargv.py
Number of arguments:  3
The arguments are:  [&#39;sysargv.py&#39;, &#39;var1&#39;, &#39;var2&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">run</span> <span class="n">sysargv</span><span class="o">.</span><span class="n">py</span> <span class="mi">1</span> <span class="mi">2</span> <span class="n">var3</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>This is the name of the script:  sysargv.py
Number of arguments:  4
The arguments are:  [&#39;sysargv.py&#39;, &#39;1&#39;, &#39;2&#39;, &#39;var3&#39;]
</pre></div>
</div>
</div>
</div>
<p>As you can see the first variable is always the file name, and is always available to the Python interpreter.</p>
<p>Then, the command <code class="docutils literal notranslate"><span class="pre">main(argv=sys.argv)</span></code> directs the interpreter to pass the argument variables to the main function.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>As the number of arguments increases, handling <code class="docutils literal notranslate"><span class="pre">sys.</span></code>argv becomes less readable and more error-prone. You must manually validate and parse each argument, which can lead to complex code. Instead of <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code>, you may want to use <code class="docutils literal notranslate"><span class="pre">argparse</span></code> when building scripts or programs that require more complex argument parsing, error handling, and user-friendly help messages.</p>
</div>
</section>
<section id="what-is-main-argv">
<h4>What is <code class="docutils literal notranslate"><span class="pre">main(argv)</span></code> ?<a class="headerlink" href="#what-is-main-argv" title="Link to this heading">#</a></h4>
<p>Now for the final bit of your python boilerplate:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">argv</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;This is a boilerplate&#39;</span><span class="p">)</span> <span class="c1"># NOTE: indented using two tabs or four spaces</span>
</pre></div>
</div>
<p>This is the main function. Arguments obtained in the <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(__name__</span> <span class="pre">==</span> <span class="pre">&quot;__main__&quot;):</span></code> part of the script are “fed” to
this main function where the printing of the line “This is a boilerplate” happens.</p>
</section>
<section id="finally-sys-exit">
<h4>Finally, sys.exit()<a class="headerlink" href="#finally-sys-exit" title="Link to this heading">#</a></h4>
<p>OK, finally, what about:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sys.exit<span class="o">(</span>status<span class="o">)</span>
</pre></div>
</div>
<p>It’s just a way to terminate and exit the Python program in an explicit manner, returning an appropriate status code (recall the <code class="docutils literal notranslate"><span class="pre">exit</span></code> command from the <a class="reference internal" href="#02-ShellScripting.ipynb"><span class="xref myst">shell scripting chapter</span></a>). In this case, we have decided that <code class="docutils literal notranslate"><span class="pre">main()</span></code> returns 0 on a successful run, so <code class="docutils literal notranslate"> <span class="pre">sys.exit(status)</span></code> will return zero (because status = 0 upon successful termination of the <code class="docutils literal notranslate"><span class="pre">main</span></code> program) indicating “successful termination”.</p>
<p>Try putting <code class="docutils literal notranslate"><span class="pre">sys.exit(&quot;I</span> <span class="pre">am</span> <span class="pre">exiting</span> <span class="pre">right</span> <span class="pre">now!&quot;)</span></code> in other places in <code class="docutils literal notranslate"><span class="pre">boilerplate.py</span></code> and see what happens.</p>
</section>
</section>
<section id="a-program-with-control-flows-example">
<h3>A program-with-control-flows example<a class="headerlink" href="#a-program-with-control-flows-example" title="Link to this heading">#</a></h3>
<p>Let’s now look at an example of a script that uses various control flow tools within a standard python program structure.</p>
<p>To begin, first copy and rename <code class="docutils literal notranslate"><span class="pre">boilerplate.py</span></code> (to make use of it’s existing structure and save you some typing):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>boilerplate.py<span class="w"> </span>control_flow.py
</pre></div>
</div>
<p>Then type the following script into <code class="docutils literal notranslate"><span class="pre">control_flow.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>

<span class="sd">&quot;&quot;&quot;Some functions exemplifying the use of control statements&quot;&quot;&quot;</span>
<span class="c1">#docstrings are considered part of the running code (normal comments are</span>
<span class="c1">#stripped). Hence, you can access your docstrings at run time.</span>
<span class="n">__author__</span> <span class="o">=</span> <span class="s1">&#39;Samraat Pawar (s.pawar@imperial.ac.uk)&#39;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s1">&#39;0.0.1&#39;</span>

<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">even_or_odd</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span> <span class="c1"># if not specified, x should take value 0.</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find whether a number x is even or odd.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1">#The conditional if</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2"> is Even!&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2"> is Odd!&quot;</span>

<span class="k">def</span> <span class="nf">largest_divisor_five</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">120</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find which is the largest divisor of x among 2,3,4,5.&quot;&quot;&quot;</span>
    <span class="n">largest</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">largest</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="k">elif</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1">#means &quot;else, if&quot;</span>
        <span class="n">largest</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="k">elif</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">largest</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="k">elif</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">largest</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="k">else</span><span class="p">:</span> <span class="c1"># When all other (if, elif) conditions are not met</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;No divisor found for </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">!&quot;</span> <span class="c1"># Each function can return a value or a variable.</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;The largest divisor of </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2"> is </span><span class="si">{</span><span class="n">largest</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="k">def</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">70</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find whether an integer is prime.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span> <span class="c1">#  &quot;range&quot; returns a sequence of integers</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2"> is not a prime: </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> is a divisor&quot;</span><span class="p">)</span> 
            <span class="k">return</span> <span class="kc">False</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2"> is a prime!&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span> 

<span class="k">def</span> <span class="nf">find_all_primes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">22</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find all the primes up to x&quot;&quot;&quot;</span>
    <span class="n">allprimes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
            <span class="n">allprimes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;There are </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">allprimes</span><span class="p">)</span><span class="si">}</span><span class="s2"> primes between 2 and </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">allprimes</span>
      
<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">argv</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">even_or_odd</span><span class="p">(</span><span class="mi">22</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">even_or_odd</span><span class="p">(</span><span class="mi">33</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">largest_divisor_five</span><span class="p">(</span><span class="mi">120</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">largest_divisor_five</span><span class="p">(</span><span class="mi">121</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">is_prime</span><span class="p">(</span><span class="mi">60</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">is_prime</span><span class="p">(</span><span class="mi">59</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">find_all_primes</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
    <span class="k">return</span> <span class="mi">0</span>

<span class="k">if</span> <span class="p">(</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">main</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
</pre></div>
</div>
<p>Now run the code:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">run</span> <span class="n">control_flow</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>22 is Even!
33 is Odd!
The largest divisor of 120 is 5
No divisor found for 121!
60 is not a prime: 2 is a divisor
False
59 is a prime!
True
2 is a prime!
3 is a prime!
4 is not a prime: 2 is a divisor
5 is a prime!
6 is not a prime: 2 is a divisor
7 is a prime!
8 is not a prime: 2 is a divisor
9 is not a prime: 3 is a divisor
10 is not a prime: 2 is a divisor
11 is a prime!
12 is not a prime: 2 is a divisor
13 is a prime!
14 is not a prime: 2 is a divisor
15 is not a prime: 3 is a divisor
16 is not a prime: 2 is a divisor
17 is a prime!
18 is not a prime: 2 is a divisor
19 is a prime!
20 is not a prime: 2 is a divisor
21 is not a prime: 3 is a divisor
22 is not a prime: 2 is a divisor
23 is a prime!
24 is not a prime: 2 is a divisor
25 is not a prime: 5 is a divisor
26 is not a prime: 2 is a divisor
27 is not a prime: 3 is a divisor
28 is not a prime: 2 is a divisor
29 is a prime!
30 is not a prime: 2 is a divisor
31 is a prime!
32 is not a prime: 2 is a divisor
33 is not a prime: 3 is a divisor
34 is not a prime: 2 is a divisor
35 is not a prime: 5 is a divisor
36 is not a prime: 2 is a divisor
37 is a prime!
38 is not a prime: 2 is a divisor
39 is not a prime: 3 is a divisor
40 is not a prime: 2 is a divisor
41 is a prime!
42 is not a prime: 2 is a divisor
43 is a prime!
44 is not a prime: 2 is a divisor
45 is not a prime: 3 is a divisor
46 is not a prime: 2 is a divisor
47 is a prime!
48 is not a prime: 2 is a divisor
49 is not a prime: 7 is a divisor
50 is not a prime: 2 is a divisor
51 is not a prime: 3 is a divisor
52 is not a prime: 2 is a divisor
53 is a prime!
54 is not a prime: 2 is a divisor
55 is not a prime: 5 is a divisor
56 is not a prime: 2 is a divisor
57 is not a prime: 3 is a divisor
58 is not a prime: 2 is a divisor
59 is a prime!
60 is not a prime: 2 is a divisor
61 is a prime!
62 is not a prime: 2 is a divisor
63 is not a prime: 3 is a divisor
64 is not a prime: 2 is a divisor
65 is not a prime: 5 is a divisor
66 is not a prime: 2 is a divisor
67 is a prime!
68 is not a prime: 2 is a divisor
69 is not a prime: 3 is a divisor
70 is not a prime: 2 is a divisor
71 is a prime!
72 is not a prime: 2 is a divisor
73 is a prime!
74 is not a prime: 2 is a divisor
75 is not a prime: 3 is a divisor
76 is not a prime: 2 is a divisor
77 is not a prime: 7 is a divisor
78 is not a prime: 2 is a divisor
79 is a prime!
80 is not a prime: 2 is a divisor
81 is not a prime: 3 is a divisor
82 is not a prime: 2 is a divisor
83 is a prime!
84 is not a prime: 2 is a divisor
85 is not a prime: 5 is a divisor
86 is not a prime: 2 is a divisor
87 is not a prime: 3 is a divisor
88 is not a prime: 2 is a divisor
89 is a prime!
90 is not a prime: 2 is a divisor
91 is not a prime: 7 is a divisor
92 is not a prime: 2 is a divisor
93 is not a prime: 3 is a divisor
94 is not a prime: 2 is a divisor
95 is not a prime: 5 is a divisor
96 is not a prime: 2 is a divisor
97 is a prime!
98 is not a prime: 2 is a divisor
99 is not a prime: 3 is a divisor
100 is not a prime: 2 is a divisor
There are 25 primes between 2 and 100
[2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97]
</pre></div>
</div>
</div>
</div>
<p>You can also call any of the functions within <code class="docutils literal notranslate"><span class="pre">control_flow.py</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">even_or_odd</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;11 is Odd!&#39;
</pre></div>
</div>
</div>
</div>
<p>This is possible without explicitly importing the modules because you are only running one script. You would have to do an explicit <code class="docutils literal notranslate"><span class="pre">import</span></code> if you needed a module from another python script file.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Notice in the above script the use of a normal string but with an f in front, i.e. <code class="docutils literal notranslate"><span class="pre">f&quot;test</span> <span class="pre">string&quot;</span></code>. This is the current best-practice method for incorporating variables into a string.</p>
<p>You call it by prefixing the string with an <code class="docutils literal notranslate"><span class="pre">f</span></code>, and then including any variable you want to print in curly brackets:<code class="docutils literal notranslate"><span class="pre">{}</span></code>.</p>
<p>e.g. <code class="docutils literal notranslate"><span class="pre">f&quot;The</span> <span class="pre">value</span> <span class="pre">of</span> <span class="pre">x</span> <span class="pre">is</span> <span class="pre">{x}.&quot;</span></code></p>
<p>You can get exceptionally in-depth with pretty string formatting, but at the very least you will be expected to use this type of string formatting (or the .format() method) in your scripts going forward.</p>
<p>For more documentation on the current f-string method as well as the older .format() method, <a class="reference external" href="https://fstring.help/">see this</a> and <a class="reference external" href="https://pyformat.info">this</a> respectively..</p>
</div>
</section>
</section>
<section id="practicals">
<h2>Practicals<a class="headerlink" href="#practicals" title="Link to this heading">#</a></h2>
<p>As always, test, add, commit and push all your new code and data to your git repository.</p>
<p><em>In general, follow good programming practices such as commenting where necessary, and using pythonic ways to make your code more user-friendly, such as by using docstrings.</em></p>
<section id="loops-and-list-comprehensions">
<h3>Loops and List Comprehensions<a class="headerlink" href="#loops-and-list-comprehensions" title="Link to this heading">#</a></h3>
<p>Open and complete the tasks in <code class="docutils literal notranslate"><span class="pre">lc1.py</span></code>, <code class="docutils literal notranslate"><span class="pre">lc2.py</span></code>, <code class="docutils literal notranslate"><span class="pre">dictionary.py</span></code>, <code class="docutils literal notranslate"><span class="pre">tuple.py</span></code> available on TheMulQuaBio repo (you can tackle them in any order).</p>
</section>
<section id="writing-a-program-with-control-flows">
<h3>Writing a Program with Control flows<a class="headerlink" href="#writing-a-program-with-control-flows" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Modify <code class="docutils literal notranslate"><span class="pre">cfexercises1.py</span></code> to make it a “module” like <code class="docutils literal notranslate"> <span class="pre">control_flow.py</span></code>). That is, all the <code class="docutils literal notranslate"><span class="pre">foo_x</span></code> functions should take arguments from the user (like the functions inside <code class="docutils literal notranslate"> <span class="pre">control_flow.py</span></code>.</p></li>
<li><p>Also, add some test arguments to show that they work (again, like <code class="docutils literal notranslate"><span class="pre">control_flow.py</span></code>) — for example, <code class="docutils literal notranslate"><span class="pre">foo_5(10)</span></code>. Thus, running <code class="docutils literal notranslate"><span class="pre">cfexercises1.py</span></code> should now output evaluations of all the <code class="docutils literal notranslate"><span class="pre">foo_x</span></code> functions.</p></li>
</ul>
</section>
</section>
<section id="errors-in-your-python-code">
<span id="python-errors"></span><h2>Errors in your Python code<a class="headerlink" href="#errors-in-your-python-code" title="Link to this heading">#</a></h2>
<p>What do you want from your code? Rank the following by importance:</p>
<ol class="arabic simple">
<li><p>it is very fast</p></li>
<li><p>it gives me the right answer</p></li>
<li><p>it is easy to read</p></li>
<li><p>it uses lots of ‘clever’ programming techniques</p></li>
<li><p>it uses cool features of the language</p></li>
</ol>
<p>Then, think about this:</p>
<ul class="simple">
<li><p>If you are <em>very lucky</em>, your program will crash when you run it</p></li>
<li><p>If you are <em>lucky</em>, you will get an answer that is obviously wrong</p></li>
<li><p>If you are <em>unlucky</em>, you won’t notice until after publication</p></li>
<li><p>If you are <em>very unlucky</em>, someone else will notice it after publication</p></li>
</ul>
<p>Ultimately, most of your time could well be spent finding errors and fixing them (“debugging”), not writing code. You can debug when errors appear, but why not just “nip” as many as you can in the “bud”? For this, you would use unit testing.</p>
<section id="unit-testing">
<h3>Unit testing<a class="headerlink" href="#unit-testing" title="Link to this heading">#</a></h3>
<p>Unit testing prevents the most common mistakes and helps you write reliable code. Indeed, there are many reasons for testing:</p>
<ul class="simple">
<li><p>Can you prove (to yourself) that your code does what you think it does?</p></li>
<li><p>Did you think about the things that might go wrong?</p></li>
<li><p>Can you prove to other people that your code works?</p></li>
<li><p>Does it still all work if you fix a bug?</p></li>
<li><p>Does it still all work if you add a feature?</p></li>
<li><p>Does it work with that new dataset?</p></li>
<li><p>Does it work on the latest version of the language (e.g., Python 3.x vs. 2.7.x)?</p></li>
<li><p>Does it work on Mac? on Linux? on Windows?</p></li>
<li><p>Does it work on 64 bit <em>and</em> 32 bit?</p></li>
<li><p>Does it work on an old version of a Mac?</p></li>
<li><p>Does it work on any Linux server, or Imperial College’s Unix cluster?</p></li>
</ul>
<p>The idea is to write <em>independent</em> tests for the <em>smallest units</em> of code. <em>Why the smallest units?</em> — to increase the likelihood of retaining the tests upon code modification.</p>
<section id="unit-testing-with-doctest">
<h4>Unit testing with <code class="docutils literal notranslate"><span class="pre">doctest</span></code><a class="headerlink" href="#unit-testing-with-doctest" title="Link to this heading">#</a></h4>
<p>Let’s try <code class="docutils literal notranslate"><span class="pre">doctest</span></code>, the simplest testing tool in python: simple tests for each function are embedded in the docstring.</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Copy the file <code class="docutils literal notranslate"><span class="pre">control_flow.py</span></code> into the file <code class="docutils literal notranslate"><span class="pre">test_control_flow.py</span></code> and edit the original function so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>

<span class="sd">&quot;&quot;&quot;Some functions exemplifying the use of control statements&quot;&quot;&quot;</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s1">&#39;Your Name (Your.Name@your.email.address)&#39;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s1">&#39;0.0.1&#39;</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">doctest</span> <span class="c1"># Import the doctest module</span>

<span class="k">def</span> <span class="nf">even_or_odd</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find whether a number x is even or odd.</span>
<span class="sd">      </span>
<span class="sd">    &gt;&gt;&gt; even_or_odd(10)</span>
<span class="sd">    &#39;10 is Even!&#39;</span>
<span class="sd">    </span>
<span class="sd">    &gt;&gt;&gt; even_or_odd(5)</span>
<span class="sd">    &#39;5 is Odd!&#39;</span>
<span class="sd">        </span>
<span class="sd">    in case of negative numbers, the positive is taken:    </span>
<span class="sd">    &gt;&gt;&gt; even_or_odd(-2)</span>
<span class="sd">    &#39;-2 is Even!&#39;</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#Define function to be tested</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2"> is Even!&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2"> is Odd!&quot;</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">argv</span><span class="p">):</span> 
    <span class="nb">print</span><span class="p">(</span><span class="n">even_or_odd</span><span class="p">(</span><span class="mi">22</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">even_or_odd</span><span class="p">(</span><span class="mi">33</span><span class="p">))</span>
    <span class="k">return</span> <span class="mi">0</span>

<span class="k">if</span> <span class="p">(</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">main</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>

<span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">()</span>   <span class="c1"># To run with embedded tests</span>
</pre></div>
</div>
<p>You can also suppress the block of code containing <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">main()</span></code> and <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(__name__</span> <span class="pre">==</span> <span class="pre">&quot;__main__&quot;)</span></code> because you don’t want/need to unit test that section of yuor script.</p>
<p>Now run it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">run</span> <span class="n">test_control_flow</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">v</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>22 is Even!
33 is Odd!
Trying:
    even_or_odd(10)
Expecting:
    &#39;10 is Even!&#39;
ok
Trying:
    even_or_odd(5)
Expecting:
    &#39;5 is Odd!&#39;
ok
Trying:
    even_or_odd(-2)
Expecting:
    &#39;-2 is Even!&#39;
ok
2 items had no tests:
    __main__
    __main__.main
1 items passed all tests:
   3 tests in __main__.even_or_odd
3 tests in 3 items.
3 passed and 0 failed.
Test passed.
</pre></div>
</div>
</div>
</div>
<p>You can also run doctest “on the fly”, without writing <code class="docutils literal notranslate"><span class="pre">doctest.testmod()</span></code> in the code, by typing in a terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>-m<span class="w"> </span>doctest<span class="w"> </span>-v<span class="w"> </span>your_function_to_test.py
</pre></div>
</div>
</section>
<section id="other-unit-testing-approaches">
<h4>Other unit testing approaches<a class="headerlink" href="#other-unit-testing-approaches" title="Link to this heading">#</a></h4>
<p>For more complex testing, see documentation of <code class="docutils literal notranslate"><span class="pre">doctest</span></code> <a class="reference external" href="https://docs.python.org/3.8/library/doctest.html">here</a>.</p>
<p>Also check out the packages <code class="docutils literal notranslate"><span class="pre">pytest</span></code> and <code class="docutils literal notranslate"><span class="pre">unittest</span></code> (and maybe <code class="docutils literal notranslate"><span class="pre">nose</span></code>, though the first two are more widely used and more intuitive) for more comprehensive and flexible unit testing.</p>
<p>Please start testing as early as possible, but don’t try to test everything either! Remember, it is easier to test if code is compartmentalized into functions.</p>
</section>
</section>
<section id="debugging">
<span id="python-debugging"></span><h3>Debugging<a class="headerlink" href="#debugging" title="Link to this heading">#</a></h3>
<p>OK, so you unit-tested, let’s go look at life through beer-goggles… BUT NO! YOU WILL VERY LIKELY RUN INTO BUGS!</p>
<p>Bugs (unexpected errors) happen, almost inevitably, in life and programming. You need to find and debug them. Banish all thoughts of littering your code with <code class="docutils literal notranslate"><span class="pre">print</span></code> statements to find bugs.</p>
<p>Enter the debugger. The command <code class="docutils literal notranslate"><span class="pre">pdb</span></code> turns on the python debugger. Type the following in a file and save as
<code class="docutils literal notranslate"><span class="pre">debugme.py</span></code> in your <code class="docutils literal notranslate"> <span class="pre">Code</span></code> directory:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">buggyfunc</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">x</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">-</span><span class="mi">1</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="n">y</span>
    <span class="k">return</span> <span class="n">z</span>

<span class="n">buggyfunc</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
<p>Now run it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">run</span> debugme.py
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ZeroDivisionError</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="n">File</span> <span class="o">~/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Teaching</span><span class="o">/</span><span class="n">TheMulQuaBio</span><span class="o">/</span><span class="n">TMQB</span><span class="o">/</span><span class="n">content</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">debugme</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">8</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>         <span class="n">z</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="n">y</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span>     <span class="k">return</span> <span class="n">z</span>
<span class="ne">----&gt; </span><span class="mi">8</span> <span class="n">buggyfunc</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>

<span class="nn">File ~/Documents/Teaching/TheMulQuaBio/TMQB/content/code/debugme.py:5,</span> in <span class="ni">buggyfunc</span><span class="nt">(x)</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>     <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">-</span><span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">5</span>     <span class="n">z</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="n">y</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="k">return</span> <span class="n">z</span>

<span class="ne">ZeroDivisionError</span>: division by zero
</pre></div>
</div>
</div>
</div>
<p>Note that the directory path will be different for you.</p>
<p>OK, so let’s turn debugging on using <code class="docutils literal notranslate"><span class="pre">%pdb</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">pdb</span>
</pre></div>
</div>
<p>Now run the script again:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>run<span class="w"> </span>debugme.py
</pre></div>
</div>
<p>which gives</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>---------------------------------------------------------------------------
ZeroDivisionError<span class="w">                         </span>Traceback<span class="w"> </span><span class="o">(</span>most<span class="w"> </span>recent<span class="w"> </span>call<span class="w"> </span>last<span class="o">)</span>
~/Documents/Teaching/SilBioComp/TheMulQuaBio/content/code/debugme.py<span class="w"> </span><span class="k">in</span><span class="w"> </span>&lt;module&gt;
<span class="w">      </span><span class="m">6</span><span class="w">     </span><span class="k">return</span><span class="w"> </span>z
<span class="w">      </span><span class="m">7</span><span class="w"> </span>
----&gt;<span class="w"> </span><span class="m">8</span><span class="w"> </span>buggyfunc<span class="o">(</span><span class="m">20</span><span class="o">)</span>

~/Documents/Teaching/SilBioComp/TheMulQuaBio/content/code/debugme.py<span class="w"> </span><span class="k">in</span><span class="w"> </span>buggyfunc<span class="o">(</span>x<span class="o">)</span>
<span class="w">      </span><span class="m">3</span><span class="w">     </span><span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span>range<span class="o">(</span>x<span class="o">)</span>:
<span class="w">      </span><span class="m">4</span><span class="w">         </span><span class="nv">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>y-1
----&gt;<span class="w"> </span><span class="m">5</span><span class="w">         </span><span class="nv">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>x/y
<span class="w">      </span><span class="m">6</span><span class="w">     </span><span class="k">return</span><span class="w"> </span>z
<span class="w">      </span><span class="m">7</span><span class="w"> </span>

ZeroDivisionError:<span class="w"> </span>division<span class="w"> </span>by<span class="w"> </span>zero
&gt;<span class="w"> </span>/home/mhasoba/Documents/Teaching/SilBioComp/TheMulQuaBio/content/code/debugme.py<span class="o">(</span><span class="m">5</span><span class="o">)</span>buggyfunc<span class="o">()</span>
<span class="w">      </span><span class="m">3</span><span class="w">     </span><span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span>range<span class="o">(</span>x<span class="o">)</span>:
<span class="w">      </span><span class="m">4</span><span class="w">         </span><span class="nv">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>y-1
----&gt;<span class="w"> </span><span class="m">5</span><span class="w">         </span><span class="nv">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>x/y
<span class="w">      </span><span class="m">6</span><span class="w">     </span><span class="k">return</span><span class="w"> </span>z
<span class="w">      </span><span class="m">7</span><span class="w"> </span>
</pre></div>
</div>
<p>Now you will be in the debugger shell, which has a different command prompt: <code class="docutils literal notranslate"><span class="pre">ipdb&gt;</span></code>.</p>
<p>Here, you can use the following commands to navigate and test the code line by line or block by block:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Command</p></th>
<th class="head text-left"><p>What it does</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td class="text-left"><p>continue execution until the next line</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ENTER</span></code></p></td>
<td class="text-left"><p>repeat the previous command</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">s</span></code></p></td>
<td class="text-left"><p>“step” into next function or procedure (i.e., continue the debugging inside the function, as opposed to simply execute it till it returns)</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">p</span> <span class="pre">x</span></code></p></td>
<td class="text-left"><p>print variable x</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">pp</span> <span class="pre">locals()</span></code></p></td>
<td class="text-left"><p>pretty print all variables and objects in current workspace scope</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">c</span></code></p></td>
<td class="text-left"><p>continue until next break-point</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">l</span></code></p></td>
<td class="text-left"><p>print the code surrounding the current position (you can specify how many)</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">r</span></code></p></td>
<td class="text-left"><p>continue until the end of the function</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">q</span></code></p></td>
<td class="text-left"><p>quit</p></td>
</tr>
</tbody>
</table>
</div>
<p>So let’s continue our debugging:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ipdb&gt;<span class="w"> </span>p<span class="w"> </span>x<span class="w">                                                                                                                     </span>
<span class="m">20</span>

ipdb&gt;<span class="w"> </span>p<span class="w"> </span>y<span class="w">                                                                                                                     </span>
<span class="m">0</span>

ipdb&gt;<span class="w"> </span>p<span class="w"> </span>z<span class="w">                                                                                                                     </span>
<span class="m">20</span>.0

ipdb&gt;<span class="w"> </span>p<span class="w"> </span>x/y<span class="w">                                                                                                                   </span>
***<span class="w"> </span>ZeroDivisionError:<span class="w"> </span>division<span class="w"> </span>by<span class="w"> </span>zero

ipdb&gt;<span class="w"> </span>l<span class="w">                                                                                                                       </span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span>def<span class="w"> </span>buggyfunc<span class="o">(</span>x<span class="o">)</span>:
<span class="w">      </span><span class="m">2</span><span class="w">     </span><span class="nv">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>x
<span class="w">      </span><span class="m">3</span><span class="w">     </span><span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span>range<span class="o">(</span>x<span class="o">)</span>:
<span class="w">      </span><span class="m">4</span><span class="w">         </span><span class="nv">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>y-1
----&gt;<span class="w"> </span><span class="m">5</span><span class="w">         </span><span class="nv">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>x/y
<span class="w">      </span><span class="m">6</span><span class="w">     </span><span class="k">return</span><span class="w"> </span>z
<span class="w">      </span><span class="m">7</span><span class="w"> </span>
<span class="w">      </span><span class="m">8</span><span class="w"> </span>buggyfunc<span class="o">(</span><span class="m">20</span><span class="o">)</span>
ipdb&gt;<span class="w"> </span>q

In<span class="w"> </span><span class="o">[]</span>:<span class="w"> </span>%pdb
Automatic<span class="w"> </span>pdb<span class="w"> </span>calling<span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>turned<span class="w"> </span>OFF
</pre></div>
</div>
<p>Once in the debugger, use <code class="docutils literal notranslate"><span class="pre">pp</span> <span class="pre">locals()</span></code> and/or <code class="docutils literal notranslate"><span class="pre">pp</span> <span class="pre">globals()</span></code> to see all local or global objects (including variables and functions) available at the point where the debugger stopped in the script. <code class="docutils literal notranslate"><span class="pre">pp</span></code> stands for “pretty print”.</p>
<section id="paranoid-programming-debugging-with-breakpoints">
<h4>Paranoid programming: debugging with breakpoints<a class="headerlink" href="#paranoid-programming-debugging-with-breakpoints" title="Link to this heading">#</a></h4>
<p>You may want to pause the program run and inspect a given line or block  of code (<code class="docutils literal notranslate"><span class="pre">*why?*</span></code> — impromptu unit-testing is one reason). To do so, simply put this snippet of code where you want to pause and start a debugging session and then run the program again:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ipdb</span><span class="p">;</span> <span class="n">ipdb</span><span class="o">.</span><span class="n">set_trace</span><span class="p">()</span>
</pre></div>
</div>
<p>(you can use <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">pdb;</span> <span class="pre">pdb.set_trace()</span></code> to get the less-interactive python debugger!)</p>
<p>Alternatively, running the code in ipython with the flag <code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">-d</span></code> starts a debugging session from the first line of your code (you can also specify the line to stop at).</p>
<p><em>If you are serious about programming, please start using a debugger (R, Python, whatever…)!</em></p>
</section>
<section id="debugging-using-your-ide">
<h4>Debugging using your IDE<a class="headerlink" href="#debugging-using-your-ide" title="Link to this heading">#</a></h4>
<p>If you are using a python-dedicated IDE like Spyder or PyCharm, you should do debugging, including setting breakpoints using a graphic user interface. Even more general-purpose code editors / IDEs like Visual Studio Code allow very good <a class="reference external" href="https://code.visualstudio.com/docs/editor/debugging">graphical debugging</a>.</p>
</section>
</section>
<section id="errors-that-cannot-be-debugged">
<h3>Errors that cannot be debugged<a class="headerlink" href="#errors-that-cannot-be-debugged" title="Link to this heading">#</a></h3>
<p>In many scenarios, you <em>do not</em> want to, or cannot, debug away an error in your program. The two most common such scenarios are:</p>
<ul class="simple">
<li><p>An error that arises when a particular condition is not met in your program.</p></li>
<li><p>You <em>want</em> the code to continue running despite an error.</p></li>
</ul>
<p>to “handle” such errors, you can use the <code class="docutils literal notranslate"><span class="pre">try</span></code> - <code class="docutils literal notranslate"><span class="pre">except</span></code> keywords.</p>
<p>Let’s expand our previous <code class="docutils literal notranslate"><span class="pre">debugme.py</span></code> example to understand how this works.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">buggyfunc</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">x</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span> 
            <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">-</span><span class="mi">1</span>
            <span class="n">z</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="n">y</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;This didn&#39;t work;</span><span class="si">{</span><span class="n">x</span><span class="w"> </span><span class="si">= }</span><span class="s2">; </span><span class="si">{</span><span class="n">y</span><span class="w"> </span><span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">z</span>

<span class="n">buggyfunc</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>This didn&#39;t work;x = 20; y = 0
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>20.0
</pre></div>
</div>
</div>
</div>
<p><span class="math notranslate nohighlight">\(\star\)</span> Run this block of code yourself in the ipython console using <code class="docutils literal notranslate"><span class="pre">%cpaste</span></code>.</p>
<p>So, <code class="docutils literal notranslate"><span class="pre">try</span></code> does what the name suggests - tries to do something (the division), and if it does not work (any error happens), transfers control to the <code class="docutils literal notranslate"><span class="pre">except</span></code> block and whatever you ask Python to do in that block gets executed. This is a good strategy if you want your program to give feedback, or that particular error is not common.</p>
<p>You can also “catch” specific types of errors. For example, modify the code further:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">buggyfunc</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">x</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span> 
            <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">-</span><span class="mi">1</span>
            <span class="n">z</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="n">y</span>
        <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The result of dividing a number by zero is undefined&quot;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;This didn&#39;t work;</span><span class="si">{</span><span class="n">x</span><span class="w"> </span><span class="si">= }</span><span class="s2">; </span><span class="si">{</span><span class="n">y</span><span class="w"> </span><span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;OK; </span><span class="si">{</span><span class="n">x</span><span class="w"> </span><span class="si">= }</span><span class="s2">; </span><span class="si">{</span><span class="n">y</span><span class="w"> </span><span class="si">= }</span><span class="s2">, </span><span class="si">{</span><span class="n">z</span><span class="w"> </span><span class="si">= }</span><span class="s2">;&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">z</span>

<span class="n">buggyfunc</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>OK; x = 20; y = 19, z = 1.0526315789473684;
OK; x = 20; y = 18, z = 1.1111111111111112;
OK; x = 20; y = 17, z = 1.1764705882352942;
OK; x = 20; y = 16, z = 1.25;
OK; x = 20; y = 15, z = 1.3333333333333333;
OK; x = 20; y = 14, z = 1.4285714285714286;
OK; x = 20; y = 13, z = 1.5384615384615385;
OK; x = 20; y = 12, z = 1.6666666666666667;
OK; x = 20; y = 11, z = 1.8181818181818181;
OK; x = 20; y = 10, z = 2.0;
OK; x = 20; y = 9, z = 2.2222222222222223;
OK; x = 20; y = 8, z = 2.5;
OK; x = 20; y = 7, z = 2.857142857142857;
OK; x = 20; y = 6, z = 3.3333333333333335;
OK; x = 20; y = 5, z = 4.0;
OK; x = 20; y = 4, z = 5.0;
OK; x = 20; y = 3, z = 6.666666666666667;
OK; x = 20; y = 2, z = 10.0;
OK; x = 20; y = 1, z = 20.0;
The result of dividing a number by zero is undefined
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>20.0
</pre></div>
</div>
</div>
</div>
<p>So here we anticipated a <code class="docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code> and gave feedback on that. As such, <code class="docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code> is a pre-defined error type in Python. Another example is <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>, which you will get if you try to run the above script with something non-numeric, such as a string.</p>
<p>Note that we also used <code class="docutils literal notranslate"><span class="pre">else</span></code> (just like in the case of <code class="docutils literal notranslate"><span class="pre">if</span></code>-<code class="docutils literal notranslate"><span class="pre">else</span></code>) here to give feedback on every successful calculation. There is also a <code class="docutils literal notranslate"><span class="pre">finally</span></code> keyword that enables you to execute sections of code that should always run, with or without any previously encountered exceptions.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Notice again in the above script we create an f string but this time we save ourselves even more time by incorporating the variable and an <code class="docutils literal notranslate"><span class="pre">=</span></code> sign:</p>
<p><code class="docutils literal notranslate"><span class="pre">f&quot;Here</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">string,</span> <span class="pre">{x</span> <span class="pre">=</span> <span class="pre">}&quot;</span></code></p>
<p>This is the same (but <em>even more concise</em>) as writing:</p>
<p><code class="docutils literal notranslate"><span class="pre">f&quot;Here</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">string,</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">{x}&quot;</span></code></p>
<p>This works for expressions as well! Try something like the following to see:</p>
<p><code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">math</span> <span class="pre">import</span> <span class="pre">cos,</span> <span class="pre">radians</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">theta</span> <span class="pre">=</span> <span class="pre">30</span></code></p>
<p>print(f”{theta = } {cos(radians(theta)) = :.3f}”)</p>
</div>
</section>
</section>
<section id="modules-and-code-compartmentalization">
<h2>Modules and code compartmentalization<a class="headerlink" href="#modules-and-code-compartmentalization" title="Link to this heading">#</a></h2>
<p>Ideally you should aim to compartmentalize your code into a bunch of functions, typically written in a single <code class="docutils literal notranslate"><span class="pre">.py</span></code> file: these are Python “modules”, which you were introduced to previously.</p>
<p>Why bother with modules? Because:</p>
<ul class="simple">
<li><p>Keeping code compartmentalized is good for debugging, unit testing, and profiling (coming up later)</p></li>
<li><p>Makes code more compact by minimizing redundancies (write repeatedly used code segments as a module)</p></li>
<li><p>Allows you to import and use useful functions that you yourself wrote, just like you would from standard python packages (coming up)</p></li>
</ul>
<section id="importing-modules">
<h3>Importing Modules<a class="headerlink" href="#importing-modules" title="Link to this heading">#</a></h3>
<p>There are different ways to <em>import</em> a module:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">my_module</span></code>, then functions in the module can be called as <code class="docutils literal notranslate"><span class="pre">my_module.one_of_my_functions()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">my_module</span> <span class="pre">import</span> <span class="pre">my_function</span></code> imports only the function <code class="docutils literal notranslate"><span class="pre">my_function</span></code> in the module <code class="docutils literal notranslate"><span class="pre">my_module</span></code>. It can then be called as if it were part of the main file: <code class="docutils literal notranslate"><span class="pre">my_function()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">my_module</span> <span class="pre">as</span> <span class="pre">mm</span></code> imports the module <code class="docutils literal notranslate"><span class="pre">my_module</span></code> and calls it <code class="docutils literal notranslate"><span class="pre">mm</span></code>. Convenient when the name of the module is very long. The functions in the module can be called as <code class="docutils literal notranslate"><span class="pre">mm.one_of_my_functions()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">my_module</span> <span class="pre">import</span> <span class="pre">*</span></code>. Avoid doing this! <em>Why?</em> – to avoid name conflicts!</p></li>
</ul>
<p>You can also access variables written into modules: <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">my_module</span></code>, then do: <code class="docutils literal notranslate"><span class="pre">my_module.one_of_my_variables</span></code></p>
</section>
<section id="python-packages">
<h3>Python packages<a class="headerlink" href="#python-packages" title="Link to this heading">#</a></h3>
<p>A Python package is simply a directory of Python modules (quite like an <code class="docutils literal notranslate"><span class="pre">R</span></code> package). A number of packages, such as the following particularly useful ones, are always available as standard libraries (just require <code class="docutils literal notranslate"><span class="pre">import</span></code> from within python or ipython):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: file input-output with <code class="docutils literal notranslate"><span class="pre">.csv</span></code>, <code class="docutils literal notranslate"><span class="pre">.txt</span></code>, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">subprocess</span></code>: to run other programs, including multiple ones at the same time, including operating system-dependent functionality</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">math</span></code>: for mathematical functions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sqlite3</span></code>: for manipulating and querying <code class="docutils literal notranslate"><span class="pre">sqlite</span></code> databases</p></li>
</ul>
<p>Scores of other packages are accessible by explicitly installing them using <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">python-packagename</span></code> (as you did previously) or by using <code class="docutils literal notranslate"><span class="pre">pip</span></code>. Some particularly mentionable ones are:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://scipy.org"><code class="docutils literal notranslate"><span class="pre">sciPy</span></code></a> contains a wide array of numerical tools for scientific computing, including <code class="docutils literal notranslate"><span class="pre">NumPy</span></code>
for efficient data crunching</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> for plotting (very matlab-like, requires <code class="docutils literal notranslate"><span class="pre">scipy</span></code>) (all packaged in <code class="docutils literal notranslate"><span class="pre">pylab</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas</span></code> for manipulating data, and comes with a DataFrame object similar to the <code class="docutils literal notranslate"><span class="pre">R</span></code> data frame.</p></li>
<li><p><a class="reference external" href="http://scikit-learn.org"><code class="docutils literal notranslate"><span class="pre">scikit-learn</span></code></a> for applying different machine learning algorithms to data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ipython</span></code> is an enhanced python terminal (which you are currently using)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jupyter</span></code> is an interactive notebook environment for data analysis, visualization, and creation of documents that can be shared. This course is written entirely as Jupyter notebooks.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scrapy</span></code> allows you to write efficient programs that <a class="reference external" href="https://en.wikipedia.org/wiki/Web_crawler">crawl</a> through web sites and extract data from them</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">beautifulsoup4</span></code> can be used for parsing HTML and XML to extract data (can do a lot of what <code class="docutils literal notranslate"><span class="pre">scrapy</span></code> does)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">biopython</span></code> for bioinformatics. Check out the <a class="reference external" href="http://biopython.org/DIST/docs/tutorial/Tutorial.html">worked examples</a> in particular.</p></li>
</ul>
<p>We will use many of these in the <a class="reference internal" href="#"><span class="std std-doc">Advanced Python Chapter</span></a>.</p>
</section>
</section>
<section id="id1">
<h2>Practicals<a class="headerlink" href="#id1" title="Link to this heading">#</a></h2>
<p>As always, test, add, commit and push all your new code and data to your git repository.</p>
<section id="align-dna-sequences">
<h3>Align DNA sequences<a class="headerlink" href="#align-dna-sequences" title="Link to this heading">#</a></h3>
<p>Open <code class="docutils literal notranslate"><span class="pre">align_seqs.py</span></code> from TheMulQuaBio’s code directory. This script aligns two DNA sequences such that they are as similar as possible. Run the script and make sure you understand what every line is doing. A good way to do this, now that you have learnt debugging, is to insert a breakpoint (<code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">ipdb;</span> <span class="pre">ipdb.set_trace()</span></code>) at key locations in the script and examine what is going on. For example, inserting one just after the start of the <code class="docutils literal notranslate"><span class="pre">for</span></code> loop of the <code class="docutils literal notranslate"><span class="pre">calculate_score</span></code> function/module is a good place.</p>
<p>The aligning algorithm is simple. Start by positioning the beginning of the shorter sequence at all positions (bases) of the longer one (the start position), and count the number of bases matched downstream. Then, for each start position, count the “score” as total of number of bases matched. The alignment with the highest score wins. Ties are possible, in which case, you just take the an arbitrary alignment (e.g., first or last) with the highest score.</p>
<p>Your tasks:</p>
<ul class="simple">
<li><p>Convert <code class="docutils literal notranslate"><span class="pre">align_seqs.py</span></code> to a Python program that takes the DNA sequences as an input from a single external file and saves the best alignment along with its corresponding score in a single text file (your choice of format and file type) to an appropriate location. No external input should be required; that is, you should still only need to use <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">align_seq.py</span></code> to run it.
For example, the input file can be a single <code class="docutils literal notranslate"><span class="pre">.csv</span></code> file with the two example sequences given at the top of the original script.</p></li>
</ul>
</section>
<section id="groupwork-practical-on-align-dna-sequences">
<h3>Groupwork Practical on Align DNA sequences<a class="headerlink" href="#groupwork-practical-on-align-dna-sequences" title="Link to this heading">#</a></h3>
<p>Align all the <code class="docutils literal notranslate"><span class="pre">.fasta</span></code> sequences from the <a class="reference internal" href="Unix.html"><span class="std std-doc">Unix chapter</span></a>. Call the new script <code class="docutils literal notranslate"><span class="pre">align_seqs_fasta.py</span></code>. Unlike <code class="docutils literal notranslate"><span class="pre">align_seqs.py</span></code>, this script should take <em>any</em> two fasta sequences (in separate files) to be aligned as input. So this script would typically run by using explicit inputs, for example, when called with something like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>align_seqs_fasta.py<span class="w"> </span>seq1.fasta<span class="w"> </span>seq2.fasta
</pre></div>
</div>
<p>However, it should still run if no inputs were given, using two fasta sequences from the <code class="docutils literal notranslate"><span class="pre">data</span></code> directory as defaults.</p>
</section>
<section id="groupwork-practical-on-align-dna-sequences-2">
<h3>Groupwork Practical on Align DNA sequences 2<a class="headerlink" href="#groupwork-practical-on-align-dna-sequences-2" title="Link to this heading">#</a></h3>
<p>The current script/program runs through all possible starting points on the main sequence and then just takes the first of the alignments with the highest score. This should be apparent if you closely examine this part of the script:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">l1</span><span class="p">):</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">calculate_score</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">l1</span><span class="p">,</span> <span class="n">l2</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">z</span> <span class="o">&gt;</span> <span class="n">my_best_score</span><span class="p">:</span>
        <span class="n">my_best_align</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="n">s2</span>
        <span class="n">my_best_score</span> <span class="o">=</span> <span class="n">z</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">z</span> <span class="pre">&gt;</span> <span class="pre">my_best_score</span></code> condition means that when a new alignment has the same score as the current one, the current one will be kept and the new one discarded. As a result, multiple alignments with the same score will be lost even if they are all equally good alignments (highly likely in longer sequences), with only the first one retained.</p>
<ul class="simple">
<li><p>Modify the script so that all the equally-best alignments are recorded and saved to the <code class="docutils literal notranslate"><span class="pre">results</span></code> directory in an appropriate file format (Hint: recall <code class="docutils literal notranslate"><span class="pre">pickle</span></code>). Call your new script <code class="docutils literal notranslate"><span class="pre">align_seqs_better.py</span></code>.</p></li>
</ul>
</section>
<section id="missing-oaks-problem">
<h3>Missing oaks problem<a class="headerlink" href="#missing-oaks-problem" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Open and run the code <code class="docutils literal notranslate"><span class="pre">oaks_debugme.py</span></code> — there’s a bug, for no oaks are being found! (<em>where’s <code class="docutils literal notranslate"><span class="pre">TestOaksData.csv</span></code>?</em> — in the <code class="docutils literal notranslate"><span class="pre">data</span></code> directory of TheMulQuaBio repo!)</p></li>
<li><p>Fix the bug (e.g., you could insert a debugging breakpoint using <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">ipdb;</span> <span class="pre">ipdb.set_trace()</span></code>)</p></li>
<li><p>Now, write doctests to make sure that, bug or no bug, your <code class="docutils literal notranslate"><span class="pre">is_an_oak</span></code> function is working as expected (hint: <code class="docutils literal notranslate"><span class="pre">&gt;&gt;&gt;</span> <span class="pre">is_an_oak('Fagus</span> <span class="pre">sylvatica')</span></code> should return <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
</ul>
<p>If you wrote good doctests, you will find another bug that you might not have by just debugging (hint: what happens if you try the doctest with “Quercuss” instead of “Quercus”? Should this pass or fail?).</p>
<ul class="simple">
<li><p>Modify your doctests approriately, and  modify your script such that it can handle cases where there is a typo (such as ‘Quercuss’) or there is a genus name that is not strictly ‘Quercus’.</p></li>
</ul>
</section>
<section id="groupwork-practical-on-missing-oaks-problem">
<h3>Groupwork Practical on Missing oaks problem<a class="headerlink" href="#groupwork-practical-on-missing-oaks-problem" title="Link to this heading">#</a></h3>
<p>You might have noticed that the headers in the data column are being included in the program as if they were a genus and species. That is, the first block of the program’s output is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="s1">&#39;Genus&#39;</span>,<span class="w"> </span><span class="s1">&#39; species&#39;</span><span class="o">]</span>
The<span class="w"> </span>genus<span class="w"> </span>is:
Genus
</pre></div>
</div>
<ul class="simple">
<li><p>Modify the script so that it excludes the header row (if it exists) in its search for oaks in a given dataset.</p></li>
<li><p>You might also have noticed that the output of the program writes a new file containing just the names of oaks. However, it does not include the column headers (“Genus”, “species”). Fix this.</p></li>
</ul>
</section>
<section id="practicals-wrap-up">
<h3>Practicals wrap-up<a class="headerlink" href="#practicals-wrap-up" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Review and make sure you can run all the commands, code fragments, and scripts we have till now and get the expected outputs — all scripts should work on any other linux laptop.</p></li>
<li><p><em>Don’t forget to add docstrings where necessary/appropriate.</em></p></li>
<li><p>Test all your scripts by running from the bash terminal in additon to from within the ipython shell (and try both <code class="docutils literal notranslate"><span class="pre">python</span></code> and <code class="docutils literal notranslate"><span class="pre">ipython</span></code> to run in the bash terminal)</p></li>
<li><p>Include an appropriate docstring (if one is missing) at the beginning of <code class="docutils literal notranslate"><span class="pre">*each*</span></code> of each of the python script/ module files you have written, as well as at the start of every function (sub-module) in a module.</p></li>
<li><p>Also annotate your code lines as much and as often as necessary using <code class="docutils literal notranslate"><span class="pre">#</span></code>.</p></li>
<li><p>Keep all code files organized in <code class="docutils literal notranslate"><span class="pre">code</span></code> in your weekly directory in your coursework repository (e.g., in CMEECourseWork/Week2).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code>, <code class="docutils literal notranslate"><span class="pre">commit</span></code> and <code class="docutils literal notranslate"><span class="pre">push</span></code> all your code and data files to your git repository by given deadline.</p></li>
</ul>
<hr class="docutils" />
<figure class="align-default" id="xkcd-on-python">
<a class="reference internal image-reference" href="../_images/python.png"><img alt="XKCD on Python" src="../_images/python.png" style="width: 300px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 13 </span><span class="caption-text"><strong>Is python the most common answer to your daily programming needs?</strong> Possibly! <br>
(Source: <a class="reference external" href="http://xkcd.com">XKCD</a>)</span><a class="headerlink" href="#xkcd-on-python" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
</section>
<hr class="docutils" />
<section id="numerical-computing-in-python">
<h2>Numerical computing in Python<a class="headerlink" href="#numerical-computing-in-python" title="Link to this heading">#</a></h2>
<p>Python is a good choice for numerical computing (recall <a class="reference internal" href="#python-why-python"><span class="std std-ref">this comparison</span></a>). Using the right packages, you can do some serious number crunching in Python.</p>
<p>We will use the <code class="docutils literal notranslate"><span class="pre">numpy</span></code> and <code class="docutils literal notranslate"><span class="pre">scipy</span></code> packages. The latter offers a data structure called numpy array that is suitable for efficient computing, along with basic operations on these arrays.</p>
<p>On the other hand, scipy is proper numerical computing package (which <em>uses</em> numpy arrays) that can do a lot of things, including:</p>
<ul class="simple">
<li><p>Linear algebra (matrix and vector operations) using <code class="docutils literal notranslate"><span class="pre">scipy.linalg</span></code></p></li>
<li><p>Dealing with sparse matrix problems using <code class="docutils literal notranslate"><span class="pre">scipy.sparse</span></code></p></li>
<li><p>Numerical integration (including solving of Ordinary Differential Equations (ODEs)) using <code class="docutils literal notranslate"><span class="pre">scipy.integrate</span></code></p></li>
<li><p>Random number generation and using statistical functions and transformations using <code class="docutils literal notranslate"><span class="pre">scipy.stats</span></code></p></li>
<li><p>Optimization using <code class="docutils literal notranslate"><span class="pre">scipy.optimize</span></code></p></li>
<li><p>Fourier transforms using <code class="docutils literal notranslate"><span class="pre">scipy.fft</span></code></p></li>
<li><p>Signal Processing using <code class="docutils literal notranslate"><span class="pre">scipy.signal</span></code></p></li>
</ul>
<p>We will learn more about scipy further below. First, let’s start with <code class="docutils literal notranslate"><span class="pre">numpy</span></code>.</p>
<section id="numpy">
<h3>Numpy<a class="headerlink" href="#numpy" title="Link to this heading">#</a></h3>
<p>Numpy provides the <code class="docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code> data structure, along with methods for for data creation, manipulations and basic numerical calculations. Numpy arrays are similar in some respects to Python lists, but are homogeneous in type (the default is float), allow efficient (fast) manipulations, and are more naturally multidimensional (e.g., you can store multiple matrices in one array).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>numpy arrays are analogous to the <a class="reference internal" href="R.html#r-matrices"><span class="std std-ref">R <code class="docutils literal notranslate"><span class="pre">matrix</span></code></span></a> data structure.</p>
</div>
<p>Let’s start by importing numpy:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span> <span class="c1"># a one-dimensional array</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([0, 1, 2, 3, 4])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;numpy.ndarray&#39;&gt;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;numpy.int64&#39;&gt;
</pre></div>
</div>
</div>
</div>
<p>Thus the last two outputs tell you that firstly, that numpy arrays belong to a data structure type (and a class) called <code class="docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>, and secondly, that at position <code class="docutils literal notranslate"><span class="pre">0</span></code> (remember, Python indexing starts at 0) it holds an <a class="reference external" href="https://en.wikipedia.org/wiki/9,223,372,036,854,775,807">64 bit integer</a>. All elements in <code class="docutils literal notranslate"><span class="pre">a</span></code> are of type <code class="docutils literal notranslate"><span class="pre">int</span></code> because that is what <code class="docutils literal notranslate"><span class="pre">range()</span></code> returns (try <code class="docutils literal notranslate"><span class="pre">?range</span></code>).</p>
<hr class="docutils" />
<figure class="align-default" id="python-numpy-array">
<a class="reference internal image-reference" href="../_images/numpyarray.png"><img alt="Python numpy array" src="../_images/numpyarray.png" style="width: 700px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 14 </span><span class="caption-text"><strong>A graphical depiction of numpy/numpy arrays.</strong> These can have multiple dimensions (even greater than 3). <br>
(Source: <a class="reference external" href="http://pages.physics.cornell.edu/~myers/teaching/ComputationalMethods/python/arrays.html">http://pages.physics.cornell.edu/~myers/teaching/ComputationalMethods/python/arrays.html</a>)</span><a class="headerlink" href="#python-numpy-array" title="Link to this image">#</a></p>
</figcaption>
</figure>
<hr class="docutils" />
<p>You can also specify the data type of the array:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="nb">float</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([0., 1., 2., 3., 4.])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">dtype</span> <span class="c1"># Check type </span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dtype(&#39;float64&#39;)
</pre></div>
</div>
</div>
</div>
<p>You can also get a 1-D arrays as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">x</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([0, 1, 2, 3, 4])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">5.</span><span class="p">)</span> <span class="c1">#directly specify float using decimal</span>
<span class="n">x</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([0., 1., 2., 3., 4.])
</pre></div>
</div>
</div>
</div>
<p>As with other Python variables (e.g., created as a list or a dictionary), you can apply methods to variables created as numpy arrays. For example, type <code class="docutils literal notranslate"><span class="pre">x.</span></code> and hit TAB to see all methods you can apply to<code class="docutils literal notranslate"><span class="pre">x</span></code>. To see dimensions of <code class="docutils literal notranslate"><span class="pre">x</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(5,)
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Remember, you can type <code class="docutils literal notranslate"><span class="pre">:?x.methodname</span></code> to get info on a particular method (command). For example, try <code class="docutils literal notranslate"><span class="pre">?x.shape</span></code>.</p>
</div>
<p>You can also convert to and from Python lists (recall <a class="reference internal" href="#python-comprehensions"><span class="std std-ref">list comprehensions</span></a> from the <a class="reference internal" href="#"><span class="std std-doc">Python I chapter</span></a>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">])</span> <span class="c1">#odd numbers between 1 and 10 </span>
<span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([1, 3, 5, 7, 9])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="c1">#convert back to list</span>
<span class="n">c</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 3, 5, 7, 9]
</pre></div>
</div>
</div>
</div>
<p>To make a matrix, you need a 2-D numpy array:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
<span class="n">mat</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[0, 1],
       [2, 3]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2, 2)
</pre></div>
</div>
</div>
</div>
</section>
<section id="indexing-and-accessing-arrays">
<h3>Indexing and accessing arrays<a class="headerlink" href="#indexing-and-accessing-arrays" title="Link to this heading">#</a></h3>
<p>As with other Python data objects such as lists, numpy array elements can be accessed using square brackets (<code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">]</span></code>) with the usual <code class="docutils literal notranslate"><span class="pre">[row,column]</span></code> reference. Indexing of numpy arrays works like that for other data structures, with index values starting at 0. So, you can obtain all the elements of a particular row as:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># accessing whole 2nd row, remember indexing starts at  0</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([2, 3])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span> <span class="c1">#accessing whole second column  </span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([1, 3])
</pre></div>
</div>
</div>
</div>
<p>And accessing particular elements:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># 1st row, 1st column element</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>np.int64(0)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># 2nd row, 1st column element</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>np.int64(2)
</pre></div>
</div>
</div>
</div>
<p>Note that (like all other programming languages) row index always comes before column index. That is, <code class="docutils literal notranslate"><span class="pre">mat[1]</span></code> is always going to mean “whole second row”, and <code class="docutils literal notranslate"><span class="pre">mat[1,1]</span></code> means 1st row and 1st column element. Therefore, to access the whole second column, you need:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span> <span class="c1">#accessing whole first column  </span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([0, 2])
</pre></div>
</div>
</div>
</div>
<p>Python indexing also accepts negative values for going back to the start
from the end of an array:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>np.int64(1)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>np.int64(1)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>np.int64(2)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>np.int64(0)
</pre></div>
</div>
</div>
</div>
<p>Very interesting, but rather useless for this simple matrix!</p>
</section>
<section id="manipulating-arrays">
<h3>Manipulating arrays<a class="headerlink" href="#manipulating-arrays" title="Link to this heading">#</a></h3>
<p>Manipulating numpy arrays is pretty straightforward.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Why numpy arrays are computationally efficient:</strong>  The data associated with a numpy array object (its metadata  – number of dimensions, shape, data type, etc – as well as the actual data) are stored in a homogeneous and contiguous block of memory (a “data buffer”), at a particular address in the system’s RAM (Random Access Memory). This makes numpy arrays more efficient than a pure Python data structures like lists whose data are scattered across the system memory.</p>
</div>
<section id="replacing-adding-or-deleting-elements">
<h4>Replacing, adding or deleting elements<a class="headerlink" href="#replacing-adding-or-deleting-elements" title="Link to this heading">#</a></h4>
<p>Let’s look at how you can replace, add, or delete an array element (a single entry, or whole row(s) or whole column(s)):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="c1">#replace a single element</span>
<span class="n">mat</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[-1,  1],
       [ 2,  3]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">]</span> <span class="c1">#replace whole column</span>
<span class="n">mat</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[12,  1],
       [12,  3]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span> <span class="p">[[</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">]],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#append row, note axis specification</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[12,  1],
       [12,  3],
       [12, 12]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span> <span class="p">[[</span><span class="mi">12</span><span class="p">],[</span><span class="mi">12</span><span class="p">]],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">#append column</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[12,  1, 12],
       [12,  3, 12]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">newRow</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">]]</span> <span class="c1">#create new row</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span> <span class="n">newRow</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#append that existing row</span>
<span class="n">mat</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[12,  1],
       [12,  3],
       [12, 12]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#Delete 3rd row</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[12,  1],
       [12,  3]])
</pre></div>
</div>
</div>
</div>
<p>And concatenation:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
<span class="n">mat0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
<span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">mat</span><span class="p">,</span> <span class="n">mat0</span><span class="p">),</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[ 0,  1],
       [ 2,  3],
       [ 0, 10],
       [-1,  3]])
</pre></div>
</div>
</div>
</div>
</section>
<section id="flattening-or-reshaping-arrays">
<h4>Flattening or reshaping arrays<a class="headerlink" href="#flattening-or-reshaping-arrays" title="Link to this heading">#</a></h4>
<p>You can also “flatten” or “melt” arrays, that is, change array dimensions (e.g., from a matrix to a vector):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([0, 1, 2, 3])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[0],
       [1],
       [2],
       [3]])
</pre></div>
</div>
</div>
</div>
<p>This is different from ravel: check the documentation by using <code class="docutils literal notranslate"><span class="pre">?np.reshape</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[0, 1, 2, 3]])
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You might have noticed that flattening and reshaping is “row-priority”: elements of the vector are allocated to a matrix row-wise, and vice versa(e.g., with <code class="docutils literal notranslate"><span class="pre">ravel</span></code> unraveling also happens row by row).</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">234</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">mat</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

<span class="ne">ValueError</span>: cannot reshape array of size 4 into shape (3,1)
</pre></div>
</div>
</div>
</div>
<p>This gives an error because total elements must remain the same!</p>
<p>This is a bit different than how <a class="reference internal" href="R.html#r-recycling"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">R</span></code> behaves</span></a>, where you won’t get an error (R “recycles” data) (which can be dangerous!)</p>
</section>
</section>
<section id="pre-allocating-arrays">
<h3>Pre-allocating arrays<a class="headerlink" href="#pre-allocating-arrays" title="Link to this heading">#</a></h3>
<p>As in other computer languages, it is usually more efficient to preallocate an array rather than append / insert / concatenate additional elements, rows, or columns. <em>Why</em>? – because you might run out of contiguous space in the specific system memory (RAM) address where the current array is stored. Preallocation allocates all the RAM memory you need in one call, while resizing the array (through <code class="docutils literal notranslate"><span class="pre">append</span></code>, <code class="docutils literal notranslate"><span class="pre">insert</span></code>, <code class="docutils literal notranslate"><span class="pre">concatenate</span></code>, <code class="docutils literal notranslate"><span class="pre">resize</span></code>, etc.) may require copying the array to a larger block of memory, slowing things down, and significantly so if the matrix/array is very large.</p>
<p>For example, if you know the size of your matrix or array, you can initialize it with ones or zeros:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[1., 1.],
       [1., 1.],
       [1., 1.],
       [1., 1.]])
</pre></div>
</div>
</div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">(4,2)</span></code> are the (row,col) array dimensions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="c1"># or zeros</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[0., 0.],
       [0., 0.],
       [0., 0.],
       [0., 0.]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">identity</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="c1">#create an identity matrix</span>
<span class="n">m</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[1., 0., 0., 0.],
       [0., 1., 0., 0.],
       [0., 0., 1., 0.],
       [0., 0., 0., 1.]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="c1">#fill the matrix with 16</span>
<span class="n">m</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[16., 16., 16., 16.],
       [16., 16., 16., 16.],
       [16., 16., 16., 16.],
       [16., 16., 16., 16.]])
</pre></div>
</div>
</div>
</div>
</section>
<section id="numpy-matrices">
<h3><code class="docutils literal notranslate"><span class="pre">numpy</span></code> matrices<a class="headerlink" href="#numpy-matrices" title="Link to this heading">#</a></h3>
<p>Scipy/Numpy also has a <code class="docutils literal notranslate"><span class="pre">matrix</span></code> data structure class. Numpy matrices are strictly 2-dimensional, while numpy arrays are N-dimensional. Matrix objects are a subclass of numpy arrays, so they inherit all the attributes and methods of numpy arrays (ndarrays).</p>
<p>The main advantage of scipy matrices is that they provide a convenient notation for matrix multiplication: for example, if <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> are matrices, then <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">*</span> <span class="pre">b</span></code> is their matrix product.</p>
<section id="matrix-vector-operations">
<h4>Matrix-vector operations<a class="headerlink" href="#matrix-vector-operations" title="Link to this heading">#</a></h4>
<p>Now let’s perform some common matrix-vector operations on arrays (you can also try the same using matrices instead of arrays):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="n">mm</span> <span class="o">=</span> <span class="n">mm</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="c1">#Convert to matrix</span>
<span class="n">mm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [12, 13, 14, 15]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mm</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[ 0,  4,  8, 12],
       [ 1,  5,  9, 13],
       [ 2,  6, 10, 14],
       [ 3,  7, 11, 15]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mm</span> <span class="o">+</span> <span class="n">mm</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[ 0,  5, 10, 15],
       [ 5, 10, 15, 20],
       [10, 15, 20, 25],
       [15, 20, 25, 30]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mm</span> <span class="o">-</span> <span class="n">mm</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[ 0, -3, -6, -9],
       [ 3,  0, -3, -6],
       [ 6,  3,  0, -3],
       [ 9,  6,  3,  0]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mm</span> <span class="o">*</span> <span class="n">mm</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span> <span class="c1"># Note that this is element-wise multiplication</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[  0,   4,  16,  36],
       [  4,  25,  54,  91],
       [ 16,  54, 100, 154],
       [ 36,  91, 154, 225]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mm</span> <span class="o">//</span> <span class="n">mm</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_106845/1630225829.py:1: RuntimeWarning: divide by zero encountered in floor_divide
  mm // mm.transpose()
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[0, 0, 0, 0],
       [4, 1, 0, 0],
       [4, 1, 1, 0],
       [4, 1, 1, 1]])
</pre></div>
</div>
</div>
</div>
<p>Note that we used integer division <code class="docutils literal notranslate"><span class="pre">//</span></code>. Note also the warning you get (because of zero division). So let’s avoid the divide by zero:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mm</span> <span class="o">//</span> <span class="p">(</span><span class="n">mm</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[0, 0, 0, 0],
       [2, 0, 0, 0],
       [2, 1, 0, 0],
       [3, 1, 1, 0]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mm</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[ 0.        ,  3.14159265,  6.28318531,  9.42477796],
       [12.56637061, 15.70796327, 18.84955592, 21.99114858],
       [25.13274123, 28.27433388, 31.41592654, 34.55751919],
       [37.69911184, 40.8407045 , 43.98229715, 47.1238898 ]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mm</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mm</span><span class="p">)</span> <span class="c1"># No this is matric multiplication, or the dot product</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[ 56,  62,  68,  74],
       [152, 174, 196, 218],
       [248, 286, 324, 362],
       [344, 398, 452, 506]])
</pre></div>
</div>
</div>
</div>
<p>There is also a numpy matrix class:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">matrix</span><span class="p">(</span><span class="n">mm</span><span class="p">)</span> <span class="c1"># convert to scipy/numpy matrix class</span>
<span class="n">mm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>matrix([[ 0,  1,  2,  3],
        [ 4,  5,  6,  7],
        [ 8,  9, 10, 11],
        [12, 13, 14, 15]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">mm</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;numpy.matrix&#39;&gt;
</pre></div>
</div>
</div>
</div>
<p>This data structure makes matrix multiplication syntactically easier:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mm</span> <span class="o">*</span> <span class="n">mm</span> <span class="c1"># instead of mm.dot(mm)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>matrix([[ 56,  62,  68,  74],
        [152, 174, 196, 218],
        [248, 286, 324, 362],
        [344, 398, 452, 506]])
</pre></div>
</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>However, it is not recommended that you use the numpy matrix class because it may be removed <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.matrix.html">in the future</a>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can do a lot more with matrices and vectors by importing the <code class="docutils literal notranslate"><span class="pre">linalg</span></code> sub-package from scipy: <code class="docutils literal notranslate"><span class="pre">scipy.linalg</span></code>.</p>
</div>
</section>
</section>
<section id="the-scipy-package">
<h3>The <code class="docutils literal notranslate"><span class="pre">scipy</span></code> package<a class="headerlink" href="#the-scipy-package" title="Link to this heading">#</a></h3>
<p>Now let’s move on to <code class="docutils literal notranslate"><span class="pre">scipy</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>scipy vs numpy</strong>: It’s a bit confusing. Please have a look at <a class="reference external" href="https://scipy.org/faq/#what-is-the-difference-between-numpy-and-scipy">this</a>. Basically, there is some overlap between what these two packages can do, and this redundancy will eventually be phased out completely. The recommended approach is to use numpy for creating and manipulating data and scipy for more complex numerical operations.</p>
</div>
<p>We will look at two particularly useful <code class="docutils literal notranslate"><span class="pre">scipy</span></code> sub-packages here: <code class="docutils literal notranslate"><span class="pre">scipy.stats</span></code> and <code class="docutils literal notranslate"><span class="pre">scipy.integrate</span></code>.</p>
<section id="scipy-stats">
<span id="python-scipy-stats"></span><h4>Scipy stats<a class="headerlink" href="#scipy-stats" title="Link to this heading">#</a></h4>
<p>Let’s take a quick spin in <code class="docutils literal notranslate"><span class="pre">scipy.stats</span></code>.</p>
<p><em>Why not use <code class="docutils literal notranslate"><span class="pre">R</span></code> for stats?</em> — because often you might just need to calculate some summary stats of your simulation results within Python, or you simulations may require the generation of random numbers.</p>
<p>First, import scipy:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">scipy</span> <span class="k">as</span> <span class="nn">sc</span>
</pre></div>
</div>
</div>
</div>
<p>Or you can use <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">scipy</span> <span class="pre">import</span> <span class="pre">stats</span></code>.</p>
<p>Let’s generate 10 samples from the normal distribution (<span class="math notranslate nohighlight">\(\mathcal{N}(\mu,\,\sigma^{2})\)</span>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sc</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 0.24180563, -0.46723522,  0.46896934,  0.46658917,  2.17949559,
        0.71902449, -0.38173396,  2.18465835, -1.08248687,  0.10335904])
</pre></div>
</div>
</div>
</div>
<p>By default, <a class="reference internal" href="R.html#r-random-numbers"><span class="std std-ref">as in R</span></a>, these are numbers from the <em>standard</em> normal distribution (<span class="math notranslate nohighlight">\(\mathcal{N}(0,\,1)\)</span>).</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Continuing on the numpy vs scipy theme</strong>: Both scipy and numpy can generate random numbers (e.g., <code class="docutils literal notranslate"><span class="pre">np.random.normal(size=10)</span></code> would work equally well above). In fact, scipy uses the <code class="docutils literal notranslate"><span class="pre">numpy.random</span></code> package under the hood for drawing random numbers. You may choose to use either, but for sanity, its probably a good idea to just stick with <code class="docutils literal notranslate"><span class="pre">scipy.stats</span></code> for all your stats number crunching.</p>
</div>
<p>Also, as you learned <a class="reference internal" href="R.html#r-random-numbers"><span class="std std-ref">in R</span></a>, you can “seed” random numbers to get the same sequence every time (important for reproducibility – when you need to know what specific random numbers were input into a particular program routine or algorithm).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1234</span><span class="p">)</span>
<span class="n">sc</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 0.47143516, -1.19097569,  1.43270697, -0.3126519 , -0.72058873,
        0.88716294,  0.85958841, -0.6365235 ,  0.01569637, -2.24268495])
</pre></div>
</div>
</div>
</div>
<p>But setting a <em>global</em> random number state is not always needed or in some many cases, recommended, because using something like <code class="docutils literal notranslate"><span class="pre">np.random.seed(1234)</span></code> will set the seed for all following instances where a random number is generated. In many scenarios a more robust way is to use the <code class="docutils literal notranslate"><span class="pre">random_state</span></code> argument for each specific generation of a set of random numbers:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sc</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">1234</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 0.47143516, -1.19097569,  1.43270697, -0.3126519 , -0.72058873])
</pre></div>
</div>
</div>
</div>
<p>We will not move on from <code class="docutils literal notranslate"><span class="pre">scipy.stats</span></code>. Before we do so, here’s an example of generating random integers between 0 and 10:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sc</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">randint</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([5, 0, 9, 6, 2, 0, 5])
</pre></div>
</div>
</div>
</div>
<p>And again with a random seed:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sc</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">randint</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">1234</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([3, 6, 5, 4, 8, 9, 1])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sc</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">randint</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">3445</span><span class="p">)</span> <span class="c1"># a different seed</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([8, 1, 9, 6, 8, 6, 0])
</pre></div>
</div>
</div>
</div>
</section>
<section id="numerical-integration-using-scipy">
<h4>Numerical integration using  <code class="docutils literal notranslate"><span class="pre">scipy</span></code><a class="headerlink" href="#numerical-integration-using-scipy" title="Link to this heading">#</a></h4>
<p>OK, on to to and <code class="docutils literal notranslate"><span class="pre">scipy.integrate</span></code>.</p>
<p>Numerical integration is the approximate computation of an integral using numerical techniques. You need numerical integration whenever you have a complicated function that cannot be integrated analytically using anti-derivatives. For example, calculating the area under a curve is a particularly useful application. Another one is solving ordinary differential equations (ODEs), commonly used for modelling biological systems.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">scipy.integrate</span> <span class="k">as</span> <span class="nn">integrate</span>
</pre></div>
</div>
</div>
</div>
<section id="area-under-a-curve">
<h5>Area under a curve<a class="headerlink" href="#area-under-a-curve" title="Link to this heading">#</a></h5>
<p>Let’s calculate the area under an arbitrary curve.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span> <span class="c1"># The y values; can also use a python list here</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s visualize the curve. We can use the <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> package for this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pylab</span> <span class="k">as</span> <span class="nn">p</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.lines.Line2D at 0x799c85793c70&gt;]
</pre></div>
</div>
<img alt="../_images/67ba02072d9bc46a177ececfccdd56343cfaabe64245ea5c528c3d653feadff7.png" src="../_images/67ba02072d9bc46a177ececfccdd56343cfaabe64245ea5c528c3d653feadff7.png" />
</div>
</div>
<p>Now compute the area using the <a class="reference external" href="https://en.wikipedia.org/wiki/Trapezoidal_rule">composite trapezoidal rule</a>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">area</span> <span class="o">=</span> <span class="n">integrate</span><span class="o">.</span><span class="n">trapezoid</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">dx</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;area =&quot;</span><span class="p">,</span> <span class="n">area</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>area = 173.0
</pre></div>
</div>
</div>
</div>
<p>The argument <code class="docutils literal notranslate"><span class="pre">dx</span></code> defines the spacing between points of the curve (the x-axis values). The default is 1 (don’t forget to check out the documentation: <code class="docutils literal notranslate"><span class="pre">?integrate.trapezoid</span></code>). Changing this will change the area, of course:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">area</span> <span class="o">=</span> <span class="n">integrate</span><span class="o">.</span><span class="n">trapezoid</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">dx</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;area =&quot;</span><span class="p">,</span> <span class="n">area</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>area = 86.5
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">area</span> <span class="o">=</span> <span class="n">integrate</span><span class="o">.</span><span class="n">trapezoid</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">dx</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;area =&quot;</span><span class="p">,</span> <span class="n">area</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>area = 259.5
</pre></div>
</div>
</div>
</div>
<p>Now, the same, using <a class="reference external" href="https://en.wikipedia.org/wiki/Simpson%27s_rule">Simpson’s rule</a>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">area</span> <span class="o">=</span> <span class="n">integrate</span><span class="o">.</span><span class="n">simpson</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">dx</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;area =&quot;</span><span class="p">,</span> <span class="n">area</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>area = 176.66666666666666
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">area</span> <span class="o">=</span> <span class="n">integrate</span><span class="o">.</span><span class="n">simpson</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">dx</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;area =&quot;</span><span class="p">,</span> <span class="n">area</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>area = 88.33333333333333
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">area</span> <span class="o">=</span> <span class="n">integrate</span><span class="o">.</span><span class="n">simpson</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">dx</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;area =&quot;</span><span class="p">,</span> <span class="n">area</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>area = 265.0
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are alternatives to matplotlib for visualizations in Python. Check out <a class="reference external" href="https://bokeh.pydata.org/en/latest"><code class="docutils literal notranslate"><span class="pre">bokeh</span></code></a>, <a class="reference external" href="https://plot.ly/"><code class="docutils literal notranslate"><span class="pre">plotly</span></code></a> and <a class="reference external" href="https://altair-viz.github.io/"><code class="docutils literal notranslate"><span class="pre">altair</span></code></a>. Also, there is seaborn, which is built directly on Matplotlib. Examples using <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> can be found in some of the appendices of these notes.</p>
</div>
</section>
<section id="the-lotka-volterra-model">
<h5>The Lotka-Volterra model<a class="headerlink" href="#the-lotka-volterra-model" title="Link to this heading">#</a></h5>
<p>Now let’s try numerical integration in Python for solving a classical model in biology — the Lotka-Volterra (LV) model for a predator-prey system in two-dimensional space (e.g., on land). The LV model is:</p>
<div class="amsmath math notranslate nohighlight" id="equation-bb744b22-a1e1-42c5-85ee-49f2c4291131">
<span class="eqno">(2)<a class="headerlink" href="#equation-bb744b22-a1e1-42c5-85ee-49f2c4291131" title="Permalink to this equation">#</a></span>\[\begin{align}
    \frac{dR}{dt} &amp;= r R - a C R  \nonumber \\
    \frac{dC}{dt} &amp;= - z C + e a C R
\end{align}\]</div>
<p>where,</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(C\)</span> and <span class="math notranslate nohighlight">\(R\)</span> are consumer (e.g., predator) and resource (e.g., prey) population abundances (either number <span class="math notranslate nohighlight">\(\times\)</span> area<span class="math notranslate nohighlight">\(^{-1}\)</span> ).</p></li>
<li><p><span class="math notranslate nohighlight">\(r\)</span> is the intrinsic (per-capita) growth rate of the resource population (time<span class="math notranslate nohighlight">\(^{-1}\)</span>).</p></li>
<li><p><span class="math notranslate nohighlight">\(a\)</span> is per-capita “search rate” for the resource (<span class="math notranslate nohighlight">\(\text{area}\times \text{time}^{-1}\)</span>)  multiplied by its attack success probability, which determines the encounter and consumption rate of the consumer on the resource.</p></li>
<li><p><span class="math notranslate nohighlight">\(z\)</span> is mortality rate (<span class="math notranslate nohighlight">\(\text{time}^{-1}\)</span>) and <span class="math notranslate nohighlight">\(e\)</span> is the consumer’s efficiency (a fraction) in converting resource to consumer biomass.</p></li>
</ul>
<p>We have already imported scipy above (<code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">scipy</span> <span class="pre">as</span> <span class="pre">sc</span></code>) so we can proceed to solve the LV model using numerical integration.</p>
<p>First, import <code class="docutils literal notranslate"><span class="pre">scipy</span></code>’s <code class="docutils literal notranslate"><span class="pre">integrate</span></code> submodule:</p>
<p>Now define a function that returns the growth rate of consumer and resource population at any given time step.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">dCR_dt</span><span class="p">(</span><span class="n">pops</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>

    <span class="n">R</span> <span class="o">=</span> <span class="n">pops</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">C</span> <span class="o">=</span> <span class="n">pops</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">dRdt</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">R</span> <span class="o">-</span> <span class="n">a</span> <span class="o">*</span> <span class="n">R</span> <span class="o">*</span> <span class="n">C</span> 
    <span class="n">dCdt</span> <span class="o">=</span> <span class="o">-</span><span class="n">z</span> <span class="o">*</span> <span class="n">C</span> <span class="o">+</span> <span class="n">e</span> <span class="o">*</span> <span class="n">a</span> <span class="o">*</span> <span class="n">R</span> <span class="o">*</span> <span class="n">C</span>
    
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">dRdt</span><span class="p">,</span> <span class="n">dCdt</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">dCR_dt</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>function
</pre></div>
</div>
</div>
</div>
<p>So <code class="docutils literal notranslate"><span class="pre">dCR_dt</span></code> has been stored as a function object in the current Python session, all ready to go.</p>
<p>Now assign some parameter values:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="mf">1.</span>
<span class="n">a</span> <span class="o">=</span> <span class="mf">0.1</span> 
<span class="n">z</span> <span class="o">=</span> <span class="mf">1.5</span>
<span class="n">e</span> <span class="o">=</span> <span class="mf">0.75</span>
</pre></div>
</div>
</div>
</div>
<p>Define the time vector; let’s integrate from time point 0 to 15, using 1000 sub-divisions of time:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Note that the units of time are arbitrary here.</p>
<p>Set the initial conditions for the two populations (10 resources and 5 consumers per unit area), and convert the two into an array (because our <code class="docutils literal notranslate"><span class="pre">dCR_dt</span></code> function take an array as input).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">R0</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">C0</span> <span class="o">=</span> <span class="mi">5</span> 
<span class="n">RC0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">R0</span><span class="p">,</span> <span class="n">C0</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>Now numerically integrate this system forward from those starting conditions:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pops</span><span class="p">,</span> <span class="n">infodict</span> <span class="o">=</span> <span class="n">integrate</span><span class="o">.</span><span class="n">odeint</span><span class="p">(</span><span class="n">dCR_dt</span><span class="p">,</span> <span class="n">RC0</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">full_output</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pops</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[10.        ,  5.        ],
       [10.07578091,  4.94421976],
       [10.1529783 ,  4.88948321],
       ...,
       [ 9.99869712, 17.56204194],
       [ 9.8872779 , 17.3642589 ],
       [ 9.78000354, 17.16658946]])
</pre></div>
</div>
</div>
</div>
<p>So <code class="docutils literal notranslate"><span class="pre">pops</span></code> contains the result (the population trajectories).  Also check what’s in infodict (it’s a  dictionary with additional information)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">infodict</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dict
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">infodict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dict_keys([&#39;hu&#39;, &#39;tcur&#39;, &#39;tolsf&#39;, &#39;tsw&#39;, &#39;nst&#39;, &#39;nfe&#39;, &#39;nje&#39;, &#39;nqu&#39;, &#39;imxer&#39;, &#39;lenrw&#39;, &#39;leniw&#39;, &#39;mused&#39;, &#39;message&#39;])
</pre></div>
</div>
</div>
</div>
<p>Check what the <code class="docutils literal notranslate"><span class="pre">infodict</span></code> output is by reading the help documentation with <code class="docutils literal notranslate"><span class="pre">?scipy.integrate.odeint</span></code>. For example, you can return a message to screen about whether the integration was successful:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">infodict</span><span class="p">[</span><span class="s1">&#39;message&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Integration successful.&#39;
</pre></div>
</div>
</div>
</div>
<p>So it worked, great!</p>
<p>But we would like to visualize the results. Let’s do it using the <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> package.</p>
<p>Again, to visualize the results of your numerical simulations in Python (or for data exploration/analyses), you can use <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, which uses Matlab like plotting syntax.</p>
<p>First import the package:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pylab</span> <span class="k">as</span> <span class="nn">p</span>
</pre></div>
</div>
</div>
</div>
<p>Now open an empty figure object (analogous to an R graphics object).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f1</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 640x480 with 0 Axes&gt;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">pops</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;g-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Resource density&#39;</span><span class="p">)</span> <span class="c1"># Plot</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">pops</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span>  <span class="p">,</span> <span class="s1">&#39;b-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Consumer density&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Time&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Population density&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Consumer-Resource population dynamics&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">show</span><span class="p">()</span><span class="c1"># To display the figure</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/3607ed6afe7eb2222e35806836558b47d0b6c91b185ac1a86fc4c180f63773e2.png" src="../_images/3607ed6afe7eb2222e35806836558b47d0b6c91b185ac1a86fc4c180f63773e2.png" />
</div>
</div>
<p>Finally, save the figure as a pdf:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f1</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;../results/LV_model.pdf&#39;</span><span class="p">)</span> <span class="c1">#Save figure</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can use many other graphics output formats in matplotlib; check the documentation of <code class="docutils literal notranslate"><span class="pre">p.savefig</span></code>.</p>
</div>
</section>
</section>
</section>
</section>
<section id="id2">
<h2>Practicals<a class="headerlink" href="#id2" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Create a self-standing script using the above example and save it as <code class="docutils literal notranslate"><span class="pre">LV1.py</span></code> in your code directory. In addition to generating the above figure, it should also generate the following figure:</p></li>
</ol>
<hr class="docutils" />
<figure class="align-default" id="lv-phase-plot">
<a class="reference internal image-reference" href="../_images/LV_model_CR.png"><img alt="Lotka-Volterra phase plot" src="../_images/LV_model_CR.png" style="width: 400px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 15 </span><span class="caption-text"><strong>Generate this figure as part of the <code class="docutils literal notranslate"><span class="pre">LV1.py</span></code> script.</strong></span><a class="headerlink" href="#lv-phase-plot" title="Link to this image">#</a></p>
</figcaption>
</figure>
<hr class="docutils" />
<p>It should save both figures in pdf to the <code class="docutils literal notranslate"><span class="pre">results</span></code> directory, <em>without displaying them on screen</em>.</p>
</section>
<section id="the-need-for-speed-profiling-code">
<h2>The need for speed: profiling code<a class="headerlink" href="#the-need-for-speed-profiling-code" title="Link to this heading">#</a></h2>
<p>Donald Knuth says: <em>Premature optimization is the root of all evil</em>.</p>
<p>Indeed, computational speed may not be your initial concern. Also, you should focus on developing clean, reliable, reusable code rather than worrying first about how fast your code runs. However, speed will become an issue when and if your analysis or modeling becomes complex enough (e.g., food web or large network simulations). In that case, knowing which parts of your code take the most time is useful – optimizing those parts may save you lots of time.</p>
<section id="profiling">
<h3>Profiling<a class="headerlink" href="#profiling" title="Link to this heading">#</a></h3>
<p>To find out what is slowing down your code you need to “profile” your code: locate the sections of your code where  speed bottlenecks exist.</p>
<p>Profiling is easy in <code class="docutils literal notranslate"><span class="pre">ipython</span></code> – simply use the command:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">run</span> <span class="o">-</span><span class="n">p</span> <span class="n">your_function_name</span>
</pre></div>
</div>
<p>Let’s write an illustrative program (name it <code class="docutils literal notranslate"><span class="pre">profileme.py</span></code>) and run it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_squares</span><span class="p">(</span><span class="n">iters</span><span class="p">):</span>
    <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iters</span><span class="p">):</span>
        <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>

<span class="k">def</span> <span class="nf">my_join</span><span class="p">(</span><span class="n">iters</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
    <span class="n">out</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iters</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">+=</span> <span class="n">string</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>

<span class="k">def</span> <span class="nf">run_my_funcs</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
    <span class="n">my_squares</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">my_join</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">0</span>

<span class="n">run_my_funcs</span><span class="p">(</span><span class="mi">10000000</span><span class="p">,</span><span class="s2">&quot;My string&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>10000000 My string
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
</div>
</div>
<p>Look carefully at what each of these functions does.</p>
<p>Now run the script with <code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">-p</span> <span class="pre">profileme.py</span></code>, and you should see something like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w">        </span><span class="m">20000063</span><span class="w"> </span><span class="k">function</span><span class="w"> </span>calls<span class="w"> </span><span class="o">(</span><span class="m">20000062</span><span class="w"> </span>primitive<span class="w"> </span>calls<span class="o">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">9</span>.026<span class="w"> </span>seconds

<span class="w">   </span>Ordered<span class="w"> </span>by:<span class="w"> </span>internal<span class="w"> </span><span class="nb">time</span>

<span class="w">   </span>ncalls<span class="w">  </span>tottime<span class="w">  </span>percall<span class="w">  </span>cumtime<span class="w">  </span>percall<span class="w"> </span>filename:lineno<span class="o">(</span><span class="k">function</span><span class="o">)</span>
<span class="w">        </span><span class="m">1</span><span class="w">    </span><span class="m">3</span>.335<span class="w">    </span><span class="m">3</span>.335<span class="w">    </span><span class="m">3</span>.732<span class="w">    </span><span class="m">3</span>.732<span class="w"> </span>profileme.py:1<span class="o">(</span>my_squares<span class="o">)</span>
<span class="w">        </span><span class="m">1</span><span class="w">    </span><span class="m">2</span>.698<span class="w">    </span><span class="m">2</span>.698<span class="w">    </span><span class="m">5</span>.200<span class="w">    </span><span class="m">5</span>.200<span class="w"> </span>profileme.py:7<span class="o">(</span>my_join<span class="o">)</span>
<span class="w"> </span><span class="m">10000001</span><span class="w">    </span><span class="m">2</span>.502<span class="w">    </span><span class="m">0</span>.000<span class="w">    </span><span class="m">2</span>.502<span class="w">    </span><span class="m">0</span>.000<span class="w"> </span><span class="o">{</span>method<span class="w"> </span><span class="s1">&#39;join&#39;</span><span class="w"> </span>of<span class="w"> </span><span class="s1">&#39;str&#39;</span><span class="w"> </span>objects<span class="o">}</span>
<span class="w"> </span><span class="m">10000008</span><span class="w">    </span><span class="m">0</span>.397<span class="w">    </span><span class="m">0</span>.000<span class="w">    </span><span class="m">0</span>.397<span class="w">    </span><span class="m">0</span>.000<span class="w"> </span><span class="o">{</span>method<span class="w"> </span><span class="s1">&#39;append&#39;</span><span class="w"> </span>of<span class="w"> </span><span class="s1">&#39;list&#39;</span><span class="w"> </span>objects<span class="o">}</span>
<span class="w">        </span><span class="m">1</span><span class="w">    </span><span class="m">0</span>.093<span class="w">    </span><span class="m">0</span>.093<span class="w">    </span><span class="m">9</span>.025<span class="w">    </span><span class="m">9</span>.025<span class="w"> </span>profileme.py:13<span class="o">(</span>run_my_funcs<span class="o">)</span>
<span class="o">[</span>more<span class="w"> </span>output<span class="o">]</span>
</pre></div>
</div>
<p>The column headings in the profiling results are:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Column name</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">filename:lineno(function)</span></code></p></td>
<td><p>The filename, line number, and function name</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ncalls</span></code></p></td>
<td><p>Number of times the function was called</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">tottime</span></code></p></td>
<td><p>Total time spent in the function (excluding time spent in calls to sub-functions of that function)</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">percall</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">tottime</span></code> divided by <code class="docutils literal notranslate"><span class="pre">ncalls</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">cumtime</span></code></p></td>
<td><p>Cumulative time spent in the function <em>and</em> all its sub-functions</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">percall</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">cumtime</span></code> divided by <code class="docutils literal notranslate"><span class="pre">ncalls</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p>(Please also see the official Python <a class="reference external" href="https://docs.python.org/3.6/library/profile.html">documentation</a>)</p>
<p>The difference between <code class="docutils literal notranslate"><span class="pre">tottime</span></code> and <code class="docutils literal notranslate"><span class="pre">cumtime</span></code> columns often holds the most important information about performance. For example, in the above output, <code class="docutils literal notranslate"><span class="pre">cumtime</span></code> is much higher than <code class="docutils literal notranslate"><span class="pre">tottime</span></code> for <code class="docutils literal notranslate"><span class="pre">my_join</span></code> than for <code class="docutils literal notranslate"><span class="pre">my_squares</span></code>. This is because the sub-function (method) <code class="docutils literal notranslate"><span class="pre">join</span></code> is taking an additional 2.502 seconds (due to 10000001 calls), giving a <code class="docutils literal notranslate"><span class="pre">cumtime</span></code> of 2.698 + 2.502 = 5.2 seconds. In comparison, the sub-function (method) <code class="docutils literal notranslate"><span class="pre">append</span></code> is taking an additional 0.397 seconds (due to 10000008 calls), giving a <code class="docutils literal notranslate"><span class="pre">cumtime</span></code> of 3.335 + 0.397 = 3.732 seconds. Note also that the <code class="docutils literal notranslate"><span class="pre">tottime</span></code>s for <code class="docutils literal notranslate"><span class="pre">join</span></code> and <code class="docutils literal notranslate"><span class="pre">append</span></code> include the “overhead” of running their respective loop.</p>
<p>Thus, we can infer that the <code class="docutils literal notranslate"><span class="pre">my_join</span></code> function is hogging most of the time, followed by <code class="docutils literal notranslate"><span class="pre">my_squares</span></code>, and furthermore, that its the string method <code class="docutils literal notranslate"><span class="pre">join</span></code> that is slowing <code class="docutils literal notranslate"><span class="pre">my_join</span></code> down, and list method <code class="docutils literal notranslate"><span class="pre">append</span></code> that is slowing <code class="docutils literal notranslate"><span class="pre">my_squares</span></code> down. In other words, <code class="docutils literal notranslate"><span class="pre">.join</span></code>ing the string, and <code class="docutils literal notranslate"><span class="pre">.append</span></code>ing values to a list repeatedly are both not particularly fast, though the latter is less costly.</p>
<p>Can we do better? <em>Yes!</em></p>
<p>Let’s try this alternative approach to writing the program (save it as <code class="docutils literal notranslate"><span class="pre">profileme2.py</span></code>, and again, run it):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_squares</span><span class="p">(</span><span class="n">iters</span><span class="p">):</span>
    <span class="n">out</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iters</span><span class="p">)]</span>
    <span class="k">return</span> <span class="n">out</span>

<span class="k">def</span> <span class="nf">my_join</span><span class="p">(</span><span class="n">iters</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
    <span class="n">out</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iters</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> <span class="n">string</span>
    <span class="k">return</span> <span class="n">out</span>

<span class="k">def</span> <span class="nf">run_my_funcs</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
    <span class="n">my_squares</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">my_join</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">0</span>

<span class="n">run_my_funcs</span><span class="p">(</span><span class="mi">10000000</span><span class="p">,</span><span class="s2">&quot;My string&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>10000000 My string
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
</div>
</div>
<p>We did two things: converted the loop to a list comprehension, and replaced the <code class="docutils literal notranslate"><span class="pre">.join</span></code> with an explicit string concatenation.</p>
<p>Now profile this program (<code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">-p</span> <span class="pre">profileme2.py</span></code>), and you should get something like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w">        </span><span class="m">64</span><span class="w"> </span><span class="k">function</span><span class="w"> </span>calls<span class="w"> </span><span class="o">(</span><span class="m">63</span><span class="w"> </span>primitive<span class="w"> </span>calls<span class="o">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">4</span>.585<span class="w"> </span>seconds

<span class="w">   </span>Ordered<span class="w"> </span>by:<span class="w"> </span>internal<span class="w"> </span><span class="nb">time</span>

<span class="w">   </span>ncalls<span class="w">  </span>tottime<span class="w">  </span>percall<span class="w">  </span>cumtime<span class="w">  </span>percall<span class="w"> </span>filename:lineno<span class="o">(</span><span class="k">function</span><span class="o">)</span>
<span class="w">        </span><span class="m">1</span><span class="w">    </span><span class="m">2</span>.497<span class="w">    </span><span class="m">2</span>.497<span class="w">    </span><span class="m">2</span>.497<span class="w">    </span><span class="m">2</span>.497<span class="w"> </span>profileme2.py:2<span class="o">(</span>&lt;listcomp&gt;<span class="o">)</span>
<span class="w">        </span><span class="m">1</span><span class="w">    </span><span class="m">1</span>.993<span class="w">    </span><span class="m">1</span>.993<span class="w">    </span><span class="m">1</span>.993<span class="w">    </span><span class="m">1</span>.993<span class="w"> </span>profileme2.py:5<span class="o">(</span>my_join<span class="o">)</span>
<span class="w">        </span><span class="m">1</span><span class="w">    </span><span class="m">0</span>.094<span class="w">    </span><span class="m">0</span>.094<span class="w">    </span><span class="m">4</span>.584<span class="w">    </span><span class="m">4</span>.584<span class="w"> </span>profileme2.py:11<span class="o">(</span>run_my_funcs<span class="o">)</span>
<span class="o">[</span>more<span class="w"> </span>output<span class="o">]</span>
</pre></div>
</div>
<p>Woo hoo! So we about halved the time! Not quite enough to grab a pint, but ah well…</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Another approach would be to preallocate a <code class="docutils literal notranslate"><span class="pre">numpy</span></code> array instead of using a list for <code class="docutils literal notranslate"><span class="pre">my_squares</span></code> - <em>Try it</em></p>
<p>You can also modify how the profiling results are displayed, and more, by using flags. For example, <code class="docutils literal notranslate"><span class="pre">-s</span></code> allows sorting the report by a particular column,  <code class="docutils literal notranslate"><span class="pre">-l</span></code>  limits the number of lines displayed or filters the results by function name, and <code class="docutils literal notranslate"><span class="pre">-T</span></code> saves the report in a text file.</p>
<p>For example, try</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">run</span> <span class="o">-</span><span class="n">p</span> <span class="o">-</span><span class="n">s</span> <span class="n">cumtime</span> <span class="n">profileme2</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>This will do the profiling and display the results sorted by <code class="docutils literal notranslate"><span class="pre">cumtime</span></code>.</p>
</section>
<section id="profiling-without-ipython">
<h3>Profiling without ipython<a class="headerlink" href="#profiling-without-ipython" title="Link to this heading">#</a></h3>
<p>You may want to execute the code that you need to profile from outside IPython (e.g., using a bash script). In this case, we you can use the module cProfile (ipython actually uses this when you do <code class="docutils literal notranslate"><span class="pre">%run</span> <span class="pre">-p</span></code>).</p>
<p>here is an example (run from bash):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>-m<span class="w"> </span>cProfile<span class="w"> </span>profileme2.py
</pre></div>
</div>
<p>Or,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>-m<span class="w"> </span>cProfile<span class="w"> </span>-o<span class="w"> </span>profires<span class="w"> </span>myscript.py
</pre></div>
</div>
<p>Here the results are stored in a file called <code class="docutils literal notranslate"><span class="pre">profires</span></code>, which can be read using the <code class="docutils literal notranslate"><span class="pre">pstats</span></code> module. Read the documentation of <code class="docutils literal notranslate"><span class="pre">cProfile</span></code> and <code class="docutils literal notranslate"><span class="pre">pstats</span></code> modules; there are many analyses you can perform on such exported  profiling reports.</p>
</section>
<section id="quick-profiling-with-timeit">
<h3>Quick profiling with <code class="docutils literal notranslate"><span class="pre">timeit</span></code><a class="headerlink" href="#quick-profiling-with-timeit" title="Link to this heading">#</a></h3>
<p>Additionally, you can use the <code class="docutils literal notranslate"><span class="pre">timeit</span></code> module if you want to figure out what the best way to do something specific as part of a larger program (say a particular command or a loop) might be.</p>
<p>Type and run the following code in a python script called <code class="docutils literal notranslate"><span class="pre">timeitme.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">##############################################################################</span>
<span class="c1"># loops vs. list comprehensions: which is faster?</span>
<span class="c1">##############################################################################</span>

<span class="n">iters</span> <span class="o">=</span> <span class="mi">1000000</span>

<span class="kn">import</span> <span class="nn">timeit</span>

<span class="kn">from</span> <span class="nn">profileme</span> <span class="kn">import</span> <span class="n">my_squares</span> <span class="k">as</span> <span class="n">my_squares_loops</span>

<span class="kn">from</span> <span class="nn">profileme2</span> <span class="kn">import</span> <span class="n">my_squares</span> <span class="k">as</span> <span class="n">my_squares_lc</span>

<span class="c1">##############################################################################</span>
<span class="c1"># loops vs. the join method for strings: which is faster?</span>
<span class="c1">##############################################################################</span>

<span class="n">mystring</span> <span class="o">=</span> <span class="s2">&quot;my string&quot;</span>

<span class="kn">from</span> <span class="nn">profileme</span> <span class="kn">import</span> <span class="n">my_join</span> <span class="k">as</span> <span class="n">my_join_join</span>

<span class="kn">from</span> <span class="nn">profileme2</span> <span class="kn">import</span> <span class="n">my_join</span> <span class="k">as</span> <span class="n">my_join</span>

</pre></div>
</div>
<p>Note how we imported the functions using <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">profileme</span> <span class="pre">import</span> <span class="pre">my_squares</span> <span class="pre">as</span> <span class="pre">my_squares_loops</span></code>, etc., which highlights the convenience of Python’s elegant object-oriented approach.</p>
<p>Now run the two sets of comparisons using <code class="docutils literal notranslate"><span class="pre">timeit()</span></code> in ipython and make sure every line makes sense:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">timeit</span> <span class="n">my_squares_loops</span><span class="p">(</span><span class="n">iters</span><span class="p">)</span>
<span class="o">%</span><span class="n">timeit</span> <span class="n">my_squares_lc</span><span class="p">(</span><span class="n">iters</span><span class="p">)</span>
<span class="o">%</span><span class="n">timeit</span> <span class="p">(</span><span class="n">my_join_join</span><span class="p">(</span><span class="n">iters</span><span class="p">,</span> <span class="n">mystring</span><span class="p">))</span>
<span class="o">%</span><span class="n">timeit</span> <span class="p">(</span><span class="n">my_join</span><span class="p">(</span><span class="n">iters</span><span class="p">,</span> <span class="n">mystring</span><span class="p">))</span>
</pre></div>
</div>
<p>Note that embedding the <code class="docutils literal notranslate"><span class="pre">%timeit()</span></code> commands within the script won’t work calling magic commands from inside a script is not a good idea!</p>
<p>Of course, a simple approach would have been to time the functions like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">my_squares_loops</span><span class="p">(</span><span class="n">iters</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;my_squares_loops takes </span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start</span><span class="si">}</span><span class="s2"> s to run.&quot;</span><span class="p">)</span>

<span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">my_squares_lc</span><span class="p">(</span><span class="n">iters</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;my_squares_lc takes </span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start</span><span class="si">}</span><span class="s2"> s to run.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>But you’ll notice that if you run it multiple times, the time taken changes each time. So <code class="docutils literal notranslate"><span class="pre">timeit</span></code> takes a sample of runs and returns the average, which is better.</p>
<p><em>But remember, don’t go crazy with profiling for the sake of shaving a couple of milliseconds, tempting as that may be!</em></p>
</section>
</section>
<section id="vectorization-revisited">
<h2>Vectorization revisited<a class="headerlink" href="#vectorization-revisited" title="Link to this heading">#</a></h2>
<p>We have now had fairly extensive practice in iteratively creating solutions to problems using for loops. Thus far all our problems have been mathematically quite straightforward, and not very computationally intensive. As you begin to move on from your taught modules into project work, you may find yourselves solving larger and more complex problems, at which point you will start to discover that for-loops have a fundamental weakness - speed!</p>
<p>In a nutshell, there are two issues keeping loops slow:</p>
<ul class="simple">
<li><p>Producing solutions to a large problem one loop iteration at a time means that our scripts and functions spend a lot of time doing stuff other than actually solving the problem we want them to solve - e.g. shuffling data around between variables in each loop iteration, or storing the result of the current loop’s calculations in a (sometimes temporary) variable.</p></li>
<li><p>Loops (at least in Python) are not generally able to take advantage of the parallel computing capabilities of modern-day computers, and thus must literally compute a solution one loop iteration at a time. vectorized functions tend to be optimised to spread their computations over multiple processors/threads, which can be much faster!</p></li>
</ul>
<p>These issues become especially pronounced in the case of nested loops - which often appear in more spatially-explicit problems or time-dependent ones.</p>
<p>The following two examples will showcase the difference in runtime between a loop method and a vectorized method using numpy. The first is a relatively simple (if artificial) problem, intended to demonstrate basically at-a-glace the difference between the two approaches. The second is taken from current research on metabolic models of bacterial communities.</p>
<section id="an-example">
<h3>An example<a class="headerlink" href="#an-example" title="Link to this heading">#</a></h3>
<p>Let us imagine we have two simple 1D arrays <span class="math notranslate nohighlight">\(a = (a_1, a_2, ... , a_N)\)</span> and <span class="math notranslate nohighlight">\(b = (b_1, b_2, ... ,b_N)\)</span>, each of length N, and that we want to calculate a new array <span class="math notranslate nohighlight">\(c\)</span> in which each entry is just the product of the two corresponding entries in <span class="math notranslate nohighlight">\(a\)</span> and <span class="math notranslate nohighlight">\(b\)</span>:</p>
<div class="math notranslate nohighlight">
\[c = (a_1 \times b_1, a_2 \times b_2, ... , a_N \times b_N)\]</div>
<p>This operation is called the <em>entrywise</em> product of <span class="math notranslate nohighlight">\(a\)</span> and <span class="math notranslate nohighlight">\(b\)</span>.</p>
<p>Below are a loop-based function and a vectorized function to calculate the entrywise product of two 1D arrays of the same length. We will test them both on larger and larger 1D arrays to see how the vectorized approach is faster.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">loop_product</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>   
    <span class="k">return</span> <span class="n">c</span>


<span class="k">def</span> <span class="nf">vect_product</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">multiply</span></code> function from numpy is a vectorized implementation of the elementwise product that we have explicitly written in the function <code class="docutils literal notranslate"><span class="pre">loop_product</span></code> above it. In general, numpy is an excellent choice for vectorized implementations of functions involving matrix maths (or maths using higher-dimensional analogues of matricies).</p>
<p>Let’s try comparing the runtimes of <code class="docutils literal notranslate"><span class="pre">loop_product</span></code> and <code class="docutils literal notranslate"><span class="pre">vect_product</span></code> on increasingly large randomly-generated 1D arrays:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">timeit</span>

<span class="n">array_lengths</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="mi">1000000</span><span class="p">,</span> <span class="mi">10000000</span><span class="p">]</span>
<span class="n">t_loop</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">t_vect</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">N</span> <span class="ow">in</span> <span class="n">array_lengths</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Set </span><span class="si">{</span><span class="n">N</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1">#randomly generate our 1D arrays of length N</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
    
    <span class="c1"># time loop_product 3 times and save the mean execution time.</span>
    <span class="n">timer</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="s1">&#39;loop_product(a, b)&#39;</span><span class="p">,</span> <span class="nb">globals</span><span class="o">=</span><span class="nb">globals</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">number</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">t_loop</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">timer</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loop method took </span><span class="si">{</span><span class="n">t_loop</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> ms on average.&quot;</span><span class="p">)</span>
    
    <span class="c1"># time vect_product 3 times and save the mean execution time.</span>
    <span class="n">timer</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="s1">&#39;vect_product(a, b)&#39;</span><span class="p">,</span> <span class="nb">globals</span><span class="o">=</span><span class="nb">globals</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">number</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">t_vect</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">timer</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;vectorized method took </span><span class="si">{</span><span class="n">t_vect</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> ms on average.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Set N=1
Loop method took 0.0033234013244509697 ms on average.
vectorized method took 0.0022474006982520223 ms on average.

Set N=100
Loop method took 0.040193606400862336 ms on average.
vectorized method took 0.0016125966794788837 ms on average.

Set N=10000
Loop method took 4.022401399561204 ms on average.
vectorized method took 0.0858539977343753 ms on average.

Set N=1000000
Loop method took 384.72996639902703 ms on average.
vectorized method took 7.79655639489647 ms on average.

Set N=10000000
Loop method took 4126.211678393884 ms on average.
vectorized method took 100.99498260242399 ms on average.
</pre></div>
</div>
</div>
</div>
<p>Phew! That last one just exploded in terms of the time it took!</p>
<p>Now let’s compare the timings on a plot:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">array_lengths</span><span class="p">,</span> <span class="n">t_loop</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;loop method&quot;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">array_lengths</span><span class="p">,</span> <span class="n">t_vect</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;vect method&quot;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Array length&quot;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Execution time (ms)&quot;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/f2aea0ed58425cc22d75e2fe245e90244a855545d4c4cd014d02ca12bea4e471.png" src="../_images/f2aea0ed58425cc22d75e2fe245e90244a855545d4c4cd014d02ca12bea4e471.png" />
</div>
</div>
</section>
<section id="when-to-vectorize">
<h3>When to vectorize?<a class="headerlink" href="#when-to-vectorize" title="Link to this heading">#</a></h3>
<p>Thus vectorizing your code can have it running in a fraction of the time it otherwise would. Why not always vectorize then?</p>
<p>Generally, you should follow the same principles as with any code profiling: don’t spend time speeding up code that isn’t slow in the first place, or code which you will probably not need to run more than a small number of times.</p>
<section id="no-free-lunch">
<h4>“No free lunch!”<a class="headerlink" href="#no-free-lunch" title="Link to this heading">#</a></h4>
<p>There are trade-offs to vectorizing, most notably memory usage. One downside of calculating many steps simultaneously is that your computer needs to hold much more in memory in order to do it. If you try to vectorize a problem thats <em>too</em> large, you will probably run into memory errors. One easy example is to re-run the above example, but make it <strong>even bigger</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">N</span> <span class="o">=</span> <span class="mi">1000000000</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">vect_product</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

<span class="c1"># if no error, remove a, b, c from memory.</span>
<span class="k">del</span> <span class="n">a</span>
<span class="k">del</span> <span class="n">b</span>
<span class="k">del</span> <span class="n">c</span>
</pre></div>
</div>
<p>This will almost certainly return a memory error (i.e. your computer ran out of RAM in which to store the entirety of the very large arrays <span class="math notranslate nohighlight">\(a\)</span>, <span class="math notranslate nohighlight">\(b\)</span> and <span class="math notranslate nohighlight">\(c\)</span> while it was still calculating (if you didn’t get an error, try again with an extra 0 in <span class="math notranslate nohighlight">\(N\)</span>).</p>
<p>Again, this is a rather contrived example - you probably won’t be taking element-wise products of arrays with a billion entries in your research - but more complex problems can easily become too big for memory while still remaining biologically reasonable!</p>
<p><em>Check out the CMEE module on High Performance Computing to learn about using Imperial College’s supercomputing cluster to run extremely large problems</em></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">multiprocessing</span></code> package for parallelizing your code on your own computer.</p>
</div>
</section>
</section>
</section>
<section id="id3">
<h2>Practicals<a class="headerlink" href="#id3" title="Link to this heading">#</a></h2>
<section id="the-lotka-volterra-model-revisited">
<h3>The Lotka-Volterra model revisited<a class="headerlink" href="#the-lotka-volterra-model-revisited" title="Link to this heading">#</a></h3>
<p><em>What happens when the Consumer population <span class="math notranslate nohighlight">\(C\)</span> goes extinct in the Lotka-Volterra that you encountered above</em>?</p>
<p>If the consumer population goes extinct, the resources grow to infinity! This is not biologically realistic, of course. To address this, we can introduce density dependence to the resource population <span class="math notranslate nohighlight">\(\left(1 - \frac{R} {K}\right)\)</span>, which changes the ODE system to</p>
<div class="amsmath math notranslate nohighlight" id="equation-5f8b751a-d8ac-4348-b587-69078f47ffcc">
<span class="eqno">(3)<a class="headerlink" href="#equation-5f8b751a-d8ac-4348-b587-69078f47ffcc" title="Permalink to this equation">#</a></span>\[\begin{align}
    \frac{dR}{dt} &amp;= r R \left(1 - \frac{R} {K}\right) - a C R\\
    \frac{dC}{dt} &amp;= - z C + e a C R
\end{align}\]</div>
<p>The new parameter <span class="math notranslate nohighlight">\(K\)</span> is the resource population’s carrying capacity, which sets the upper limit on how large <span class="math notranslate nohighlight">\(R\)</span> can get if the consumers go extinct. Basically, if you look carefully at the term <span class="math notranslate nohighlight">\(r R \left(1 - \frac{R} {K}\right)\)</span>, you can see that when <span class="math notranslate nohighlight">\(N = K\)</span>, the term in the brackets goes to zero, and the resource population stops growing.</p>
<p>Your task in this practical is to copy and modify <code class="docutils literal notranslate"><span class="pre">LV1.py</span></code> into another script called <code class="docutils literal notranslate"><span class="pre">LV2.py</span></code> that has the following features:</p>
<ul class="simple">
<li><p>It takes arguments for the four LV model parameters <span class="math notranslate nohighlight">\(r\)</span>, <span class="math notranslate nohighlight">\(a\)</span>, <span class="math notranslate nohighlight">\(z\)</span>, <span class="math notranslate nohighlight">\(e\)</span>, <span class="math notranslate nohighlight">\(K\)</span> from the command line:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LV2</span><span class="o">.</span><span class="n">py</span> <span class="n">arg1</span> <span class="n">arg2</span> <span class="o">...</span> <span class="n">etc</span>
</pre></div>
</div>
<ul class="simple">
<li><p>It runs our modified Lotka-Volterra model with resource density dependence.</p></li>
<li><p>It saves the plot as <code class="docutils literal notranslate"><span class="pre">.pdf</span></code> in an appropriate location.</p></li>
<li><p>The chosen parameter values should show in the plot (e.g., <span class="math notranslate nohighlight">\(r = 1, a = .5 \)</span>, etc) You can change time length <span class="math notranslate nohighlight">\(t\)</span> too.</p></li>
<li><p>The parameters values should be adjusted such that both predator and prey persist with prey density dependence ( the final (non-zero) population values should be printed to screen). Try out different values of <span class="math notranslate nohighlight">\(K\)</span> and exlore the model’s behavior. One thing you might find is that that there is a critical value of <span class="math notranslate nohighlight">\(K\)</span> below which the consumer and resource population just cannot coexist (both go extinct).</p></li>
</ul>
<p>Also, include a script that runs both <code class="docutils literal notranslate"><span class="pre">LV1.py</span></code> and <code class="docutils literal notranslate"><span class="pre">LV2.py</span></code> with appropriate arguments. This script should also profile the two scripts and print the results to screen for each of the scripts using the <code class="docutils literal notranslate"><span class="pre">%run</span> <span class="pre">-p</span></code> approach. Look at and compare the speed bottlenecks in <code class="docutils literal notranslate"><span class="pre">LV1.py</span></code> and <code class="docutils literal notranslate"><span class="pre">LV2.py</span></code>. <em>Think about how you could further speed up the scripts.</em></p>
</section>
<section id="groupwork-practical-compare-r-and-python-vectorization">
<h3>Groupwork practical: Compare R and Python Vectorization<a class="headerlink" href="#groupwork-practical-compare-r-and-python-vectorization" title="Link to this heading">#</a></h3>
<p>Implement the Python versions of <code class="docutils literal notranslate"><span class="pre">Vectorize1.R</span></code>and <code class="docutils literal notranslate"> <span class="pre">Vectorize2.R</span></code> <a class="reference internal" href="R.html#r-vectorization"><span class="std std-ref">from the R Chapter</span></a> (call them <code class="docutils literal notranslate"><span class="pre">Vectorize1.py</span></code> and <code class="docutils literal notranslate"><span class="pre">Vectorize2.py</span></code> respectively). Then write a shell script that compares the computational speed of the four scripts. the script should display meaningful summary of the results in the terminal. In particular, it should print the timings of the equivalent R and Python functions (not just the timing of the R and Python scripts as a whole).</p>
</section>
<section id="groupwork-practical-discrete-time-lv-model">
<h3>Groupwork practical: Discrete time LV Model<a class="headerlink" href="#groupwork-practical-discrete-time-lv-model" title="Link to this heading">#</a></h3>
<p><em>Write every subsequent extra credit script file with a new name such as <code class="docutils literal notranslate"><span class="pre">LV3.py</span></code>,<code class="docutils literal notranslate"><span class="pre">LV4.py</span></code>, etc.</em></p>
<ul class="simple">
<li><p>Write a discrete-time version of the LV model called <code class="docutils literal notranslate"><span class="pre">LV3.py</span></code>. The discrete-time model is:</p></li>
</ul>
<div class="amsmath math notranslate nohighlight" id="equation-83b75028-7db5-45b8-a6df-048c58a39d99">
<span class="eqno">(4)<a class="headerlink" href="#equation-83b75028-7db5-45b8-a6df-048c58a39d99" title="Permalink to this equation">#</a></span>\[\begin{align} 
    R_{t+1} &amp;= R_t (1 + r \left(1 - \frac{R_t}{K}\right) - a C_t)\\ 
    C_{t+1} &amp;= C_t (1 - z + e a R_t) 
\end{align}\]</div>
<p>Include this script in <code class="docutils literal notranslate"><span class="pre">run_LV.py</span></code>, and profile it as well.</p>
</section>
<section id="groupwork-practical-discrete-time-lv-model-with-stochasticity">
<h3>Groupwork practical: Discrete time LV model with stochasticity<a class="headerlink" href="#groupwork-practical-discrete-time-lv-model-with-stochasticity" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Write a version of the discrete-time model (which you implemented in <code class="docutils literal notranslate"><span class="pre">LV3.py</span></code>) simulation with a random gaussian fluctuation in resource’s growth rate at each time-step:</p></li>
</ul>
<div class="amsmath math notranslate nohighlight" id="equation-daa2e4a7-710a-4d8f-872b-ca05d1ee0366">
<span class="eqno">(5)<a class="headerlink" href="#equation-daa2e4a7-710a-4d8f-872b-ca05d1ee0366" title="Permalink to this equation">#</a></span>\[\begin{align}
        R_{t+1} &amp;= R_t (1 + (r + \epsilon) \left(1 - \frac{R_t}{K}\right)- a C_t)\\
        C_{t+1} &amp;= C_t (1 - z + e a R_t)
\end{align}\]</div>
<p>where <span class="math notranslate nohighlight">\(\epsilon\)</span> is a random fluctuation drawn from a gaussian distribution (use <code class="docutils literal notranslate"><span class="pre">sc.stats</span></code> or <code class="docutils literal notranslate"><span class="pre">np.random</span></code>). Include this script in <code class="docutils literal notranslate"> <span class="pre">run_LV.py</span></code>, and profile it as well. You can also add fluctuations to both populations simultaneously this way:</p>
<div class="amsmath math notranslate nohighlight" id="equation-c0dc250c-9ccd-4488-aee8-f7e228035562">
<span class="eqno">(6)<a class="headerlink" href="#equation-c0dc250c-9ccd-4488-aee8-f7e228035562" title="Permalink to this equation">#</a></span>\[\begin{align}
    R_{t+1} &amp;= R_t (1 + (r + \epsilon)  \left(1 - \frac{R_t}{K}\right) - a C_t)\\
    C_{t+1} &amp;= C_t (1 - (z + \epsilon) + e a R_t)
\end{align}\]</div>
<p><em>As always, test, add, commit and push all your new code and data to your git repository.</em></p>
</section>
</section>
<section id="regular-expressions-in-python">
<span id="python-ii-python-regex"></span><h2>Regular expressions in Python<a class="headerlink" href="#regular-expressions-in-python" title="Link to this heading">#</a></h2>
<p>Let’s shift gears now, and look at a very important tool set that you should learn, or at least be aware of — <em>Regular expressions</em>.</p>
<p>Regular expressions (regex) are a tool to find patterns (not just a particular sequence of characters) in strings. For example, <code class="docutils literal notranslate"><span class="pre">your&#64;email.com</span></code> is a specific sequence of characters, but, in fact, all email addresses have such a pattern: alphanumeric characters, a “&#64;”, alphanumeric characters, a “.”, alphanumeric characters. Using regex, you can search for all email addresses in a text file by searching for this pattern.</p>
<p>There are many uses of regex, such as:</p>
<ul class="simple">
<li><p>Parsing (reading) text files and finding and replacing or deleting specific patterns</p></li>
<li><p>Finding DNA motifs in sequence data</p></li>
<li><p>Navigating through files in a directory</p></li>
<li><p>Extracting information from html and xml files</p></li>
</ul>
<p>Thus, if you are interested in data mining, need to clean or process data in any other way, or convert a bunch of information into usable data, knowing regex is absolutely necessary.</p>
<hr class="docutils" />
<figure class="align-default" id="xkcd-on-regex">
<a class="reference internal image-reference" href="../_images/regex.png"><img alt="XKCD on Regex" src="../_images/regex.png" style="width: 400px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 16 </span><span class="caption-text"><strong>Regular expressions can really improve your quality of life.</strong><br> (Source: <a class="reference external" href="https://www.xkcd.com/208/">XKCD</a>)</span><a class="headerlink" href="#xkcd-on-regex" title="Link to this image">#</a></p>
</figcaption>
</figure>
<hr class="docutils" />
<p>Regex packages are available for most programming languages (recall <a class="reference internal" href="Unix.html#using-grep"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">grep</span></code> in UNIX</span></a>; that is how regex first became popular).</p>
<section id="metacharacters-vs-regular-characters">
<h3>Metacharacters vs. regular characters<a class="headerlink" href="#metacharacters-vs-regular-characters" title="Link to this heading">#</a></h3>
<p>A regex may consist of a combination of special “metacharacters” (modifiers) and “regular” or literal characters. There are 14 metacharacters:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Metacharacter</p></th>
<th class="head text-left"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">[</span></code> <code class="docutils literal notranslate"><span class="pre">]</span></code></p></td>
<td class="text-left"><p>Used to enclose a specific character “class” — the set of characters that you wish to match. For example,  <code class="docutils literal notranslate"><span class="pre">[12]</span></code> means match target to “1” and if that does not match then match target to “2”; <code class="docutils literal notranslate"><span class="pre">[0-9]</span></code> means match to any character in range “0” to “9”</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">\</span></code></p></td>
<td class="text-left"><p>Inhibits the “specialness” of a (meta)character so that it can be interpreted literally. So, for example, use <code class="docutils literal notranslate"><span class="pre">\.</span></code> to match an actual period, and  <code class="docutils literal notranslate"><span class="pre">\\</span></code> to match an actual back slash.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">.</span></code></p></td>
<td class="text-left"><p>Match any character except line break (newline); e.g.,	<code class="docutils literal notranslate"><span class="pre">he..o</span></code> will match <em>hello</em> as well as <em>he12o</em></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">^</span></code></p></td>
<td class="text-left"><p>Indicates that the string to be matched is at the start of a longer string; e.g., <code class="docutils literal notranslate"><span class="pre">^hello</span></code> will match “hello” in “hello fellow!”, but not in “fellow, hello!”</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">$</span></code></p></td>
<td class="text-left"><p>Match the end of a string; for example, <code class="docutils literal notranslate"><span class="pre">world$</span></code> will match “world” in “Hello world”, but not in “Hello world!”</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">*</span></code></p></td>
<td class="text-left"><p>Match zero or more occurrences of the character or pattern that precedes it.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">+</span></code></p></td>
<td class="text-left"><p>Match 1 or more occurrences of the character or pattern that precedes it.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">?</span></code></p></td>
<td class="text-left"><p>Match the preceding pattern element zero <em>or</em> one times</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">{</span></code> <code class="docutils literal notranslate"><span class="pre">}</span></code></p></td>
<td class="text-left"><p>Match exactly the specified number of occurrences; e.g., <code class="docutils literal notranslate"><span class="pre">.{2}</span></code> finds the first two instances of any character (except newline)</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>`</p></td>
<td class="text-left"><p>`</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">(</span></code> <code class="docutils literal notranslate"><span class="pre">)</span></code></p></td>
<td class="text-left"><p>Capture and group; examples of this appear below</p></td>
</tr>
</tbody>
</table>
</div>
<p>Everything other than these metacharacters is interpreted literally (e.g., <em>a</em> is matched by entering <code class="docutils literal notranslate"><span class="pre">a</span></code> in the regex) – a regular character.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>The difference between <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">+</span></code>, and <code class="docutils literal notranslate"><span class="pre">?</span></code></strong>:
<code class="docutils literal notranslate"><span class="pre">*</span></code> matches zero or more times, so whatever’s being repeated may <em>not</em> be present at all, while <code class="docutils literal notranslate"><span class="pre">+</span></code> <em>requires</em> at least one occurrence. So, for example, <code class="docutils literal notranslate"><span class="pre">ra+t</span></code> will match “rat” (one ‘a’ is present) and “raaat” (three “a”s), but won’t match “rt”. On the other hand, <code class="docutils literal notranslate"><span class="pre">?</span></code> matches a pattern either once or zero times, so it makes the pattern matching more flexible. For example, <code class="docutils literal notranslate"><span class="pre">home-?brew</span></code> matches either “homebrew” or “home-brew”.</p>
</div>
</section>
<section id="regex-special-sequences">
<h3>Regex special sequences<a class="headerlink" href="#regex-special-sequences" title="Link to this heading">#</a></h3>
<p>Along with inhibiting the “specialness” of a metacharacter so that it can be interpreted literally (see examples in table above), the backslash (<code class="docutils literal notranslate"><span class="pre">\</span></code>) can be followed by various standard character types to denote various <em>special sequences</em>.</p>
<p>Below is a list of <em>commonly encountered</em> special sequences in <a class="reference external" href="https://en.wikipedia.org/wiki/Unicode">Unicode</a> string patterns. For a complete list look <a class="reference external" href="https://docs.python.org/3/library/re.html#re-syntax">here</a>.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Sequence</p></th>
<th class="head text-left"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">\d</span></code></p></td>
<td class="text-left"><p>Matches any numeric (integer); this is equivalent to the regex class [0-9]</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">\D</span></code></p></td>
<td class="text-left"><p>Matches any non-digit character not covered by <code class="docutils literal notranslate"> <span class="pre">\d</span></code> (i.e., match a non-digit); this is equivalent to the class [^0-9]</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">\n</span></code></p></td>
<td class="text-left"><p>Matches a newline</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">\t</span></code></p></td>
<td class="text-left"><p>Matches a tab space</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">\s</span></code></p></td>
<td class="text-left"><p>Matches any whitespace character; this is equivalent to the class [ \t\n\r\f\v]</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">\S</span></code></p></td>
<td class="text-left"><p>Matches any non-whitespace character; this is equivalent to the class [^ \t\n\r\f\v]</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">\w</span></code></p></td>
<td class="text-left"><p>Matches any “alphanumeric” character (including underscore); this is equivalent to the class [a-zA-Z0-9_]</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">\W</span></code></p></td>
<td class="text-left"><p>Matches any non-alphanumeric character not covered by <code class="docutils literal notranslate"><span class="pre">\w</span></code>, i.e., any non-alphanumeric character excluding underscore, such as <code class="docutils literal notranslate"><span class="pre">?</span></code>, <code class="docutils literal notranslate"><span class="pre">!</span></code>, <code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, etc. ; this is equivalent to the class [^a-zA-Z0-9_]</p></td>
</tr>
</tbody>
</table>
</div>
<p>In the above table,</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">\r</span></code> stands for a “<a class="reference external" href="https://en.wikipedia.org/wiki/Carriage_return#Computers">carriage-return</a>”, which is usually (but not always) the same as as a newline (<code class="docutils literal notranslate"><span class="pre">\n</span></code>);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\f</span></code> stands fior <a class="reference external" href="https://en.wikipedia.org/wiki/Page_break">“form feed”</a> (or a page break character)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\v</span></code> stands for  <a class="reference external" href="https://en.wikipedia.org/wiki/Whitespace_character">“vertical whitespace”</a>, which includes all characters treated as line breaks in the Unicode standard.</p></li>
</ul>
<p>These are rarely encountered, but can exist in certain text files.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The reason why we have specified underscore as belonging to <code class="docutils literal notranslate"><span class="pre">\w</span></code> (i.e., the regex set [A-Za-z0-9_]) is because this is the specification of this class in Python regex in particular. This class definition is shared by most, but not all regex “flavors” (i.e., regex in other languages, such as Perl or Bash (recall <code class="docutils literal notranslate"><span class="pre">grep</span></code>)). The goal is to not to worry about it, but to keep in mind that <code class="docutils literal notranslate"><span class="pre">\w</span></code> will also match any pattern that includes one or more <code class="docutils literal notranslate"><span class="pre">_</span></code>’s!</p>
</div>
</section>
<section id="some-regex-examples">
<h3>Some regex examples<a class="headerlink" href="#some-regex-examples" title="Link to this heading">#</a></h3>
<p>So combining metacharacters, regular characters and special sequences allows you to find pretty much any pattern. Here are some examples:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Regex</p></th>
<th class="head text-left"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">aX9</span></code></p></td>
<td class="text-left"><p>match the character string <em>aX9</em> exactly (case sensitively)</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">aX9\n</span></code></p></td>
<td class="text-left"><p>match the character string <em>aX9</em>  (case sensitively) followed by a newline</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">8</span></code></p></td>
<td class="text-left"><p>match the number <em>8</em></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">\d8</span></code></p></td>
<td class="text-left"><p>match the number <em>8</em> preceded by any decimal number</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">[atgc]</span></code></p></td>
<td class="text-left"><p>match any character listed: <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code>, <code class="docutils literal notranslate"><span class="pre">g</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>`at</p></td>
<td class="text-left"><p>gc`</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">[^atgc]</span></code></p></td>
<td class="text-left"><p>match any character not listed: any character except <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code>, <code class="docutils literal notranslate"><span class="pre">g</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">[^a-z]</span></code></p></td>
<td class="text-left"><p>match everything except lower case <em>a</em> to <em>z</em></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">[^Ff]</span></code></p></td>
<td class="text-left"><p>match anything except upper or lower case <em>f</em></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">\w{n}</span></code></p></td>
<td class="text-left"><p>match the preceding pattern  element (any alphanumeric character) <em>exactly</em> <code class="docutils literal notranslate"><span class="pre">n</span></code> times</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">\w{n,}</span></code></p></td>
<td class="text-left"><p>match the preceding pattern element (any alphanumeric character) <em>at least</em> <code class="docutils literal notranslate"><span class="pre">n</span></code> times</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">\w{n,m}</span></code></p></td>
<td class="text-left"><p>match the preceding pattern element (any alphanumeric character) at least <code class="docutils literal notranslate"><span class="pre">n</span></code> but not more than <code class="docutils literal notranslate"><span class="pre">m</span></code> times</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Metacharacters are not active inside classes. For example, <code class="docutils literal notranslate"><span class="pre">[a-z$]</span></code> will match any of the characters <code class="docutils literal notranslate"><span class="pre">a</span></code> to <code class="docutils literal notranslate"><span class="pre">z</span></code>, but also <code class="docutils literal notranslate"><span class="pre">$</span></code>, because inside a character class it loses its special metacharacter status.</p>
</div>
</section>
<section id="regex-in-python">
<h3>Regex in Python<a class="headerlink" href="#regex-in-python" title="Link to this heading">#</a></h3>
<p>Regex functions in python are in the module <code class="docutils literal notranslate"><span class="pre">re</span></code>.</p>
<p>Let’s import it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
</pre></div>
</div>
</div>
</div>
<p>The simplest <code class="docutils literal notranslate"><span class="pre">python</span></code> regex function is <code class="docutils literal notranslate"><span class="pre">re.search</span></code>, which searches the string for match to a given pattern — returns a <em>match object</em> if a match is found and <code class="docutils literal notranslate"><span class="pre">None</span></code> if not. Thus, the command <code class="docutils literal notranslate"><span class="pre">match</span> <span class="pre">=</span> <span class="pre">re.search(pat,</span> <span class="pre">str)</span></code> finds matches of the pattern <code class="docutils literal notranslate"><span class="pre">pat</span></code> in the given string <code class="docutils literal notranslate"><span class="pre">str</span></code> and stores the search result in a variable named <code class="docutils literal notranslate"><span class="pre">match</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Always</strong> put <code class="docutils literal notranslate"><span class="pre">r</span></code> in front of your regex — it tells python to read the regex in its “raw” (literal) form. Without raw string notation (<code class="docutils literal notranslate"><span class="pre">r&quot;text&quot;</span></code>), every backslash (<code class="docutils literal notranslate"><span class="pre">\</span></code>) in a regular expression would have to be prefixed with another one to escape it. Read more about this <a class="reference external" href="https://docs.python.org/3.5/library/re.html">here</a>.</p>
</div>
<p>OK, let’s try some regexes (type all that follows in <code class="docutils literal notranslate"><span class="pre">regexs.py</span></code>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_string</span> <span class="o">=</span> <span class="s2">&quot;a given string&quot;</span>
</pre></div>
</div>
</div>
</div>
<p>Find a space in the string:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\s&#39;</span><span class="p">,</span> <span class="n">my_string</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;re.Match object; span=(1, 2), match=&#39; &#39;&gt;
</pre></div>
</div>
</div>
</div>
<p>That’s only telling you that a match was found (the object was created successfully).</p>
<p>To see the match, use:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">match</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39; &#39;
</pre></div>
</div>
</div>
</div>
<p>Now let’s try another pattern:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\d&#39;</span><span class="p">,</span> <span class="n">my_string</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">match</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>None
</pre></div>
</div>
</div>
</div>
<p>No surprise, because there are no numeric characters in our string!</p>
<p>To know whether a pattern was matched, we can use an <code class="docutils literal notranslate"><span class="pre">if</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyStr</span> <span class="o">=</span> <span class="s1">&#39;an example&#39;</span>

<span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\w*\s&#39;</span><span class="p">,</span> <span class="n">MyStr</span><span class="p">)</span> <span class="c1"># what pattern is this?</span>

<span class="k">if</span> <span class="n">match</span><span class="p">:</span>                      
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;found a match:&#39;</span><span class="p">,</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">())</span> 
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;did not find a match&#39;</span><span class="p">)</span>    
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>found a match: an 
</pre></div>
</div>
</div>
</div>
<p>Here are some more regexes (add all that follows to <code class="docutils literal notranslate"><span class="pre">regexs.py</span></code>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;2&#39;</span> <span class="p">,</span> <span class="s2">&quot;it takes 2 to tango&quot;</span><span class="p">)</span>
<span class="k">match</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;2&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\d&#39;</span> <span class="p">,</span> <span class="s2">&quot;it takes 2 to tango&quot;</span><span class="p">)</span>
<span class="k">match</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;2&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\d.*&#39;</span> <span class="p">,</span> <span class="s2">&quot;it takes 2 to tango&quot;</span><span class="p">)</span>
<span class="k">match</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;2 to tango&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\s\w{1,3}\s&#39;</span><span class="p">,</span> <span class="s1">&#39;once upon a time&#39;</span><span class="p">)</span>
<span class="k">match</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39; a &#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\s\w*$&#39;</span><span class="p">,</span> <span class="s1">&#39;once upon a time&#39;</span><span class="p">)</span>
<span class="k">match</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39; time&#39;
</pre></div>
</div>
</div>
</div>
<p>Let’s switch to a more compact syntax by directly returning the matched group (by directly appending <code class="docutils literal notranslate"><span class="pre">.group()</span></code> to the result).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\w*\s\d.*\d&#39;</span><span class="p">,</span> <span class="s1">&#39;take 2 grams of H2O&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;take 2 grams of H2&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^\w*.*\s&#39;</span><span class="p">,</span> <span class="s1">&#39;once upon a time&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">()</span> <span class="c1"># &#39;once upon a &#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;once upon a &#39;
</pre></div>
</div>
</div>
</div>
<p>Note that *, <code class="docutils literal notranslate"><span class="pre">+</span></code>, and <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">}</span></code> are all “greedy”:  They repeat the previous regex token as many times as possible.</p>
<p>As a result, they may match more text than you want. To make it non-greedy and terminate at the first found instance of a pattern, use <code class="docutils literal notranslate"><span class="pre">?</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^\w*.*?\s&#39;</span><span class="p">,</span> <span class="s1">&#39;once upon a time&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;once &#39;
</pre></div>
</div>
</div>
</div>
<p>To further illustrate greediness in regexes, let’s try matching an HTML tag:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;.+&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;This is a &lt;EM&gt;first&lt;/EM&gt; test&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;&lt;EM&gt;first&lt;/EM&gt;&#39;
</pre></div>
</div>
</div>
</div>
<p>But we wanted just <code class="docutils literal notranslate"><span class="pre">&lt;EM&gt;</span></code>!</p>
<p>It’s because <code class="docutils literal notranslate"><span class="pre">+</span></code> is greedy. Instead, we can make <code class="docutils literal notranslate"><span class="pre">+</span></code> “lazy”:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;.+?&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;This is a &lt;EM&gt;first&lt;/EM&gt; test&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;&lt;EM&gt;&#39;
</pre></div>
</div>
</div>
</div>
<p>OK, moving on from greed and laziness…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\d*\.?\d*&#39;</span><span class="p">,</span><span class="s1">&#39;1432.75+60.22i&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;1432.75&#39;
</pre></div>
</div>
</div>
</div>
<p>Note <code class="docutils literal notranslate"><span class="pre">\</span></code> before the <code class="docutils literal notranslate"><span class="pre">.</span></code>, to be able to find a literal <code class="docutils literal notranslate"><span class="pre">.</span></code></p>
<p>Otherwise, <code class="docutils literal notranslate"><span class="pre">re.search</span></code> will consider it to be a regex element (<code class="docutils literal notranslate"><span class="pre">.</span></code> means “match any character except newline”).</p>
<p>A couple more examples:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[AGTC]+&#39;</span><span class="p">,</span> <span class="s1">&#39;the sequence ATTCGT&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;ATTCGT&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\s+[A-Z]\w+\s*\w+&#39;</span><span class="p">,</span> <span class="s2">&quot;The bird-shit frog&#39;s name is Theloderma asper.&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39; Theloderma asper&#39;
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<figure class="align-default" id="theloderma-asper">
<a class="reference internal image-reference" href="../_images/thelodermaasper.JPG"><img alt="Bird-shit Frog" src="../_images/thelodermaasper.JPG" style="width: 350px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 17 </span><span class="caption-text"><strong>In case you were wondering what <em>Theloderma asper</em>, the “bird-shit frog”, looks like.</strong> Samraat snapped this one in a North-East Indian rainforest ages ago.</span><a class="headerlink" href="#theloderma-asper" title="Link to this image">#</a></p>
</figcaption>
</figure>
<hr class="docutils" />
<p>How about looking for email addresses in a string? For example, let’s try matching a string consisting of an academic’s name, email address and research area or interest (no need to type this into any python file):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyStr</span> <span class="o">=</span> <span class="s1">&#39;Samraat Pawar, s.pawar@imperial.ac.uk, Systems biology and ecological theory&#39;</span>
<span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[\w\s]+,\s[\w\.@]+,\s[\w\s]+&quot;</span><span class="p">,</span><span class="n">MyStr</span><span class="p">)</span>
<span class="k">match</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Samraat Pawar, s.pawar@imperial.ac.uk, Systems biology and ecological theory&#39;
</pre></div>
</div>
</div>
</div>
<p>Note the use of <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">]</span></code>’s: for example, <code class="docutils literal notranslate"><span class="pre">[\w\s]</span></code> ensures that any combination of word characters and spaces is found.</p>
<p>Let’s see if this regex works on a different pattern of email addresses:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyStr</span> <span class="o">=</span> <span class="s1">&#39;Samraat Pawar, s-pawar@imperial.ac.uk, Systems biology and ecological theory&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[\w\s]+,\s[\w\.@]+,\s[\w\s]+&quot;</span><span class="p">,</span><span class="n">MyStr</span><span class="p">)</span>
<span class="k">match</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">321</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[\w\s]+,\s[\w\.@]+,\s[\w\s]+&quot;</span><span class="p">,</span><span class="n">MyStr</span><span class="p">)</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="k">match</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>

<span class="ne">AttributeError</span>: &#39;NoneType&#39; object has no attribute &#39;group&#39;
</pre></div>
</div>
</div>
</div>
<p>Nope! So let’s make the email address part of the regex more robust:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[\w\s]+,\s[\w\.-]+@[\w\.-]+,\s[\w\s]+&quot;</span><span class="p">,</span><span class="n">MyStr</span><span class="p">)</span>
<span class="k">match</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Samraat Pawar, s-pawar@imperial.ac.uk, Systems biology and ecological theory&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="practicals-some-regexercises">
<h3>Practicals: Some RegExercises<a class="headerlink" href="#practicals-some-regexercises" title="Link to this heading">#</a></h3>
<p>The following exercises are not for submission as part of your coursework, but we will discuss them in class on a subsequent day.</p>
<ol class="arabic simple">
<li><p>Try the regex we used above for finding names (<code class="docutils literal notranslate"><span class="pre">[\w\s]+</span></code>) for cases where the person’s name has something unexpected, like a <code class="docutils literal notranslate"><span class="pre">?</span></code> or a <code class="docutils literal notranslate"><span class="pre">+</span></code>. Does it work? How can you make it more robust?</p></li>
</ol>
<ul class="simple">
<li><p>Translate the following regular expressions into regular English:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">r'^abc[ab]+\s\t\d'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">r'^\d{1,2}\/\d{1,2}\/\d{4}$'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">r'\s*[a-zA-Z,\s]+\s*'</span></code></p></li>
</ul>
</li>
<li><p>Write a regex to match dates in format YYYYMMDD, making sure that:</p>
<ul>
<li><p>Only seemingly valid dates match (i.e., year greater than 1900)</p></li>
<li><p>First digit in month is either 0 or 1</p></li>
<li><p>First digit in day <span class="math notranslate nohighlight">\(\leq 3\)</span></p></li>
</ul>
</li>
</ul>
</section>
<section id="grouping-regex-patterns">
<h3>Grouping regex patterns<a class="headerlink" href="#grouping-regex-patterns" title="Link to this heading">#</a></h3>
<p>You can group regex patterns into meaningful blocks using parentheses. Let’s look again at the example of finding  email addresses.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyStr</span> <span class="o">=</span> <span class="s1">&#39;Samraat Pawar, s.pawar@imperial.ac.uk, Systems biology and ecological theory&#39;</span>
<span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[\w\s]+,\s[\w\.-]+@[\w\.-]+,\s[\w\s]+&quot;</span><span class="p">,</span><span class="n">MyStr</span><span class="p">)</span>
<span class="k">match</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Samraat Pawar, s.pawar@imperial.ac.uk, Systems biology and ecological theory&#39;
</pre></div>
</div>
</div>
</div>
<p>Without grouping the regex:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Samraat Pawar, s.pawar@imperial.ac.uk, Systems biology and ecological theory&#39;
</pre></div>
</div>
</div>
</div>
<p>Now create groups using <code class="docutils literal notranslate"><span class="pre">(</span> <span class="pre">)</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;([\w\s]+),\s([\w\.-]+@[\w\.-]+),\s([\w\s&amp;]+)&quot;</span><span class="p">,</span><span class="n">MyStr</span><span class="p">)</span>
<span class="k">if</span> <span class="n">match</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Samraat Pawar, s.pawar@imperial.ac.uk, Systems biology and ecological theory
Samraat Pawar
s.pawar@imperial.ac.uk
Systems biology and ecological theory
</pre></div>
</div>
</div>
</div>
<p>Nice! This is very handy for extracting specific patterns from text data. Note that we excluded the <code class="docutils literal notranslate"><span class="pre">,</span></code>’s and the <code class="docutils literal notranslate"><span class="pre">\s</span></code>’s from the grouping parentheses because we don’t want them to be returned in the match group list.</p>
<p>Have a look at <code class="docutils literal notranslate"><span class="pre">re4.py</span></code> in the TheMulQuaBio’s code repository for more on parsing email addresses using regexes.</p>
</section>
<section id="useful-re-commands">
<h3>Useful <code class="docutils literal notranslate"><span class="pre">re</span></code> commands<a class="headerlink" href="#useful-re-commands" title="Link to this heading">#</a></h3>
<p>Here are some important functions in the <code class="docutils literal notranslate"><span class="pre">re</span></code> module:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Command</p></th>
<th class="head text-left"><p>What it does</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">re.search(reg,</span> <span class="pre">text)</span></code></p></td>
<td class="text-left"><p>Scans the string and finds the first match of the pattern, returning a <code class="docutils literal notranslate"><span class="pre">match</span></code> object if successful and <code class="docutils literal notranslate"><span class="pre">None</span></code> otherwise.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">re.match(reg,</span> <span class="pre">text)</span></code></p></td>
<td class="text-left"><p>Like <code class="docutils literal notranslate"><span class="pre">re.search</span></code>, but only matches the beginning of the string.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">re.compile(reg)</span></code></p></td>
<td class="text-left"><p>Compiles (stores) a regular expression for repeated use, improving efficiency.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">re.split(ref,</span> <span class="pre">text)</span></code></p></td>
<td class="text-left"><p>Splits the text by the occurrence of the pattern described by the regular expression.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">re.findall(ref,</span> <span class="pre">text)</span></code></p></td>
<td class="text-left"><p>Like <code class="docutils literal notranslate"><span class="pre">re.search</span></code>, but returns a list of all matches. If groups are present, returns a list of groups.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">re.finditer(ref,</span> <span class="pre">text)</span></code></p></td>
<td class="text-left"><p>Like <code class="docutils literal notranslate"><span class="pre">re.findall</span></code>, but returns an iterator containing the match objects over which you can iterate. Useful for “crawling” efficiently through text till you find all necessary number of matches.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">re.sub(ref,</span> <span class="pre">repl,</span> <span class="pre">text)</span></code></p></td>
<td class="text-left"><p>Substitutes each non-overlapping occurrence of the match with the text in <code class="docutils literal notranslate"><span class="pre">repl</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
</tr>
</tbody>
</table>
</div>
<p>Many of these commands also work on whole contents of files. We will look at an example of this below. Let us try some particularly useful applications of some of these commands.</p>
</section>
<section id="finding-all-matches">
<h3>Finding all matches<a class="headerlink" href="#finding-all-matches" title="Link to this heading">#</a></h3>
<p>Above we used re.search() to find the first match for a pattern. In many scenarios, you will need to find <em>all</em> the matches of a pattern. The function <code class="docutils literal notranslate"><span class="pre">re.findall()</span></code> does precisely this and returns all matches as a list of strings, with each string representing one match.</p>
<p>Let’s try this on an extension of the email example above for some data with multiple addresses:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyStr</span> <span class="o">=</span> <span class="s2">&quot;Samraat Pawar, s.pawar@imperial.ac.uk, Systems biology and ecological theory; Another academic, a-academic@imperial.ac.uk, Some other stuff thats equally boring; Yet another academic, y.a_academic@imperial.ac.uk, Some other stuff thats even more boring&quot;</span>
</pre></div>
</div>
</div>
</div>
<p>Now <code class="docutils literal notranslate"><span class="pre">re.findall()</span></code> returns a list of all the emails found:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">emails</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[\w\.-]+@[\w\.-]+&#39;</span><span class="p">,</span> <span class="n">MyStr</span><span class="p">)</span> 
<span class="k">for</span> <span class="n">email</span> <span class="ow">in</span> <span class="n">emails</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">email</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>s.pawar@imperial.ac.uk
a-academic@imperial.ac.uk
y.a_academic@imperial.ac.uk
</pre></div>
</div>
</div>
</div>
<p>Nice!</p>
</section>
<section id="finding-in-files">
<h3>Finding in files<a class="headerlink" href="#finding-in-files" title="Link to this heading">#</a></h3>
<p>You will generally be wanting to apply regex searches to whole files. You might be tempted to write a loop to iterate over the lines of the file, calling <code class="docutils literal notranslate"><span class="pre">re.findall()</span></code> on each line. However, <code class="docutils literal notranslate"><span class="pre">re.findall()</span></code> can return a list of all the matches in a single step.</p>
<p>Let’s try finding all species names that correspond to Oaks in a data file:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;../data/TestOaksData.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">found_oaks</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Q[\w\s].*\s&quot;</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

<span class="n">found_oaks</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;Quercus, robur\n&#39;, &#39;Quercus, cerris\n&#39;, &#39;Quercus, petraea\n&#39;]
</pre></div>
</div>
</div>
</div>
<p>This works because recall that <code class="docutils literal notranslate"><span class="pre">f.read()</span></code> returns the whole text of a file in a single string). Also, the file is closed after reading.</p>
</section>
<section id="groups-within-multiple-matches">
<h3>Groups within multiple matches<a class="headerlink" href="#groups-within-multiple-matches" title="Link to this heading">#</a></h3>
<p>Grouping pattern matches using <code class="docutils literal notranslate"><span class="pre">(</span> <span class="pre">)</span></code> as you learned above, can be combined with <code class="docutils literal notranslate"><span class="pre">re.findall()</span></code>. If the pattern includes <em>two or more</em> groups, then instead of returning a list of strings, <code class="docutils literal notranslate"><span class="pre">re.findall()</span></code> returns a list of tuples. Each tuple represents one match of the pattern, and inside the tuple is group(1), group(2), etc.</p>
<p>Let’s try it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyStr</span> <span class="o">=</span> <span class="s2">&quot;Samraat Pawar, s.pawar@imperial.ac.uk, Systems biology and ecological theory; Another academic, a.academic@imperial.ac.uk, Some other stuff thats equally boring; Yet another academic, y.a.academic@imperial.ac.uk, Some other stuff thats even more boring&quot;</span>

<span class="n">found_matches</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;([\w\s]+),\s([\w\.-]+@[\w\.-]+)&quot;</span><span class="p">,</span> <span class="n">MyStr</span><span class="p">)</span>
<span class="n">found_matches</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(&#39;Samraat Pawar&#39;, &#39;s.pawar@imperial.ac.uk&#39;),
 (&#39; Another academic&#39;, &#39;a.academic@imperial.ac.uk&#39;),
 (&#39; Yet another academic&#39;, &#39;y.a.academic@imperial.ac.uk&#39;)]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">found_matches</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&#39;Samraat Pawar&#39;, &#39;s.pawar@imperial.ac.uk&#39;)
(&#39; Another academic&#39;, &#39;a.academic@imperial.ac.uk&#39;)
(&#39; Yet another academic&#39;, &#39;y.a.academic@imperial.ac.uk&#39;)
</pre></div>
</div>
</div>
</div>
</section>
<section id="extracting-text-from-webpages">
<h3>Extracting text from webpages<a class="headerlink" href="#extracting-text-from-webpages" title="Link to this heading">#</a></h3>
<p>OK, let’s step up the ante here. How about extracting text from a web page to create your own data? Let’s try extracting data from <a class="reference external" href="https://www.imperial.ac.uk/silwood-park/academic-staff/">this page</a>.</p>
<p>You will need a new package <code class="docutils literal notranslate"><span class="pre">urllib3</span></code>. Install it, and import it (also <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">re</span></code> if needed).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">urllib3</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span> <span class="o">=</span> <span class="n">urllib3</span><span class="o">.</span><span class="n">PoolManager</span><span class="p">()</span> <span class="c1"># open a connection</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;https://www.imperial.ac.uk/silwood-park/academic-staff/&#39;</span><span class="p">)</span> 
<span class="n">webpage_html</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">data</span> <span class="c1">#read in the webpage&#39;s contents</span>
</pre></div>
</div>
</div>
</div>
<p>This is returned as bytes (not strings).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">webpage_html</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>bytes
</pre></div>
</div>
</div>
</div>
<p>So decode it (remember, the default decoding that this method applies is <em>utf-8</em>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">My_Data</span>  <span class="o">=</span> <span class="n">webpage_html</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
<span class="c1">#print(My_Data)</span>
</pre></div>
</div>
</div>
</div>
<p>That’s a lot of potentially useful information! Let’s extract all the names of academics:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;Dr\s+\w+\s+\w+&quot;</span>
<span class="n">regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span> <span class="c1"># example use of re.compile(); you can also ignore case  with re.IGNORECASE </span>
<span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">regex</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="n">My_Data</span><span class="p">):</span> <span class="c1"># example use of re.finditer()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dr Arkhat Abzhanov
Dr Arkhat Abzhanov
Dr Cristina Banks
Dr Martin Brazeau
Dr Martin Brazeau
Dr Lauren Cator
Dr Rob Ewers
Dr Rob Ewers
Dr Richard Gill
Dr Richard Gill
Dr Peter Graystock
Dr Peter Graystock
Dr Samraat Pawar
Dr Will Pearse
Dr Will Pearse
Dr Will Pearse
Dr Emma Ransome
Dr Emma Ransome
Dr Julia Schroeder
Dr Julia Schroeder
Dr Julia Schroeder
Dr Joseph Tobias
Dr Joseph Tobias
Dr Bonnie Waring
Dr Bonnie Waring
Dr Bonnie Waring
Dr Emma Cavan
Dr Emma Cavan
Dr Emma Caven
Dr Magda Charalambous
Dr Magda Charalambous
Dr Vassiliki Koufopanou
Dr Fengjie Liu
Dr David Orme
Dr Chris Wilson
Dr Michael Themis
Dr Michael Themis
Dr Aurelio Malo
Dr Aurelio Malo
</pre></div>
</div>
</div>
</div>
<p>Again, nice! However, its’ not perfect.</p>
<p>You can improve this by:</p>
<ul class="simple">
<li><p>Extracting Prof names as well</p></li>
<li><p>Eliminating the repeated matches</p></li>
<li><p>Grouping to separate title from first and second names</p></li>
<li><p>Extracting names that have unexpected characters, such as in hyphenated names (a “-” in the name)</p></li>
</ul>
<p><em>Try making these improvements.</em></p>
<p>Of course, you can match and extract other types of patterns as well, such as urls and email addresses (though this example web page does not have email addresses).</p>
</section>
<section id="replacing-text">
<h3>Replacing text<a class="headerlink" href="#replacing-text" title="Link to this heading">#</a></h3>
<p>Using the same web page data, let’s try using the <code class="docutils literal notranslate"><span class="pre">re.sub</span></code> command on the same web page data (<code class="docutils literal notranslate"><span class="pre">My_Data</span></code>) to replace text:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">New_Data</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\t&#39;</span><span class="p">,</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">My_Data</span><span class="p">)</span> <span class="c1"># replace all tabs with a space</span>
<span class="c1"># print(New_Data)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="id4">
<h3>Practicals<a class="headerlink" href="#id4" title="Link to this heading">#</a></h3>
<section id="blackbirds-problem">
<h4>Blackbirds problem<a class="headerlink" href="#blackbirds-problem" title="Link to this heading">#</a></h4>
<p>Complete the code <code class="docutils literal notranslate"><span class="pre">blackbirds.py</span></code> that you find in the <code class="docutils literal notranslate"><span class="pre">TheMulQuaBio</span></code> (necessary data file is also there).</p>
</section>
</section>
</section>
<section id="using-python-to-build-workflows">
<h2>Using Python to build workflows<a class="headerlink" href="#using-python-to-build-workflows" title="Link to this heading">#</a></h2>
<p>You can use python to build an automated data analysis or simulation workflow that involves multiple languages, especially the ones you have already learnt: R, <span class="math notranslate nohighlight">\(\LaTeX\)</span>, and UNIX bash. For example, you could, in theory, write a single Python script to generate and update your masters dissertation, tables, plots, and all. Python is ideal for building such workflows because it has packages for practically every purpose.</p>
<p><em>Thus this topic may be useful for your <a class="reference internal" href="Appendix-MiniProj.html"><span class="std std-doc">Miniproject</span></a>, which will involve building a reproducible computational workflow.</em></p>
<section id="using-subprocess">
<h3>Using <code class="docutils literal notranslate"><span class="pre">subprocess</span></code><a class="headerlink" href="#using-subprocess" title="Link to this heading">#</a></h3>
<p>For building a workflow in Python the <code class="docutils literal notranslate"><span class="pre">subprocess</span></code> module is key. With this module you can run non-Python commands and scripts, obtain their outputs, and also crawl through and manipulate directories.</p>
<p>First, import the module (this is part of the python standard library, so you won’t need to install it):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">subprocess</span>
</pre></div>
</div>
</div>
</div>
<section id="running-processes">
<h4>Running processes<a class="headerlink" href="#running-processes" title="Link to this heading">#</a></h4>
<p>There are two main ways to run commands through subprocess: <code class="docutils literal notranslate"><span class="pre">run</span></code> (available in Python 3.5 onwards) for basic usage, and <code class="docutils literal notranslate"><span class="pre">Popen</span></code> (<code class="docutils literal notranslate"><span class="pre">P</span></code>rocess <code class="docutils literal notranslate"><span class="pre">open</span></code>) for more advanced usage. We will work directly with <code class="docutils literal notranslate"><span class="pre">popen</span></code> because <code class="docutils literal notranslate"><span class="pre">run()</span></code> is a wrapper around <code class="docutils literal notranslate"><span class="pre">Popen</span></code>. Using <code class="docutils literal notranslate"><span class="pre">Popen</span></code> directly gives more control over how the command is run, and how its input and output are processed.</p>
<p>Let’s try running some commands in the UNIX bash.</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> In a terminal, first <code class="docutils literal notranslate"><span class="pre">cd</span></code> to your <code class="docutils literal notranslate"><span class="pre">code</span></code> directory,  launch <code class="docutils literal notranslate"><span class="pre">ipython3</span></code>, then and type:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;echo&quot;</span><span class="p">,</span> <span class="s2">&quot;I&#39;m talkin&#39; to you, bash!&quot;</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This creates an object <code class="docutils literal notranslate"><span class="pre">p</span></code>, from which you can extract the output and other information of the command you ran. Before we do anything more, let’s look at our <code class="docutils literal notranslate"><span class="pre">subprocess.popen</span></code> call carefully.</p>
<ul class="simple">
<li><p>The command line arguments were passed as a list of strings, which avoids the need for escaping quotes or other special characters that might be interpreted by the shell (for example, in this case, there are apostrophes in the string that is being <code class="docutils literal notranslate"><span class="pre">echo</span></code>ed in bash).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stdout</span></code> is the output from the process “spawned” by your command. This is a sequence of bytes (which you will need to decode - more on this below).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stderr</span></code> is the error code (from which you can capture whether the process ran successfully or not). The method PIPE creates a new “pipe” (literally, a connection) to the output of to the “child”  process.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stderr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>b&#39;&#39;
</pre></div>
</div>
</div>
</div>
<p>Nothing here, because the echo command does no return an any code. the <code class="docutils literal notranslate"><span class="pre">b</span></code> indicates that the output is in bits (unencoded). By default, stdout, stderr (and other outputs of <code class="docutils literal notranslate"><span class="pre">p.communicate</span></code>) are returned as binary (byte) format.</p>
<p>Now check what’s in <code class="docutils literal notranslate"><span class="pre">stdout</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stdout</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>b&quot;I&#39;m talkin&#39; to you, bash!\n&quot;
</pre></div>
</div>
</div>
</div>
<p>Let’s encode and print it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>I&#39;m talkin&#39; to you, bash!
</pre></div>
</div>
</div>
</div>
<p>You can also use a <code class="docutils literal notranslate"><span class="pre">universal_newlines</span> <span class="pre">=</span> <span class="pre">True</span></code> so that these outputs are returned as encoded text (default being <em>utf-8</em> usually), with  line endings converted to ‘\n’. For more information <a class="reference external" href="https://docs.python.org/3.5/library/subprocess.html">see the documentation</a>.</p>
<p>Let’s try something else:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;ls&quot;</span><span class="p">,</span> <span class="s2">&quot;-l&quot;</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span>
<span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Now use <code class="docutils literal notranslate"><span class="pre">print(stdout.decode())</span></code> to see the output.</p>
<p>Recall that the <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-l</span></code> command lists all files in a long listing format.</p>
<p>You can also call python itself from bash (!):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;python3&quot;</span><span class="p">,</span> <span class="s2">&quot;boilerplate.py&quot;</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span> <span class="c1"># A bit silly! </span>
<span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>
</pre></div>
</div>
<p>This should give you the output of your <code class="docutils literal notranslate"><span class="pre">boilerplate.py</span></code> script (remember, your current path will need to be in the appropriate code directory of the relevant week’s directory).</p>
<p>Similarly, to compile a <span class="math notranslate nohighlight">\(\LaTeX\)</span> document (using <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code> in this case), you can do something like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">subprocess</span><span class="o">.</span><span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;pdflatex yourlatexdoc.tex&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="running-r">
<h3>Running <code class="docutils literal notranslate"><span class="pre">R</span></code><a class="headerlink" href="#running-r" title="Link to this heading">#</a></h3>
<p>R is likely an important part of your project’s analysis and data visualization components in particular — for example for statistical analyses and plotting. You can run <code class="docutils literal notranslate"><span class="pre">R</span></code> from Python easily:</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Create an R script file called <code class="docutils literal notranslate"><span class="pre">TestR.R</span></code> in your <code class="docutils literal notranslate"><span class="pre">code</span></code> directory with the following content:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">print</span><span class="p">(</span><span class="s">&quot;Hello, this is R!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Then try running it from your bash terminal (<em>not</em> from the Python terminal) (e.g., using <code class="docutils literal notranslate"><span class="pre">Rscript</span> <span class="pre">TestR.R</span></code>). This should return in your terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span><span class="s2">&quot;Hello, this is R!&quot;</span><span class="sb">`</span>
</pre></div>
</div>
<p>Then the try <code class="docutils literal notranslate"><span class="pre">Rscript</span> <span class="pre">--verbose</span> <span class="pre">TestR.R</span></code>. Thhis should return something like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="s1">&#39;/usr/lib/R/bin/R --no-echo --no-restore --file=TestR.R&#39;</span>

<span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span><span class="s2">&quot;Hello, this is R!&quot;</span>
</pre></div>
</div>
<p>Thus the <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> flag to <code class="docutils literal notranslate"><span class="pre">Rscript</span></code> prints out addtional information about the R script’s execution.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is possible that the location of <code class="docutils literal notranslate"><span class="pre">RScript</span></code> is different in your Unix/Linux system. To locate it, try <code class="docutils literal notranslate"><span class="pre">find</span> <span class="pre">/usr</span> <span class="pre">-name</span> <span class="pre">'Rscript'</span></code> in the bash terminal (not in Python!). For example, you might need to specify the path to it using <code class="docutils literal notranslate"><span class="pre">/usr/lib/R/bin/Rscript</span></code>.</p>
</div>
<p>Now try:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Rscript<span class="w"> </span>--verbose<span class="w"> </span>TestR.R<span class="w"> </span>&gt;<span class="w"> </span>../results/TestR.Rout<span class="w"> </span><span class="m">2</span>&gt;<span class="w"> </span>../results/TestR_errFile.Rout
</pre></div>
</div>
<p>Then check the contents of <code class="docutils literal notranslate"><span class="pre">TestR.Rout</span></code> and <code class="docutils literal notranslate"><span class="pre">TestR_errFile.Rout</span></code>. The former should contain the output of the R script, and the latter the additonal information produced due to the <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> flag.</p>
<p>Now try running this using subprocess instead:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="s2">&quot;Rscript --verbose TestR.R &gt; ../results/TestR.Rout 2&gt; ../results/TestR_errFile.Rout&quot;</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
</div>
</div>
<p>There are two three new things here compared to what we did above when running a bash instead of a R command. Firtly, we are using <code class="docutils literal notranslate"><span class="pre">shell</span> <span class="pre">=</span> <span class="pre">True</span></code>. This is because we want subprocess to execute a non-standard bash command (RScript is not a stadard bash command) in the standard unix/linux shell. Secondly, we added <code class="docutils literal notranslate"><span class="pre">.wait()</span></code> to allow the RScript to terminate (this allows us to set timeout id necessary). Thirdly, we removed the  <code class="docutils literal notranslate"><span class="pre">stdout=subprocess.PIPE,</span> <span class="pre">stderr=subprocess.PIPE</span></code> bits, because they will not work when using <code class="docutils literal notranslate"><span class="pre">wait()</span></code>. Read <a class="reference external" href="https://docs.python.org/3/library/subprocess.html">the documentation</a> tolearn more.</p>
<p>Now, create a script <code class="docutils literal notranslate"><span class="pre">TestR.py</span></code> with the following content :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">subprocess</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="s2">&quot;Rscript --verbose TestR.R &gt; ../results/TestR.Rout 2&gt; ../results/TestR_errFile.Rout&quot;</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Now run <code class="docutils literal notranslate"><span class="pre">TestR.py</span></code> (or <code class="docutils literal notranslate"><span class="pre">%cpaste</span></code>) and check<code class="docutils literal notranslate"><span class="pre">TestR.Rout</span></code> and <code class="docutils literal notranslate"><span class="pre">TestR_errorFile.Rout</span></code>.</p>
<p>Also check what happens if you run (type directly in <code class="docutils literal notranslate"><span class="pre">ipython</span></code> or <code class="docutils literal notranslate"><span class="pre">python</span></code> console):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="s2">&quot;Rscript --verbose NonExistScript.R &gt; ../results/outputFile.Rout 2&gt; ../results/errorFile.Rout&quot;</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<p>What do you see on the screen?</p>
<p>Now open and check <code class="docutils literal notranslate"><span class="pre">outputFile.Rout</span></code>and `errorFile.Rout.</p>
</section>
<section id="handling-directory-and-file-paths">
<h3>Handling directory and file paths<a class="headerlink" href="#handling-directory-and-file-paths" title="Link to this heading">#</a></h3>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">subprocess.os</span></code> to make your code OS (Linux, Windows, Mac) independent. For example to assign paths:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">subprocess</span><span class="o">.</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;directory&#39;</span><span class="p">,</span> <span class="s1">&#39;subdirectory&#39;</span><span class="p">,</span> <span class="s1">&#39;file&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;directory/subdirectory/file&#39;
</pre></div>
</div>
</div>
</div>
<p>The result would be appropriately different on Windows (with backslashes instead of forward slashes).</p>
<p>Note that in all cases you can “catch” the output of <code class="docutils literal notranslate"><span class="pre">subprocess</span></code> so that you can then use the output within your
python script. A simple example, where the output is a platform-dependent directory path, is:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyPath</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;directory&#39;</span><span class="p">,</span> <span class="s1">&#39;subdirectory&#39;</span><span class="p">,</span> <span class="s1">&#39;file&#39;</span><span class="p">)</span>
<span class="n">MyPath</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;directory/subdirectory/file&#39;
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Explore the various commands within <code class="docutils literal notranslate"><span class="pre">subprocess</span></code> by hitting the tap key after typing <code class="docutils literal notranslate"><span class="pre">subprocess.</span></code>. Do the same for submodules, e.g., type <code class="docutils literal notranslate"><span class="pre">subprocess.os.</span></code> and then hit  the tab key.</p>
</div>
</section>
<section id="id5">
<h3>Practicals<a class="headerlink" href="#id5" title="Link to this heading">#</a></h3>
<section id="using-subprocess-to-run-a-r-script">
<h4>Using <code class="docutils literal notranslate"><span class="pre">subprocess</span></code> to run a R script<a class="headerlink" href="#using-subprocess-to-run-a-r-script" title="Link to this heading">#</a></h4>
<p>Open <code class="docutils literal notranslate"><span class="pre">fmr.R</span></code> and work out what it does; check that you have <code class="docutils literal notranslate"><span class="pre">NagyEtAl1999.csv</span></code>. Now write python code called <code class="docutils literal notranslate"><span class="pre">run_fmr_R.py</span></code> that:</p>
<p>Runs <code class="docutils literal notranslate"><span class="pre">fmr.R</span></code> to generate the desired result</p>
<p><code class="docutils literal notranslate"><span class="pre">run_fmr_R.py</span></code> should also print to the python screen whether the run was successful, and the contents of the R console output</p>
</section>
<section id="using-os-to-crawl-directories">
<h4>Using <code class="docutils literal notranslate"><span class="pre">os</span></code> to crawl directories<a class="headerlink" href="#using-os-to-crawl-directories" title="Link to this heading">#</a></h4>
<p>Open <code class="docutils literal notranslate"><span class="pre">using_os.py</span></code> and complete the tasks assigned (hint: you might want to look at <code class="docutils literal notranslate"><span class="pre">subprocess.os.walk()</span></code>)</p>
</section>
</section>
</section>
<section id="readings-and-resources">
<h2>Readings and Resources<a class="headerlink" href="#readings-and-resources" title="Link to this heading">#</a></h2>
<section id="general">
<h3>General<a class="headerlink" href="#general" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>M. Fowler, Refactoring: improving the design of existing code (2000), Addison-Wesley Professional</p></li>
<li><p>R. C. Martin, Clean code, A handbook of agile software craftsmanship (2009), Prentice Hall</p></li>
<li><p>Browse the Python <a class="reference external" href="https://docs.python.org/3/tutorial">tutorial</a></p></li>
<li><p>Shaw, Zed. 2017. Learn Python 3 the Hard Way: A Very Simple Introduction to the Terrifyingly Beautiful World of Computers and Code. Boston : Addison-Wesley (likely available in your University library)</p></li>
<li><p>Python style guide from <a class="reference external" href="https://docs.python-guide.org/writing/style">the Hitchhiker’s Guide to Python</a></p></li>
<li><p>A very detailed style guide: <a class="reference external" href="https://google.github.io/styleguide/pyguide.html">the Google Python Style Guide</a></p></li>
</ul>
</section>
<section id="id6">
<h3>IPython<a class="headerlink" href="#id6" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>The IPython <a class="reference external" href="https://ipython.readthedocs.io/en/stable">documentation</a></p></li>
<li><p><a class="reference external" href="https://github.com/ipython/ipython/wiki">Cookbooks</a> can be very useful</p></li>
</ul>
</section>
<section id="id7">
<h3>Python data structures<a class="headerlink" href="#id7" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Read more about native Python data structures <a class="reference external" href="https://diveintopython3.problemsolving.io/native-datatypes.html">here</a></p></li>
</ul>
</section>
<section id="elements-of-the-python-program">
<h3>Elements of the Python program<a class="headerlink" href="#elements-of-the-python-program" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Read more about the python shebang <a class="reference external" href="https://www.python.org/dev/peps/pep-0394/#recommendation">here</a></p></li>
<li><p>See the <a class="reference external" href="https://www.python.org/dev/peps/pep-0257/">official docstring conventions</a></p></li>
</ul>
</section>
<section id="errors-and-debugging">
<h3>Errors and Debugging<a class="headerlink" href="#errors-and-debugging" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/tutorial/errors.html">https://docs.python.org/3/tutorial/errors.html</a></p></li>
</ul>
</section>
<section id="functions-modules-and-classes">
<h3>Functions, Modules, and Classes<a class="headerlink" href="#functions-modules-and-classes" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>For functions vs. modules vs. classes in Python, have a look <a class="reference external" href="http://learnpythonthehardway.org/book/ex40.html">at this</a></p></li>
</ul>
</section>
<section id="id8">
<h3>Python Packages<a class="headerlink" href="#id8" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Look up <a class="reference external" href="https://docs.python.org/3/library/index.html">https://docs.python.org/3/library/index.html</a> – Read about the packages you think will be important to you</p></li>
</ul>
</section>
<section id="scientific-computing">
<h3>Scientific computing<a class="headerlink" href="#scientific-computing" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>In general, scores of good module/package-specific cookbooks are out there — google “cookbook” along with the name of the package you are interested in (e.g., “scipy cookbook”).</p></li>
<li><p>For SciPy, read the <a class="reference external" href="https://docs.scipy.org/doc/">official documentation</a>; in particular, read about the scipy <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/">modules</a> you think will be important to you.</p></li>
<li><p>The “ecosystem” for Scientific computing in python: <a class="reference external" href="http://www.scipy-lectures.org/">http://www.scipy-lectures.org/</a></p></li>
<li><p>Many great examples of applications in the <a class="reference external" href="https://scipy-cookbook.readthedocs.io/">scipy cookbook</a></p></li>
<li><p>Scipy stats: <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/tutorial/stats.html">https://docs.scipy.org/doc/scipy/reference/tutorial/stats.html</a></p></li>
<li><p>A Primer on Scientific Programming with Python <a class="reference external" href="http://www.springer.com/us/book/9783642549595">http://www.springer.com/us/book/9783642549595</a>; Multiple copies of this book are available from the central library and can be requested to Silwood from the IC library website. You can also find a pdf - seach online.</p></li>
</ul>
</section>
<section id="regular-expressions">
<h3>Regular expressions<a class="headerlink" href="#regular-expressions" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Python regex documentation: <a class="reference external" href="https://docs.python.org/3.6/howto/regex.html">https://docs.python.org/3.6/howto/regex.html</a></p></li>
<li><p>Google’s short class on regex in python: <a class="reference external" href="https://developers.google.com/edu/python/regular-expressions">https://developers.google.com/edu/python/regular-expressions</a>
And this exercise: <a class="reference external" href="https://developers.google.com/edu/python/exercises/baby-names">https://developers.google.com/edu/python/exercises/baby-names</a></p></li>
<li><p>Good intro to regex, tips and a great array of canned solutions: <a class="reference external" href="http://www.regular-expressions.info">http://www.regular-expressions.info</a></p></li>
<li><p>Use and abuse of regex: <a class="reference external" href="https://blog.codinghorror.com/regex-use-vs-regex-abuse/">https://blog.codinghorror.com/regex-use-vs-regex-abuse/</a></p></li>
</ul>
</section>
<section id="other-stuff">
<h3>Other stuff<a class="headerlink" href="#other-stuff" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="http://matplotlib.org">The matplotlib website</a></p></li>
<li><p>Alternatives to matplotlib for plotting in python: <a class="reference external" href="https://towardsdatascience.com/matplotlib-vs-seaborn-vs-plotly-f2b79f5bddb">https://towardsdatascience.com/matplotlib-vs-seaborn-vs-plotly-f2b79f5bddb</a></p></li>
<li><p>Some of you might find the python package <code class="docutils literal notranslate"><span class="pre">biopython</span></code> particularly useful — check out <a class="reference external" href="http://biopython.org/">http://biopython.org/</a>, and especially, the cookbook</p></li>
</ul>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="LaTeX.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Scientific documents with <span class="math notranslate nohighlight">\(\LaTeX\)</span></p>
      </div>
    </a>
    <a class="right-next"
       href="R.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Biological Computing in R</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-python">Why Python?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python-versions">Python versions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#some-terminology">Some terminology</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-started-with-python">Getting started with Python</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#baby-steps">Baby steps</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-zen-of-python-and-good-programming-practices">The Zen of Python and good programming practices</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ipython">ipython</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#magic-commands">Magic commands</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#determining-an-object-s-type">Determining an object’s type</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#python-variables">Python variables</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python-operators">Python operators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#assigning-and-manipulating-variables">Assigning and manipulating variables</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#python-data-structures">Python data structures</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lists">Lists</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tuples">Tuples</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sets">Sets</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dictionaries">Dictionaries</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#copying-mutable-objects">Copying mutable objects</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python-with-strings">Python with strings</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-help">Getting help</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#writing-python-code">Writing Python code</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-running-blocks-of-code">Testing/Running blocks of code</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loops">Loops</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#iterator-vs-iterable">Iterator vs Iterable</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#some-loops-examples">Some loops examples</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#functions">Functions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-python-scripts">Running Python scripts</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-the-unix-shell">Using the UNIX shell</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#from-the-unix-shell-using-ipython">From the UNIX shell, using ipython</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#from-within-the-ipython-shell">From within the ipython shell</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#control-flow-tools">Control flow tools</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conditionals">Conditionals</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#more-examples-of-loops-and-conditionals-combined">More examples of loops and conditionals combined</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#comprehensions">Comprehensions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#variable-scope">Variable scope</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#global-variables">Global variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#importance-of-the-return-directive">Importance of the <code class="docutils literal notranslate"><span class="pre">return</span></code> directive</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#python-input-output">Python Input/Output</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#safely-opening-files-using-with-open">Safely opening files using <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">open()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#handling-csv-s">Handling <code class="docutils literal notranslate"><span class="pre">csv</span></code>’s</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#writing-python-programs">Writing Python programs</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#components-of-the-python-program">Components of the Python program</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#the-shebang">The shebang</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#the-docstring">The Docstring</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#internal-variables">Internal Variables</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#function-definitions-and-modules">Function <code class="docutils literal notranslate"><span class="pre">def</span></code>initions and “modules”</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#why-include-name-main-and-all-that-jazz">Why include <code class="docutils literal notranslate"><span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">"__main__"</span></code> and all that jazz</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-sys-argv">What is <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code>?</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-main-argv">What is <code class="docutils literal notranslate"><span class="pre">main(argv)</span></code> ?</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#finally-sys-exit">Finally, sys.exit()</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-program-with-control-flows-example">A program-with-control-flows example</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#practicals">Practicals</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#loops-and-list-comprehensions">Loops and List Comprehensions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#writing-a-program-with-control-flows">Writing a Program with Control flows</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#errors-in-your-python-code">Errors in your Python code</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-testing">Unit testing</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-testing-with-doctest">Unit testing with <code class="docutils literal notranslate"><span class="pre">doctest</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#other-unit-testing-approaches">Other unit testing approaches</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#debugging">Debugging</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#paranoid-programming-debugging-with-breakpoints">Paranoid programming: debugging with breakpoints</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#debugging-using-your-ide">Debugging using your IDE</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#errors-that-cannot-be-debugged">Errors that cannot be debugged</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#modules-and-code-compartmentalization">Modules and code compartmentalization</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#importing-modules">Importing Modules</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python-packages">Python packages</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Practicals</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#align-dna-sequences">Align DNA sequences</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#groupwork-practical-on-align-dna-sequences">Groupwork Practical on Align DNA sequences</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#groupwork-practical-on-align-dna-sequences-2">Groupwork Practical on Align DNA sequences 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#missing-oaks-problem">Missing oaks problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#groupwork-practical-on-missing-oaks-problem">Groupwork Practical on Missing oaks problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#practicals-wrap-up">Practicals wrap-up</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#numerical-computing-in-python">Numerical computing in Python</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy">Numpy</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#indexing-and-accessing-arrays">Indexing and accessing arrays</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulating-arrays">Manipulating arrays</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#replacing-adding-or-deleting-elements">Replacing, adding or deleting elements</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#flattening-or-reshaping-arrays">Flattening or reshaping arrays</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pre-allocating-arrays">Pre-allocating arrays</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy-matrices"><code class="docutils literal notranslate"><span class="pre">numpy</span></code> matrices</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#matrix-vector-operations">Matrix-vector operations</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-scipy-package">The <code class="docutils literal notranslate"><span class="pre">scipy</span></code> package</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scipy-stats">Scipy stats</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#numerical-integration-using-scipy">Numerical integration using  <code class="docutils literal notranslate"><span class="pre">scipy</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#area-under-a-curve">Area under a curve</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#the-lotka-volterra-model">The Lotka-Volterra model</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Practicals</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-need-for-speed-profiling-code">The need for speed: profiling code</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#profiling">Profiling</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#profiling-without-ipython">Profiling without ipython</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#quick-profiling-with-timeit">Quick profiling with <code class="docutils literal notranslate"><span class="pre">timeit</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vectorization-revisited">Vectorization revisited</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#an-example">An example</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#when-to-vectorize">When to vectorize?</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#no-free-lunch">“No free lunch!”</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Practicals</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-lotka-volterra-model-revisited">The Lotka-Volterra model revisited</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#groupwork-practical-compare-r-and-python-vectorization">Groupwork practical: Compare R and Python Vectorization</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#groupwork-practical-discrete-time-lv-model">Groupwork practical: Discrete time LV Model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#groupwork-practical-discrete-time-lv-model-with-stochasticity">Groupwork practical: Discrete time LV model with stochasticity</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#regular-expressions-in-python">Regular expressions in Python</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#metacharacters-vs-regular-characters">Metacharacters vs. regular characters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regex-special-sequences">Regex special sequences</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#some-regex-examples">Some regex examples</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regex-in-python">Regex in Python</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#practicals-some-regexercises">Practicals: Some RegExercises</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#grouping-regex-patterns">Grouping regex patterns</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#useful-re-commands">Useful <code class="docutils literal notranslate"><span class="pre">re</span></code> commands</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-all-matches">Finding all matches</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-in-files">Finding in files</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#groups-within-multiple-matches">Groups within multiple matches</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#extracting-text-from-webpages">Extracting text from webpages</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#replacing-text">Replacing text</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Practicals</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#blackbirds-problem">Blackbirds problem</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-python-to-build-workflows">Using Python to build workflows</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-subprocess">Using <code class="docutils literal notranslate"><span class="pre">subprocess</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#running-processes">Running processes</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#running-r">Running <code class="docutils literal notranslate"><span class="pre">R</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#handling-directory-and-file-paths">Handling directory and file paths</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Practicals</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#using-subprocess-to-run-a-r-script">Using <code class="docutils literal notranslate"><span class="pre">subprocess</span></code> to run a R script</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#using-os-to-crawl-directories">Using <code class="docutils literal notranslate"><span class="pre">os</span></code> to crawl directories</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#readings-and-resources">Readings and Resources</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#general">General</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">IPython</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">Python data structures</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#elements-of-the-python-program">Elements of the Python program</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#errors-and-debugging">Errors and Debugging</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#functions-modules-and-classes">Functions, Modules, and Classes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Python Packages</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scientific-computing">Scientific computing</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regular-expressions">Regular expressions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#other-stuff">Other stuff</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By TheMulQuaBio collective!
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>